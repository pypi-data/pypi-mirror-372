# MCP Server Configuration for MicroRapid
# This file configures the MCP server that allows AI agents to execute API operations

[server]
# Server binding configuration
host = "127.0.0.1"
port = 3333
max_connections = 10

# TLS configuration (optional)
tls_enabled = false
# tls_cert = "/path/to/cert.pem"
# tls_key = "/path/to/key.pem"

[defaults]
# Default OpenAPI specification to use
spec_path = "./specs/api.yaml"

# Default environment
env = "production"

# Default authentication profile for agents
auth_profile = "default-agent"

# Policy file that controls what agents can do
policy_file = "./policy.yaml"

[audit]
# Enable audit logging for all operations
enabled = true

# Path to audit log file
path = "./logs/audit.jsonl"

# Audit level: none, basic, detailed
level = "detailed"

# Log rotation: daily, weekly, size
rotation = "daily"

# Maximum log size in MB (for size-based rotation)
max_size_mb = 100

# Compress old log files
compress = true

[security]
# Patterns to redact from responses (regex)
redact_patterns = [
    "password",
    "secret",
    "token",
    "key",
    "api_key",
    "apikey",
    "auth",
    "authorization",
    "credential",
    "ssn",
    "credit_card"
]

# Allow requests to override environment
allow_override_env = false

# Allow requests to override auth profile
allow_override_auth = false

# Require valid agent token
require_agent_token = true

# Header name for agent token
agent_token_header = "X-Agent-Token"

[performance]
# Request timeout in seconds
request_timeout = 30

# Maximum retries for failed requests
max_retries = 3

# Rate limit (requests per minute)
rate_limit = 100

# Maximum request body size in MB
max_body_size_mb = 10