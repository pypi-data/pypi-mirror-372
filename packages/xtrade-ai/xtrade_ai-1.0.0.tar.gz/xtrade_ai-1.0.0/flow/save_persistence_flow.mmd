%% Save & Persistence
flowchart LR

FW[XTradeAIFramework] --> MODELS[Collect Models]
FW --> META[Export Metadata\n- ensemble weights\n- calibration\n- config snapshot]
CFG[XTradeAIConfig.persistence\n(save_dir, encrypt, password)] --> SAVER[ModelSaver]
MODELS --> SAVER
META --> SAVER
SAVER --> ZIP[Zip Bundle]
ZIP --> ENC{Encrypt?}
ENC -- Yes --> AES[AES-256 (password or key)] --> FILE[(.models)]
ENC -- No --> FILE
