%% Meta-Learning with Simulation
flowchart TD

CFG[Enable Simulation\n(regimes, multiplier, drift, vol)] --> SIM[MarketSimulation]
SIM --> D1[Simulated OHLCV (regime A)]
SIM --> D2[Simulated OHLCV (regime B)]
SIM --> D3[Simulated OHLCV (regime C)]

subgraph Train/Eval per dataset
D1 --> ENV1
D2 --> ENV2
D3 --> ENV3
ENV1[XTradeEnvironment] --> FW1[XTradeAIFramework.train/eval]
ENV2[XTradeEnvironment] --> FW2[XTradeAIFramework.train/eval]
ENV3[XTradeEnvironment] --> FW3[XTradeAIFramework.train/eval]
end

FW1 --> REP1[(Report A)]
FW2 --> REP2[(Report B)]
FW3 --> REP3[(Report C)]

ORIG[Original OHLCV] --> ENVO
ENVO[XTradeEnvironment] --> FWO[XTradeAIFramework.train/eval]
FWO --> REPO[(Original Report)]

REP1 --> CMP[IntegratedAnalysis\naggregate/compare]
REP2 --> CMP
REP3 --> CMP
REPO --> CMP
CMP --> OUT[(Comparison JSON)]
