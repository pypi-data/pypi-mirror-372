export const __webpack_ids__=["49636"];export const __webpack_modules__={89166:function(e,t,i){i.a(e,async function(e,n){try{i.d(t,{Nu:()=>S,V3:()=>H,Vk:()=>h,YA:()=>k,xS:()=>b,zP:()=>j});i(2394),i(81738),i(94814),i(29981),i(22960),i(6989),i(72489),i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761);var s=i(44272),a=i(10388),r=i(15459),o=e([a]);a=(o.then?(await o)():o)[0];const c=["climate","humidifier","water_heater"],l=["climate","humidifier","input_datetime","water_heater","person","device_tracker"],d=["temperature","current_temperature","target_temp_low","target_temp_high","hvac_action","humidity","mode","action","current_humidity"],u=(e,t)=>!e.states[t]||l.includes((0,s.M)(t)),h=(e,t,i,n,s)=>{const a={type:"history/stream",entity_ids:s,start_time:i.toISOString(),end_time:n.toISOString(),minimal_response:!0,no_attributes:!s.some(t=>u(e,t))},r=new m(e);return e.connection.subscribeMessage(e=>t(r.processMessage(e)),a)};class m{processMessage(e){if(!this.combinedHistory||!Object.keys(this.combinedHistory).length)return this.combinedHistory=e.states,this.combinedHistory;if(!Object.keys(e.states).length)return this.combinedHistory;const t=this.hoursToShow?((new Date).getTime()-3600*this.hoursToShow*1e3)/1e3:void 0,i={};for(const e of Object.keys(this.combinedHistory))i[e]=[];for(const t of Object.keys(e.states))i[t]=[];for(const n of Object.keys(i)){if(n in this.combinedHistory&&n in e.states){const t=this.combinedHistory[n],s=t[t.length-1];i[n]=t.concat(e.states[n]),e.states[n][0].lu<s.lu&&(i[n]=i[n].sort((e,t)=>e.lu-t.lu))}else n in this.combinedHistory?i[n]=this.combinedHistory[n]:i[n]=e.states[n];if(t&&n in this.combinedHistory){const e=i[n].filter(e=>e.lu<t);if(!e.length)continue;if(i[n]=i[n].filter(e=>e.lu>=t),i[n].length&&i[n][0].lu===t)continue;const s=e[e.length-1];s.lu=t,i[n].unshift(s)}}return this.combinedHistory=i,this.combinedHistory}constructor(e,t){this.hass=e,this.hoursToShow=t,this.combinedHistory={}}}const b=(e,t,i,n,s,a=!0,r=!0)=>{const o={type:"history/stream",entity_ids:n,start_time:new Date((new Date).getTime()-3600*i*1e3).toISOString(),minimal_response:a,significant_changes_only:r,no_attributes:s??!n.some(t=>u(e,t))},c=new m(e,i);return e.connection.subscribeMessage(e=>t(c.processMessage(e)),o)},g=(e,t)=>e.state===t.state&&(!e.attributes||!t.attributes||d.every(i=>e.attributes[i]===t.attributes[i])),f=(e,t,i,n,s,o,c)=>{const l=[],d=o[0];for(const r of o){if(l.length>0&&r.s===l[l.length-1].state)continue;const o={};c?.attributes.device_class&&(o.device_class=c?.attributes.device_class),l.push({state_localize:(0,a.c)(e,t,[],i,n[s],s,{...r.a||d.a,...o},r.s),state:r.s,last_changed:1e3*(r.lc?r.lc:r.lu)})}return{name:(0,r.a)(s,c?.attributes||d.a),entity_id:s,data:l}},y=(e,t,i,n)=>{const a=[];return Object.keys(i).forEach(e=>{const t=i[e],o=t[0],l=(0,s.M)(e),u=[];for(const e of t){let t;if(c.includes(l)){t={state:e.s,last_changed:1e3*e.lu,attributes:{}};for(const i of d)i in e.a&&(t.attributes[i]=e.a[i])}else t={state:e.s,last_changed:1e3*(e.lc?e.lc:e.lu),attributes:{}};u.length>1&&g(t,u[u.length-1])&&g(t,u[u.length-2])||u.push(t)}const h=e in n?n[e].attributes:"friendly_name"in o.a?o.a:void 0;a.push({domain:l,name:(0,r.a)(e,h||{}),entity_id:e,states:u})}),{unit:e,device_class:t,identifier:Object.keys(i).join(""),data:a}},_=["counter","input_number","number"],p=e=>_.includes(e),v=e=>"unit_of_measurement"in e||"state_class"in e,P=(e,t)=>null!=e.attributes.device_class&&t.includes(e.attributes.device_class),w=" ",k=(e,t,i,n,s=!1)=>{const a={};i.forEach(e=>{e in t&&(a[e]=t[e])});const r={};Object.entries(a).forEach(([e,t])=>{const i=t.map(e=>({s:null!=e.mean?e.mean.toString():e.state.toString(),lc:e.start/1e3,a:{},lu:e.start/1e3}));r[e]=i});const o=S(e,r,[],e.localize,n,s,!0);return(o?.line||[]).forEach(e=>{e.data.forEach(e=>{e.statistics=e.states,e.states=[]})}),o},S=(e,t,i,n,a,r=!1,o=!1)=>{const c={},l=[],d={};if(new Set([...i,...Object.keys(t)]).forEach(i=>{i in t?d[i]=t[i]:e.states[i]&&(d[i]=[{s:e.states[i].state,a:e.states[i].attributes,lu:new Date(e.states[i].last_updated).getTime()/1e3}])}),!d)return{line:[],timeline:[]};Object.keys(d).forEach(t=>{const i=d[t];if(0===i.length)return;const u=(0,s.M)(t),h=t in e.states?e.states[t]:void 0,m=h||p(u)?void 0:i.find(e=>e.a&&v(e.a));let b;b=j(u,h,m,a,o)?h?.attributes.unit_of_measurement||m?.a.unit_of_measurement||w:{zone:n("ui.dialogs.more_info_control.zone.graph_unit"),climate:e.config.unit_system.temperature,humidifier:"%",water_heater:e.config.unit_system.temperature}[u];const g=O(b,{climate:"temperature",humidifier:"humidity",water_heater:"temperature"}[u]||(h?.attributes||m?.a)?.device_class,r);b?g&&g in c&&t in c[g]?c[g][t].push(...i):g&&(g in c||(c[g]={}),c[g][t]=i):l.push(f(n,e.locale,e.config,e.entities,t,i,h))});return{line:Object.keys(c).map(t=>{const i=t.split("_"),n=i[0],s=i.slice(1).join("_")||void 0;return y(n,s,c[t],e.states)}),timeline:l}},O=(e,t,i)=>i?`${e}_${t||""}`:e,j=(e,t,i,n,s=!1)=>s||p(e)||null!=t&&v(t.attributes)||null!=t&&"sensor"===e&&P(t,n)||null!=i,H=(e,t,i=!0)=>{if(!t)return e;const n={...e,line:[]},s={};for(const t of e.line){const e=O(t.unit,t.device_class,i);e&&(s[e]={historyItem:t})}for(const n of t.line){n.unit===w&&(n.unit=e.line.find(e=>e.identifier===n.identifier)?.unit??w);const t=O(n.unit,n.device_class,i);t&&(t in s?s[t].ltsItem=n:s[t]={ltsItem:n})}for(const{historyItem:e,ltsItem:t}of Object.values(s)){if(!e||!t){n.line.push(e||t);continue}const i={...e,data:[]},s=new Set([...e.data.map(e=>e.entity_id),...t.data.map(e=>e.entity_id)]);for(const n of s){const s=e.data.find(e=>e.entity_id===n),a=t.data.find(e=>e.entity_id===n);if(!s||!a){i.data.push(s||a);continue}const r=s.states[0]?.last_changed||a.statistics[a.statistics.length-1].last_changed+1,o=[];for(const e of a.statistics){if(e.last_changed>=r)break;o.push(e)}i.data.push(0===o.length?s:{...s,statistics:o})}n.line.push(i)}return n};n()}catch(e){n(e)}})},96241:function(e,t,i){i.d(t,{HD:()=>s,jt:()=>o,oO:()=>a,p6:()=>r,u1:()=>l});i(81738),i(29981);var n=i(6219);const s=e=>e.callWS({type:"person/list"}),a=(e,t)=>e.callWS({type:"person/create",...t}),r=(e,t,i)=>e.callWS({type:"person/update",person_id:t,...i}),o=(e,t)=>e.callWS({type:"person/delete",person_id:t}),c={},l=e=>{if(!e.user?.id)return;const t=c[e.user.id];if(t){const i=e.states[t];if(i&&i.attributes.user_id===e.user.id)return i}const i=Object.values(e.states).find(t=>t.attributes.user_id===e.user.id&&"person"===(0,n.N)(t));return i&&(c[e.user.id]=i.entity_id),i}},24349:function(e,t,i){i.a(e,async function(e,n){try{i.d(t,{Do:()=>v,Z6:()=>p,l$:()=>_});i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761);var s=i(58994),a=i(56206),r=(i(56922),i(86366),i(78265)),o=i(17275),c=i(20369),l=i(88352),d=i(20480),u=i(32172),h=i(62987),m=i(72803),b=i(78879),g=e([s,a,r,o,c,l,d,u,h,m]);[s,a,r,o,c,l,d,u,h,m]=g.then?(await g)():g;const f=new Set(["entity","entities","button","entity-button","glance","grid","section","light","sensor","thermostat","weather-forecast","tile","heading"]),y={"alarm-panel":()=>Promise.all([i.e("73614"),i.e("47294")]).then(i.bind(i,81724)),area:()=>i.e("59544").then(i.bind(i,44066)),calendar:()=>Promise.all([i.e("56932"),i.e("2884"),i.e("4172"),i.e("33118"),i.e("2015"),i.e("17508")]).then(i.bind(i,40801)),conditional:()=>i.e("61868").then(i.bind(i,7460)),"empty-state":()=>i.e("47700").then(i.bind(i,35296)),"energy-compare":()=>Promise.all([i.e("88688"),i.e("10868"),i.e("62958"),i.e("39280"),i.e("11702")]).then(i.bind(i,87079)),"energy-carbon-consumed-gauge":()=>Promise.all([i.e("22092"),i.e("88688"),i.e("10868"),i.e("62958"),i.e("39280"),i.e("52157")]).then(i.bind(i,89078)),"energy-date-selection":()=>Promise.all([i.e("73614"),i.e("88688"),i.e("10868"),i.e("62958"),i.e("83510"),i.e("39280"),i.e("46091"),i.e("66367")]).then(i.bind(i,25316)),"energy-devices-graph":()=>Promise.all([i.e("88688"),i.e("10868"),i.e("62958"),i.e("39280"),i.e("68973"),i.e("12697")]).then(i.bind(i,68669)),"energy-devices-detail-graph":()=>Promise.all([i.e("88688"),i.e("10868"),i.e("62958"),i.e("13805"),i.e("39280"),i.e("68973"),i.e("39149")]).then(i.bind(i,99153)),"energy-distribution":()=>Promise.all([i.e("88688"),i.e("10868"),i.e("62958"),i.e("39280"),i.e("42159")]).then(i.bind(i,12532)),"energy-gas-graph":()=>Promise.all([i.e("88688"),i.e("10868"),i.e("62958"),i.e("13805"),i.e("39280"),i.e("68973"),i.e("29634")]).then(i.bind(i,89316)),"energy-water-graph":()=>Promise.all([i.e("88688"),i.e("10868"),i.e("62958"),i.e("13805"),i.e("39280"),i.e("68973"),i.e("79888")]).then(i.bind(i,73369)),"energy-grid-neutrality-gauge":()=>Promise.all([i.e("22092"),i.e("88688"),i.e("10868"),i.e("62958"),i.e("39280"),i.e("16881")]).then(i.bind(i,74314)),"energy-solar-consumed-gauge":()=>Promise.all([i.e("88688"),i.e("10868"),i.e("62958"),i.e("39280"),i.e("97755")]).then(i.bind(i,56849)),"energy-self-sufficiency-gauge":()=>Promise.all([i.e("22092"),i.e("88688"),i.e("10868"),i.e("62958"),i.e("39280"),i.e("90478")]).then(i.bind(i,58623)),"energy-solar-graph":()=>Promise.all([i.e("88688"),i.e("10868"),i.e("62958"),i.e("13805"),i.e("39280"),i.e("68973"),i.e("62391")]).then(i.bind(i,35839)),"energy-sources-table":()=>Promise.all([i.e("88688"),i.e("10868"),i.e("62958"),i.e("66018"),i.e("39280"),i.e("79274")]).then(i.bind(i,49859)),"energy-usage-graph":()=>Promise.all([i.e("88688"),i.e("10868"),i.e("62958"),i.e("13805"),i.e("39280"),i.e("68973"),i.e("12018")]).then(i.bind(i,49639)),"energy-sankey":()=>Promise.all([i.e("88688"),i.e("10868"),i.e("62958"),i.e("97657"),i.e("50239"),i.e("46110"),i.e("39280"),i.e("68973"),i.e("40825")]).then(i.bind(i,8528)),"entity-filter":()=>i.e("11600").then(i.bind(i,94884)),error:()=>Promise.resolve().then(i.bind(i,46772)),gauge:()=>i.e("62298").then(i.bind(i,43309)),"history-graph":()=>Promise.all([i.e("97657"),i.e("37181"),i.e("37192"),i.e("68973"),i.e("90749"),i.e("50892")]).then(i.bind(i,69782)),"horizontal-stack":()=>i.e("69521").then(i.bind(i,45662)),humidifier:()=>i.e("44607").then(i.bind(i,41068)),iframe:()=>i.e("38748").then(i.bind(i,63055)),logbook:()=>Promise.all([i.e("29425"),i.e("88300")]).then(i.bind(i,52202)),map:()=>Promise.all([i.e("12488"),i.e("75556"),i.e("92353")]).then(i.bind(i,70963)),markdown:()=>Promise.all([i.e("43086"),i.e("96911")]).then(i.bind(i,11308)),clock:()=>i.e("6677").then(i.bind(i,13863)),"media-control":()=>Promise.all([i.e("75263"),i.e("84428")]).then(i.bind(i,16)),"picture-elements":()=>Promise.all([i.e("16367"),i.e("75663"),i.e("14525"),i.e("79121")]).then(i.bind(i,64606)),"picture-entity":()=>Promise.all([i.e("16367"),i.e("16145")]).then(i.bind(i,97166)),"picture-glance":()=>Promise.all([i.e("16367"),i.e("69595")]).then(i.bind(i,40362)),picture:()=>i.e("31954").then(i.bind(i,3320)),"plant-status":()=>i.e("6425").then(i.bind(i,19187)),"recovery-mode":()=>Promise.all([i.e("79576"),i.e("70918"),i.e("54206"),i.e("40516")]).then(i.bind(i,26743)),"todo-list":()=>Promise.all([i.e("73614"),i.e("86689"),i.e("43086"),i.e("65811")]).then(i.bind(i,9501)),"shopping-list":()=>Promise.all([i.e("73614"),i.e("86689"),i.e("43086"),i.e("65811"),i.e("48874")]).then(i.bind(i,71858)),starting:()=>i.e("59226").then(i.bind(i,15692)),"statistics-graph":()=>Promise.all([i.e("88688"),i.e("10868"),i.e("62958"),i.e("39280"),i.e("37034")]).then(i.bind(i,75382)),statistic:()=>Promise.all([i.e("88688"),i.e("10868"),i.e("62958"),i.e("39280"),i.e("55286")]).then(i.bind(i,36383)),"vertical-stack":()=>i.e("85086").then(i.bind(i,50334))},_=e=>(0,b.Xm)("card",e,f,y,void 0,void 0),p=e=>(0,b.Tw)("card",e,f,y,void 0,void 0),v=e=>(0,b.ED)(e,"card",f,y);n()}catch(e){n(e)}})},35942:function(e,t,i){i.d(t,{Q:()=>r,t:()=>a});var n=i(78879);const s={picture:()=>i.e("23878").then(i.bind(i,37432)),buttons:()=>Promise.all([i.e("80572"),i.e("43393")]).then(i.bind(i,45818)),graph:()=>i.e("24729").then(i.bind(i,8833))},a=e=>(0,n.Tw)("header-footer",e,void 0,s,void 0,void 0),r=e=>(0,n.ED)(e,"header-footer",void 0,s)}};
//# sourceMappingURL=49636.420cde6416bd0f48.js.map