# -*- coding: utf-8 -*-

"""
twilioapiexplorer

This file was automatically generated by APIMATIC v3.0 (
 https://www.apimatic.io ).
"""

from twilioapiexplorer.api_helper import APIHelper
from twilioapiexplorer.configuration import Server
from twilioapiexplorer.controllers.base_controller import BaseController
from apimatic_core.request_builder import RequestBuilder
from apimatic_core.response_handler import ResponseHandler
from apimatic_core.types.parameter import Parameter
from twilioapiexplorer.http.http_method_enum import HttpMethodEnum
from apimatic_core.authentication.multiple.single_auth import Single
from twilioapiexplorer.models.ok_235 import OK235
from twilioapiexplorer.models.ok_236 import OK236
from twilioapiexplorer.models.created_61 import Created61


class ParticipantsController(BaseController):

    """A Controller to access Endpoints in the twilioapiexplorer API."""
    def __init__(self, config):
        super(ParticipantsController, self).__init__(config)

    def fetch_participant(self,
                          service_sid,
                          session_sid,
                          sid,
                          accept):
        """Does a GET request to /v1/Services/{ServiceSid}/Sessions/{SessionSid}/Participants/{Sid}.

        Fetch a specific Participant.

        Args:
            service_sid (str): (Required) The SID of the parent
                [Service](https://www.twilio.com/docs/proxy/api/service) of
                the resource to fetch.
            session_sid (str): (Required) The SID of the parent
                [Session](https://www.twilio.com/docs/proxy/api/session) of
                the resource to fetch.
            sid (str): (Required) The Twilio-provided string that uniquely
                identifies the Participant resource to fetch.
            accept (str): The request header parameter.

        Returns:
            OK235: Response from the API.

        Raises:
            APIException: When an error occurs while fetching the data from
                the remote API. This exception includes the HTTP Response
                code, an error message, and the HTTP body that was received in
                the request.

        """

        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.SERVER_9)
            .path('/v1/Services/{ServiceSid}/Sessions/{SessionSid}/Participants/{Sid}')
            .http_method(HttpMethodEnum.GET)
            .template_param(Parameter()
                            .key('ServiceSid')
                            .value(service_sid)
                            .should_encode(True))
            .template_param(Parameter()
                            .key('SessionSid')
                            .value(session_sid)
                            .should_encode(True))
            .template_param(Parameter()
                            .key('Sid')
                            .value(sid)
                            .should_encode(True))
            .header_param(Parameter()
                          .key('Accept')
                          .value(accept))
            .auth(Single('basic'))
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(OK235.from_dictionary)
        ).execute()

    def delete_participant(self,
                           service_sid,
                           session_sid,
                           sid):
        """Does a DELETE request to /v1/Services/{ServiceSid}/Sessions/{SessionSid}/Participants/{Sid}.

        Delete a specific Participant. This is a soft-delete. The participant
        remains associated with the session and cannot be re-added.
        Participants are only permanently deleted when the
        [Session](https://www.twilio.com/docs/proxy/api/session) is deleted.

        Args:
            service_sid (str): (Required) The SID of the parent
                [Service](https://www.twilio.com/docs/proxy/api/service) of
                the resource to delete.
            session_sid (str): (Required) The SID of the parent
                [Session](https://www.twilio.com/docs/proxy/api/session) of
                the resource to delete.
            sid (str): (Required) The Twilio-provided string that uniquely
                identifies the Participant resource to delete.

        Returns:
            Any: Response from the API.

        Raises:
            APIException: When an error occurs while fetching the data from
                the remote API. This exception includes the HTTP Response
                code, an error message, and the HTTP body that was received in
                the request.

        """

        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.SERVER_9)
            .path('/v1/Services/{ServiceSid}/Sessions/{SessionSid}/Participants/{Sid}')
            .http_method(HttpMethodEnum.DELETE)
            .template_param(Parameter()
                            .key('ServiceSid')
                            .value(service_sid)
                            .should_encode(True))
            .template_param(Parameter()
                            .key('SessionSid')
                            .value(session_sid)
                            .should_encode(True))
            .template_param(Parameter()
                            .key('Sid')
                            .value(sid)
                            .should_encode(True))
            .header_param(Parameter()
                          .key('accept')
                          .value('application/json'))
            .auth(Single('basic'))
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.dynamic_deserialize)
        ).execute()

    def list_participant(self,
                         page_size,
                         service_sid,
                         session_sid,
                         accept):
        """Does a GET request to /v1/Services/{ServiceSid}/Sessions/{SessionSid}/Participants.

        Retrieve a list of all Participants in a Session.

        Args:
            page_size (int): How many resources to return in each list page.
                The default is 50, and the maximum is 1000.
            service_sid (str): (Required) The SID of the parent
                [Service](https://www.twilio.com/docs/proxy/api/service) of
                the resources to read.
            session_sid (str): (Required) The SID of the parent
                [Session](https://www.twilio.com/docs/proxy/api/session) of
                the resources to read.
            accept (str): The request header parameter.

        Returns:
            OK236: Response from the API.

        Raises:
            APIException: When an error occurs while fetching the data from
                the remote API. This exception includes the HTTP Response
                code, an error message, and the HTTP body that was received in
                the request.

        """

        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.SERVER_9)
            .path('/v1/Services/{ServiceSid}/Sessions/{SessionSid}/Participants')
            .http_method(HttpMethodEnum.GET)
            .query_param(Parameter()
                         .key('PageSize')
                         .value(page_size))
            .template_param(Parameter()
                            .key('ServiceSid')
                            .value(service_sid)
                            .should_encode(True))
            .template_param(Parameter()
                            .key('SessionSid')
                            .value(session_sid)
                            .should_encode(True))
            .header_param(Parameter()
                          .key('Accept')
                          .value(accept))
            .auth(Single('basic'))
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(OK236.from_dictionary)
        ).execute()

    def create_participant(self,
                           service_sid,
                           session_sid,
                           accept,
                           identifier,
                           friendly_name,
                           proxy_identifier,
                           proxy_identifier_sid):
        """Does a POST request to /v1/Services/{ServiceSid}/Sessions/{SessionSid}/Participants.

        Add a new Participant to the Session

        Args:
            service_sid (str): (Required) The SID of the parent
                [Service](https://www.twilio.com/docs/proxy/api/service)
                resource.
            session_sid (str): (Required) The SID of the parent
                [Session](https://www.twilio.com/docs/proxy/api/session)
                resource.
            accept (str): The request header parameter.
            identifier (str): (Required) The phone number of the Participant.
            friendly_name (str): The string that you assigned to describe the
                participant. This value must be 255 characters or fewer.
                **This value should not have PII.**
            proxy_identifier (str): The proxy phone number to use for the
                Participant. If not specified, Proxy will select a number from
                the pool.
            proxy_identifier_sid (str): The SID of the Proxy Identifier to
                assign to the Participant.

        Returns:
            Created61: Response from the API.

        Raises:
            APIException: When an error occurs while fetching the data from
                the remote API. This exception includes the HTTP Response
                code, an error message, and the HTTP body that was received in
                the request.

        """

        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.SERVER_9)
            .path('/v1/Services/{ServiceSid}/Sessions/{SessionSid}/Participants')
            .http_method(HttpMethodEnum.POST)
            .template_param(Parameter()
                            .key('ServiceSid')
                            .value(service_sid)
                            .should_encode(True))
            .template_param(Parameter()
                            .key('SessionSid')
                            .value(session_sid)
                            .should_encode(True))
            .header_param(Parameter()
                          .key('Accept')
                          .value(accept))
            .form_param(Parameter()
                        .key('Identifier')
                        .value(identifier))
            .form_param(Parameter()
                        .key('FriendlyName')
                        .value(friendly_name))
            .form_param(Parameter()
                        .key('ProxyIdentifier')
                        .value(proxy_identifier))
            .form_param(Parameter()
                        .key('ProxyIdentifierSid')
                        .value(proxy_identifier_sid))
            .header_param(Parameter()
                          .key('content-type')
                          .value('application/x-www-form-urlencoded'))
            .auth(Single('basic'))
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(Created61.from_dictionary)
        ).execute()
