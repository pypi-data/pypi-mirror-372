# -*- coding: utf-8 -*-

"""
twilioapiexplorer

This file was automatically generated by APIMATIC v3.0 (
 https://www.apimatic.io ).
"""

from twilioapiexplorer.api_helper import APIHelper
from twilioapiexplorer.configuration import Server
from twilioapiexplorer.controllers.base_controller import BaseController
from apimatic_core.request_builder import RequestBuilder
from apimatic_core.response_handler import ResponseHandler
from apimatic_core.types.parameter import Parameter
from twilioapiexplorer.http.http_method_enum import HttpMethodEnum
from apimatic_core.authentication.multiple.single_auth import Single
from twilioapiexplorer.models.created_39 import Created39


class NotifyController(BaseController):

    """A Controller to access Endpoints in the twilioapiexplorer API."""
    def __init__(self, config):
        super(NotifyController, self).__init__(config)

    def create_notification(self,
                            accept,
                            body,
                            priority,
                            ttl,
                            title,
                            sound,
                            action,
                            segment,
                            to_binding,
                            delivery_callback_url,
                            identity,
                            tag):
        """Does a POST request to /Notifications.

        Args:
            accept (str): The request header parameter.
            body (str): The notification text. For FCM and GCM, translates to
                `data.twi_body`. For APNS, translates to `aps.alert.body`. For
                SMS, translates to `body`. SMS requires either this `body`
                value, or `media_urls` attribute defined in the `sms`
                parameter of the notification.
            priority (str): The priority of the notification. Can be: `low` or
                `high` and the default is `high`. A value of `low` optimizes
                the client app's battery consumption; however, notifications
                may be delivered with unspecified delay. For FCM and GCM,
                `low` priority is the same as `Normal` priority. For APNS
                `low` priority is the same as `5`. A value of `high` sends the
                notification immediately, and can wake up a sleeping device.
                For FCM and GCM, `high` is the same as `High` priority. For
                APNS, `high` is a priority `10`. SMS does not support this
                property.
            ttl (int): How long, in seconds, the notification is valid. Can be
                an integer between 0 and 2,419,200, which is 4 weeks, the
                default and the maximum supported time to live (TTL). Delivery
                should be attempted if the device is offline until the TTL
                elapses. Zero means that the notification delivery is
                attempted immediately, only once, and is not stored for future
                delivery. SMS does not support this property.
            title (str): The notification title. For FCM and GCM, this
                translates to the `data.twi_title` value. For APNS, this
                translates to the `aps.alert.title` value. SMS does not
                support this property. This field is not visible on iOS phones
                and tablets but appears on Apple Watch and Android devices.
            sound (str): The name of the sound to be played for the
                notification. For FCM and GCM, this Translates to
                `data.twi_sound`.  For APNS, this translates to `aps.sound`. 
                SMS does not support this property.
            action (str): The actions to display for the notification. For
                APNS, translates to the `aps.category` value. For GCM,
                translates to the `data.twi_action` value. For SMS, this
                parameter is not supported and is omitted from deliveries to
                those channels.
            segment (str): The Segment resource is deprecated. Use the `tag`
                parameter, instead.
            to_binding (str): The destination address specified as a JSON
                string.  Multiple `to_binding` parameters can be included but
                the total size of the request entity should not exceed 1MB.
                This is typically sufficient for 10,000 phone numbers.
            delivery_callback_url (str): URL to send webhooks.
            identity (str): The `identity` value that uniquely identifies the
                new resource's
                [User](https://www.twilio.com/docs/chat/rest/user-resource)
                within the
                [Service](https://www.twilio.com/docs/notify/api/service-resour
                ce). Delivery will be attempted only to Bindings with an
                Identity in this list. No more than 20 items are allowed in
                this list.
            tag (str): A tag that selects the Bindings to notify. Repeat this
                parameter to specify more than one tag, up to a total of 5
                tags. The implicit tag `all` is available to notify all
                Bindings in a Service instance. Similarly, the implicit tags
                `apn`, `fcm`, `gcm`, `sms` and `facebook-messenger` are
                available to notify all Bindings in a specific channel.

        Returns:
            Created39: Response from the API.

        Raises:
            APIException: When an error occurs while fetching the data from
                the remote API. This exception includes the HTTP Response
                code, an error message, and the HTTP body that was received in
                the request.

        """

        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.SERVER_12)
            .path('/Notifications')
            .http_method(HttpMethodEnum.POST)
            .header_param(Parameter()
                          .key('Accept')
                          .value(accept))
            .form_param(Parameter()
                        .key('Body')
                        .value(body))
            .form_param(Parameter()
                        .key('Priority')
                        .value(priority))
            .form_param(Parameter()
                        .key('Ttl')
                        .value(ttl))
            .form_param(Parameter()
                        .key('Title')
                        .value(title))
            .form_param(Parameter()
                        .key('Sound')
                        .value(sound))
            .form_param(Parameter()
                        .key('Action')
                        .value(action))
            .form_param(Parameter()
                        .key('Segment')
                        .value(segment))
            .form_param(Parameter()
                        .key('ToBinding')
                        .value(to_binding))
            .form_param(Parameter()
                        .key('DeliveryCallbackUrl')
                        .value(delivery_callback_url))
            .form_param(Parameter()
                        .key('Identity')
                        .value(identity))
            .form_param(Parameter()
                        .key('Tag')
                        .value(tag))
            .header_param(Parameter()
                          .key('content-type')
                          .value('application/x-www-form-urlencoded'))
            .auth(Single('basic'))
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(Created39.from_dictionary)
        ).execute()
