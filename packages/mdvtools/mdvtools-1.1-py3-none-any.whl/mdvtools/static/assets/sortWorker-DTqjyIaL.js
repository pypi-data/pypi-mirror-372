(function(){"use strict";const f={int32:{arr:Int32Array,type:"number"},double:{arr:Float32Array,type:"number"},integer:{arr:Int32Array,type:"number"},text16:{arr:Uint16Array,type:"text"},text:{arr:Uint8Array,type:"text"},unique:{arr:Uint8Array,type:"unique"},multitext:{arr:Uint8Array,type:"multitext"}};onmessage=n=>{const{orderBuffer:c,columns:u}=n.data,r=new Uint32Array(c),s=u.map(t=>{const e=f[t.datatype],o=new e.arr(t.buffer);let a=null;return e.type==="text"?a=y({data:o,desc:t.desc,values:t.values}):e.type==="unique"?a=d({data:o,desc:t.desc,size:t.stringLength}):e.type==="multitext"?a=g({data:o,desc:t.desc,size:t.stringLength}):a=p({data:o,desc:t.desc}),a});r.sort((t,e)=>{for(const o of s){const a=o(t,e);if(a!==0)return a}return 0}),postMessage("done")};function p({data:n,desc:c}){const u=c?-1:1;return(r,s)=>{let t=n[r],e=n[s];return t=Number.isNaN(t)?Number.MAX_VALUE:t,e=Number.isNaN(e)?Number.MAX_VALUE:e,(t>e?1:t<e?-1:0)*u}}function y({data:n,values:c,desc:u}){const r=l(c,u);return(s,t)=>r[n[s]]-r[n[t]]}function d({data:n,desc:c,size:u}){const r={},s=new TextDecoder,t=c?-1:1;for(let e=0;e<n.length;e++){const o=n[e];r[o]=s.decode(col.slice(o*u,o*u+u))}return(e,o)=>r[e].localeCompare(r[o])*t}function g({data:n,desc:c,values:u,size:r}){const s=l(u,c);return s[65536]=65356,(t,e)=>{const o=n.slice(t*r,t*r+r),a=n.slice(e*r,e*r+r);for(let i=0;i<r;i++){const m=s[o[i]]-s[a[i]];if(m!==0)return m;if(o[i]===65536&&a[i]===65536)return 0}return 0}}function l(n,c){const u=c?-1:1,r=n.map((t,e)=>[t,e]).sort((t,e)=>t[0].localeCompare(e[0])*u),s={};for(let t=0;t<r.length;t++)s[r[t][1]]=t;return s}})();
//# sourceMappingURL=sortWorker-DTqjyIaL.js.map
