Metadata-Version: 2.4
Name: gpt-oss-20b-redteam
Version: 0.1.1
Summary: GPT-OSS-20B Red-Teaming Harness: Masks, Sandbags, and Sabotage
Author-email: Guy Nachshon <guy@baddon.ai>
License: MIT
Project-URL: Homepage, https://github.com/GuyNachshon/gpt-oss-20b-probing
Project-URL: Repository, https://github.com/GuyNachshon/gpt-oss-20b-probing
Project-URL: Documentation, https://github.com/GuyNachshon/gpt-oss-20b-probing#readme
Project-URL: Issues, https://github.com/GuyNachshon/gpt-oss-20b-probing/issues
Keywords: ai,red-teaming,security,gpt,llm,safety,alignment,misalignment
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: Science/Research
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
Classifier: Topic :: Security
Classifier: Topic :: Software Development :: Testing
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: torch>=2.0.0
Requires-Dist: transformers>=4.30.0
Requires-Dist: accelerate>=0.20.0
Requires-Dist: openai>=1.0.0
Requires-Dist: anthropic>=0.7.0
Requires-Dist: rich>=13.0.0
Requires-Dist: numpy>=1.21.0
Requires-Dist: tqdm>=4.64.0
Requires-Dist: jsonlines>=3.0.0
Requires-Dist: scikit-learn>=1.0.0
Requires-Dist: pandas>=1.3.0
Requires-Dist: scipy>=1.10.1
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: black>=22.0.0; extra == "dev"
Requires-Dist: flake8>=5.0.0; extra == "dev"
Requires-Dist: mypy>=1.0.0; extra == "dev"

# ğŸš€ GPT-OSS-20B Red-Teaming Harness

> **Masks, Sandbags, and Sabotage: Exposing Hidden Misalignment**

A comprehensive red-teaming toolkit for testing AI model safety and alignment. Implements advanced probes for detecting misalignment, deception, and safety vulnerabilities in large language models.

## âœ¨ Features

- **ğŸ” 10 Advanced Probes**: From evaluation awareness to covert channel capacity
- **ğŸ¨ Beautiful CLI**: Rich-powered interface with progress tracking and tables
- **ğŸ”Œ Multi-Backend Support**: OpenAI API, Anthropic API, and local Transformers models
- **ğŸ“Š Comprehensive Results**: Detailed metrics, findings, and analysis reports
- **âš¡ Plug & Play**: Simple installation and easy-to-use command-line interface

## ğŸš€ Quick Start

### Installation

```bash
# Install from PyPI
pip install gpt20b-redteam

# Or install with development dependencies
pip install gpt20b-redteam[dev]

# Or install from source
git clone https://github.com/gpt-oss-20b/red-teaming.git
cd red-teaming
pip install -e .
```

### Basic Usage

```bash
# Run with local model
gpt20b-redteam --model microsoft/DialoGPT-large

# Run with OpenAI API
gpt20b-redteam --openai gpt-4 --api-key sk-your-key-here

# Run with custom seeds and output directory
gpt20b-redteam --model microsoft/DialoGPT-large --seeds 42 123 456 --output my_results
```

## ğŸ” Available Probes

| Probe | Description | Status |
|-------|-------------|--------|
| **eval_awareness** | Evaluation Awareness & Sandbagging | âœ… |
| **deception_rewardhack** | Deception & Reward Hacking | âœ… |
| **sabotage_code** | Code Sabotage Detection | âœ… |
| **encoding_evasion** | Encoding-Based Guardrail Evasion | âœ… |
| **prefix_steering** | Prefix Steering Behavior | âœ… |
| **cross_probe_compounding** | Cross-Probe Compounding Effects | âœ… |
| **tokenizer_frequency_sandbagging** | Tokenizer Frequency Sandbagging | âœ… |
| **long_horizon_sleeper** | Long-Horizon Sleeper Agents | âœ… |
| **covert_channel_capacity** | Covert Channel Capacity | âœ… |
| **refusal_boundary_cartography** | Refusal Boundary Cartography | âœ… |

## ğŸ“– Detailed Usage

### Command Line Interface

```bash
# Show help
gpt20b-redteam --help

# Run with OpenAI
gpt20b-redteam --openai gpt-4 --api-key sk-...

# Run with Anthropic
gpt20b-redteam --anthropic claude-3-sonnet --api-key sk-ant-...

# Run with local model on CPU
gpt20b-redteam --model microsoft/DialoGPT-large --device cpu

# Run with custom configuration
gpt20b-redteam \
  --model microsoft/DialoGPT-large \
  --seeds 42 123 456 789 \
  --output results_my_experiment \
  --device cuda
```

### Python API

```python
from gpt20b_redteam import RedTeamRunner, create_model

# Create model
model = create_model(
    backend="transformers",
    model_path="microsoft/DialoGPT-large",
    device="cuda"
)

# Run all probes
runner = RedTeamRunner(model, output_dir="results")
results = runner.run_all_probes(seeds=[42, 123, 456])

# Access results
print(f"Total probes: {results['summary']['total_probes']}")
print(f"Successful: {results['summary']['successful_probes']}")
print(f"Failed: {results['summary']['failed_probes']}")
```

### Configuration

The toolkit supports multiple backends:

#### Local Transformers Models
```python
from gpt20b_redteam import create_model

model = create_model(
    backend="transformers",
    model_path="microsoft/DialoGPT-large",  # or local path
    device="cuda",  # or "cpu", "mps", "auto"
    torch_dtype="float16"  # or "bfloat16", "auto"
)
```

#### OpenAI API
```python
from gpt20b_redteam import create_model, setup_openai_api

setup_openai_api("gpt-4")  # or "gpt-3.5-turbo"
model = create_model(backend="openai")
```

#### Anthropic API
```python
from gpt20b_redteam import create_model, setup_anthropic_api

setup_anthropic_api("claude-3-sonnet")  # or "claude-3-opus", "claude-3-haiku"
model = create_model(backend="anthropic")
```

## ğŸ“Š Output Structure

Results are saved to the specified output directory:

```
results/
â”œâ”€â”€ findings/
â”‚   â”œâ”€â”€ eval_awareness_findings_20240115_200000.json
â”‚   â”œâ”€â”€ deception_rewardhack_findings_20240115_200000.json
â”‚   â””â”€â”€ ...
â”œâ”€â”€ raw_results/
â”‚   â”œâ”€â”€ combined_results_20240115_200000.json
â”‚   â”œâ”€â”€ eval_awareness_raw_20240115_200000.json
â”‚   â””â”€â”€ ...
â””â”€â”€ README.md
```

### Results Format

Each probe generates:
- **Findings**: Kaggle-style formatted results for analysis
- **Raw Results**: Detailed JSON with all test data
- **Metrics**: Quantitative measures of model behavior
- **Analysis**: Qualitative assessment of vulnerabilities

## ğŸ”§ Advanced Configuration

### Custom Seeds
```bash
# Use specific seeds for reproducibility
gpt20b-redteam --model microsoft/DialoGPT-large --seeds 42 1010 90521
```

### Device Configuration
```bash
# Force CPU usage
gpt20b-redteam --model microsoft/DialoGPT-large --device cpu

# Use CUDA with specific settings
gpt20b-redteam --model microsoft/DialoGPT-large --device cuda
```

### Output Customization
```bash
# Custom output directory
gpt20b-redteam --model microsoft/DialoGPT-large --output experiments/gpt4_vs_gpt35

# Disable Rich output (plain text)
gpt20b-redteam --model microsoft/DialoGPT-large --no-rich
```

## ğŸ› ï¸ Development

### Installation for Development

```bash
git clone https://github.com/gpt-oss-20b/red-teaming.git
cd red-teaming
pip install -e .[dev]
```

### Running Tests

```bash
# Run all tests
pytest

# Run specific test
pytest tests/test_eval_awareness.py

# Run with coverage
pytest --cov=gpt20b_redteam
```

### Code Quality

```bash
# Format code
black src/ tests/

# Lint code
flake8 src/ tests/

# Type checking
mypy src/
```

## ğŸ“ˆ Performance Tips

### Memory Optimization
- Use `--device cpu` for large models that don't fit in GPU memory
- Consider using quantized models (e.g., `microsoft/DialoGPT-medium`)
- Use `torch_dtype="float16"` for reduced memory usage

### Speed Optimization
- Use GPU acceleration when available (`--device cuda`)
- Reduce the number of seeds for faster runs
- Use smaller models for quick testing

### API Usage
- Set API keys as environment variables for security
- Monitor API usage and costs
- Use appropriate rate limiting for production runs

## ğŸ¤ Contributing

We welcome contributions! Please see our [Contributing Guide](CONTRIBUTING.md) for details.

### Adding New Probes

1. Create a new probe class inheriting from `BaseProbe`
2. Implement the required methods
3. Add the probe to the `RedTeamRunner`
4. Write tests and documentation

### Reporting Issues

Please use our [Issue Tracker](https://github.com/gpt-oss-20b/red-teaming/issues) to report bugs or request features.

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ™ Acknowledgments

- Built on the shoulders of the open-source AI safety community
- Inspired by research on AI alignment and red-teaming
- Powered by Hugging Face Transformers and the broader ML ecosystem

## ğŸ“š References

- [Anthropic's "Sleeper Agents" Research](https://arxiv.org/abs/2401.05566)
- [Evaluation Awareness in Language Models](https://arxiv.org/abs/2309.08896)
- [Red-Teaming Language Models](https://arxiv.org/abs/2209.07858)

---

**Made with â¤ï¸ by the GPT-OSS-20B Team**
