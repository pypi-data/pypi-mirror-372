# TOML file for STMLab.
#  
# @note: TOML file            
# Created on 20.03.2024    
# 
# @version:  1.0    
# ----------------------------------------------------------------------------------------------
# @requires:
#        - 
# 
# @change: 
#        -    
#    
# @author: garb_ma                                                     [DLR-SY,STM Braunschweig]
# ----------------------------------------------------------------------------------------------
[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"

[tool.poetry]
name = "stmlab"
version = "0.14.0"
description = "JupyterLab-based launch environment for software projects developed by the Department of Structural Mechanics at the German Aerospace Center"
authors = ["Garbade, Marc <marc.garbade@dlr.de>"]
license = "MIT"
readme = "README.md"
packages = [{include="stmlab", from="src"}]
repository = "https://gitlab.com/dlr-sy/stmlab"
documentation = "https://gitlab.com/dlr-sy/stmlab/-/blob/main/README.md"
keywords = ["stmlab","jupyter","manager"]
classifiers = [
    "Development Status :: 3 - Alpha",
    "Topic :: Scientific/Engineering",
    "Programming Language :: Python :: 2",
    "Programming Language :: Python :: 3",
    "License :: OSI Approved :: MIT License",
    "Operating System :: OS Independent"
]

[tool.poetry.urls]
Changelog = "https://gitlab.com/dlr-sy/stmlab/-/blob/master/CHANGELOG.md"

[[tool.poetry.source]]
name = "PyPI"
priority = "primary"

[[tool.poetry.source]]
name = "dlr-sy"
url = "https://gitlab.dlr.de/api/v4/groups/541/-/packages/pypi/simple"
priority = "supplemental"

[tool.poetry.dependencies]
python = "~2.7 || ^3.5"
typer = [{version = ">=0.12", python = "^3.7"}]
pyx-core = [{version = ">=1.28", python = "~2.7 || ^3.5,<3.7"},
            {version = "*", python = "^3.7"}]
pyc-core = [{version = ">=1.14", python = "~2.7 || ^3.5,<3.7", optional = true},
            {version = "*", python = "^3.7", optional = true}]

# All optional dependencies
beos = [{version = ">=1.3", python = "~2.7 || ^3.5", optional = true}]
boxbeam = [{version = "1.3", python = "~2.7 || ^3.5", optional = true}]
damapper = [{version = ">=1.7", python = "^3.6", optional = true}]
displam = [{version = ">=1.3", python = "~2.7 || ^3.5", optional = true}]
micofam = [{version = ">=1.1", python = "~2.7 || ^3.5", optional = true}]
mcodac = [{version = ">=1.2", python = "~2.7 || ^3.5"}]
vampire = [{version = ">=0.2.5", python = "^3.7", source = "dlr-sy", optional = true}]

pyx-client = [{version = ">=1.28", python = "^3.7", optional = true}]
pyc-client = [{version = ">=1.13", python = "^3.7", optional = true}]
pyx-webservice = [{version = ">=1.28", python = "^3.7", optional = true}]
pyc-webservice = [{version = ">=1.14", python = "^3.7", optional = true}]

# Additional dependencies for development
[tool.poetry.group.dev.dependencies]
pyx-poetry = [{version = ">=1.28", python="^3.7"}]
pyx-core = [{git = "https://gitlab.dlr.de/fa_sw/stmlab/PyXMake.git", python = "^3.7"}]
pyc-core = [{git = "https://gitlab.dlr.de/fa_sw/stmlab/PyCODAC.git", python = "^3.7"}]

[tool.poetry.group.lock.dependencies]
patme = [{version = ">=0.4", python = "^3.10"}]
setuptools = [{version = "^39.0", python = "~2.7"},
              {version = "^49.0", python = "~3.5"},
              {version = "^58.0", python = "~3.6"},
              {version = "^64.0", python = "~3.7"},
              {version = "<70.0", python = "~3.8"},
              {version = ">=70.0", python = "^3.9"}]
sympy = [{version = "^1.10", python = "~3.7"},
         {version = "^1.11", python = "^3.8"}]
tankoh2 = [{version = ">=2.7", python = "^3.10"}]
typing-extensions = [{version = "^4.7", python = "~3.7"},
                     {version = ">=4.8", python = "^3.8"}]
vtk = [{version = "^9,<9.4", python = "^3.5,<3.8"},
       {version = "*", python = "^3.8"}]

[tool.poetry.extras]
all = ["beos","boxbeam","displam","pyc-core","pyc-webservice","pyx-webservice"]
server = ["pyc-webservice","pyx-webservice"]
client = ["pyc-client","pyx-client"]
codac = ["pyc-core"]
displam = ["displam"]
beos = ["beos"]
boxbeam = ["boxbeam"]
damapper = ["damapper"]
micofam = ["micofam"]
mcodac = ["mcodac"]
mro = ["damapper","pyc-core"]
vampire = ["vampire"]

[tool.poetry.scripts]
stmlab = "stmlab.command:main"

[tool.pyxmake.archive]
name = "stmlab-main.tar.gz"
source = "src/stmlab"

[tool.pyxmake.pyinstaller]
name = "stmlab"
icon = "src/stmlab/assets/favicon.ico"
source = "src/stmlab"
file = "__exe__.py"
output = "bin"
mode = "onedir"
verbosity = "2"

[tool.pyxmake.sphinx]
name = "'Structural Mechanics Lab'"
icon = "doc/stmlab/pics/stm_lab_logo_bubbles.png"
source = "doc/stmlab/source"
output = "doc/stmlab"
file = "stmlab"