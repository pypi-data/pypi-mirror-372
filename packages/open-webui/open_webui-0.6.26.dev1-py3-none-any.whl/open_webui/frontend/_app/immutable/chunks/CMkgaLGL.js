import{e as se,l as Me,d as Qe,c as et,u as tt}from"./DTJLE-DR.js";import{S as ie,i as fe,s as ce,C as R,D as J,E as K,q as B,r as A,F as q,T as He,w as rt,N as Fe,O as Pe,a as E,d as f,f as u,g as j,h as m,n as ze,H as ue,I as de,K as me,k as re,v as Se,e as y,t as M,l as N,c as $,b as F,p as x,G as ee,j as z,y as Ee,u as Ie,x as st,z as at,A as nt,B as lt,L as Le,J as ot,P as it}from"./D0xw479y.js";import"./IHki7fMi.js";import{a as ft,b as ct,u as We,e as Re,f as ut,h as ye,s as dt,i as mt}from"./ojDq6ed8.js";import{T as ht}from"./DRcYm7nO.js";import{t as be}from"./Q41NdQJt.js";import{f as pt}from"./DoRuB-ZG.js";import{M as Ye}from"./C1SOao-N.js";import{L as _t}from"./xfd-wZU1.js";import{X as Xe}from"./CbJTeXHO.js";import"./CmN8H652.js";import{b as gt,c as $e}from"./BdIPdHTg.js";import{f as wt}from"./CBc5jlPY.js";import{D as bt}from"./Ciq8jNXV.js";import{G as vt}from"./D5TBgrN1.js";import{P as kt}from"./CdlxLygg.js";import{T as yt}from"./DMhPNgOe.js";import{A as $t}from"./DtOxqtnW.js";import{S as Et}from"./CAm-jMer.js";import"./Bm6uDiXi.js";import{T as It}from"./Csc4iE30.js";import{K as St}from"./D0ONiz_e.js";const kr=async(n,e)=>{let r=null;const t=await fetch(`${se}/folders/`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${n}`},body:JSON.stringify(e)}).then(async s=>{if(!s.ok)throw await s.json();return s.json()}).catch(s=>(r=s.detail,null));if(r)throw r;return t},yr=async(n="")=>{let e=null;const r=await fetch(`${se}/folders/`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${n}`}}).then(async t=>{if(!t.ok)throw await t.json();return t.json()}).then(t=>t).catch(t=>(e=t.detail,console.error(t),null));if(e)throw e;return r},$r=async(n,e,r)=>{let t=null;const s=await fetch(`${se}/folders/${e}/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${n}`},body:JSON.stringify(r)}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(t=o.detail,console.error(o),null));if(t)throw t;return s},Er=async(n,e,r)=>{let t=null;const s=await fetch(`${se}/folders/${e}/update/expanded`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${n}`},body:JSON.stringify({is_expanded:r})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(t=o.detail,console.error(o),null));if(t)throw t;return s},Ir=async(n,e,r)=>{let t=null;const s=await fetch(`${se}/folders/${e}/update/parent`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${n}`},body:JSON.stringify({parent_id:r})}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).then(o=>o).catch(o=>(t=o.detail,console.error(o),null));if(t)throw t;return s},Sr=async(n,e)=>{let r=null;const t=await fetch(`${se}/folders/${e}`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${n}`}}).then(async s=>{if(!s.ok)throw await s.json();return s.json()}).then(s=>s).catch(s=>(r=s.detail,console.error(s),null));if(r)throw r;return t};function Tt(n){let e,r;return e=new ht({props:{tags:n[0]}}),e.$on("delete",n[4]),e.$on("add",n[5]),{c(){R(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,s){K(e,t,s),r=!0},p(t,[s]){const o={};s&1&&(o.tags=t[0]),e.$set(o)},i(t){r||(B(e.$$.fragment,t),r=!0)},o(t){A(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}function Dt(n,e,r){const t=He();let{chatId:s=""}=e,o=[];const l=async()=>await ft(localStorage.token,s).catch(async c=>[]),a=async c=>{await ct(localStorage.token,s,c).catch(async p=>(be.error(`${p}`),null))&&(r(0,o=await l()),await We(localStorage.token,s,{tags:o}),await Me.set(await Re(localStorage.token)),t("add",{name:c}))},i=async c=>{await ut(localStorage.token,s,c),r(0,o=await l()),await We(localStorage.token,s,{tags:o}),await Me.set(await Re(localStorage.token)),t("delete",{name:c})};rt(async()=>{s&&r(0,o=await l())});const g=c=>{i(c.detail)},_=c=>{a(c.detail)};return n.$$set=c=>{"chatId"in c&&r(3,s=c.chatId)},[o,a,i,s,g,_]}class Tr extends ie{constructor(e){super(),fe(this,e,Dt,Tt,ce,{chatId:3})}}function Ct(n){let e,r;return{c(){e=Fe("svg"),r=Fe("path"),this.h()},l(t){e=Pe(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var s=E(e);r=Pe(s,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),E(r).forEach(f),s.forEach(f),this.h()},h(){u(r,"stroke-linecap","round"),u(r,"stroke-linejoin","round"),u(r,"d","M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",n[1]),u(e,"stroke","currentColor"),u(e,"class",n[0])},m(t,s){j(t,e,s),m(e,r)},p(t,[s]){s&2&&u(e,"stroke-width",t[1]),s&1&&u(e,"class",t[0])},i:ze,o:ze,d(t){t&&f(e)}}}function jt(n,e,r){let{className:t="size-4"}=e,{strokeWidth:s="1.5"}=e;return n.$$set=o=>{"className"in o&&r(0,t=o.className),"strokeWidth"in o&&r(1,s=o.strokeWidth)},[t,s]}class Dr extends ie{constructor(e){super(),fe(this,e,jt,Ct,ce,{className:0,strokeWidth:1})}}function Je(n){var I;let e,r,t,s,o,l,a,i,g,_,c,h,p;function w(d,k){return d[2].share_id?Vt:Bt}let T=w(n),D=T(n),v=((I=n[4])==null?void 0:I.features.enable_community_sharing)&&Ke(n);g=new _t({});function S(d,k){return d[2].share_id?Nt:At}let b=S(n),V=b(n);return{c(){e=y("div"),r=y("div"),D.c(),t=N(),s=y("div"),o=y("div"),l=y("div"),v&&v.c(),a=N(),i=y("button"),R(g.$$.fragment),_=N(),V.c(),this.h()},l(d){e=$(d,"DIV",{class:!0});var k=E(e);r=$(k,"DIV",{class:!0});var L=E(r);D.l(L),L.forEach(f),t=x(k),s=$(k,"DIV",{class:!0});var X=E(s);o=$(X,"DIV",{class:!0});var te=E(o);l=$(te,"DIV",{class:!0});var G=E(l);v&&v.l(G),a=x(G),i=$(G,"BUTTON",{class:!0,type:!0,id:!0});var W=E(i);J(g.$$.fragment,W),_=x(W),V.l(W),W.forEach(f),G.forEach(f),te.forEach(f),X.forEach(f),k.forEach(f),this.h()},h(){u(r,"class","text-sm dark:text-gray-300 mb-1"),u(i,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"),u(i,"type","button"),u(i,"id","copy-and-share-chat-button"),u(l,"class","flex gap-1"),u(o,"class","flex flex-col items-end space-x-1 mt-3"),u(s,"class","flex justify-end"),u(e,"class","px-5 pt-4 pb-5 w-full flex flex-col justify-center")},m(d,k){j(d,e,k),m(e,r),D.m(r,null),m(e,t),m(e,s),m(s,o),m(o,l),v&&v.m(l,null),m(l,a),m(l,i),K(g,i,null),m(i,_),V.m(i,null),c=!0,h||(p=ee(i,"click",n[11]),h=!0)},p(d,k){var L;T===(T=w(d))&&D?D.p(d,k):(D.d(1),D=T(d),D&&(D.c(),D.m(r,null))),(L=d[4])!=null&&L.features.enable_community_sharing?v?v.p(d,k):(v=Ke(d),v.c(),v.m(l,a)):v&&(v.d(1),v=null),b===(b=S(d))&&V?V.p(d,k):(V.d(1),V=b(d),V&&(V.c(),V.m(i,null)))},i(d){c||(B(g.$$.fragment,d),c=!0)},o(d){A(g.$$.fragment,d),c=!1},d(d){d&&f(e),D.d(),v&&v.d(),q(g),V.d(),h=!1,p()}}}function Bt(n){let e=n[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"",r;return{c(){r=M(e)},l(t){r=F(t,e)},m(t,s){j(t,r,s)},p(t,s){s&8&&e!==(e=t[3].t("Messages you send after creating your link won't be shared. Users with the URL will be able to view the shared chat.")+"")&&z(r,e)},d(t){t&&f(r)}}}function Vt(n){let e,r=n[3].t("You have shared this chat")+"",t,s,o,l=n[3].t("before")+"",a,i,g,_,c=n[3].t("Click here to")+"",h,p,w,T=n[3].t("delete this link")+"",D,v,S=n[3].t("and create a new shared link.")+"",b,V,I;return{c(){e=y("a"),t=M(r),s=N(),o=y("span"),a=M(l),i=M("."),_=N(),h=M(c),p=N(),w=y("button"),D=M(T),v=N(),b=M(S),this.h()},l(d){e=$(d,"A",{href:!0,target:!0});var k=E(e);t=F(k,r),s=x(k),o=$(k,"SPAN",{class:!0});var L=E(o);a=F(L,l),L.forEach(f),i=F(k,"."),k.forEach(f),_=x(d),h=F(d,c),p=x(d),w=$(d,"BUTTON",{class:!0});var X=E(w);D=F(X,T),X.forEach(f),v=x(d),b=F(d,S),this.h()},h(){u(o,"class","underline"),u(e,"href",g="/s/"+n[2].share_id),u(e,"target","_blank"),u(w,"class","underline")},m(d,k){j(d,e,k),m(e,t),m(e,s),m(e,o),m(o,a),m(e,i),j(d,_,k),j(d,h,k),j(d,p,k),j(d,w,k),m(w,D),j(d,v,k),j(d,b,k),V||(I=ee(w,"click",n[9]),V=!0)},p(d,k){k&8&&r!==(r=d[3].t("You have shared this chat")+"")&&z(t,r),k&8&&l!==(l=d[3].t("before")+"")&&z(a,l),k&4&&g!==(g="/s/"+d[2].share_id)&&u(e,"href",g),k&8&&c!==(c=d[3].t("Click here to")+"")&&z(h,c),k&8&&T!==(T=d[3].t("delete this link")+"")&&z(D,T),k&8&&S!==(S=d[3].t("and create a new shared link.")+"")&&z(b,S)},d(d){d&&(f(e),f(_),f(h),f(p),f(w),f(v),f(b)),V=!1,I()}}}function Ke(n){let e,r=n[3].t("Share to Open WebUI Community")+"",t,s,o;return{c(){e=y("button"),t=M(r),this.h()},l(l){e=$(l,"BUTTON",{class:!0,type:!0});var a=E(e);t=F(a,r),a.forEach(f),this.h()},h(){u(e,"class","self-center flex items-center gap-1 px-3.5 py-2 text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full"),u(e,"type","button")},m(l,a){j(l,e,a),m(e,t),s||(o=ee(e,"click",n[10]),s=!0)},p(l,a){a&8&&r!==(r=l[3].t("Share to Open WebUI Community")+"")&&z(t,r)},d(l){l&&f(e),s=!1,o()}}}function At(n){let e=n[3].t("Copy Link")+"",r;return{c(){r=M(e)},l(t){r=F(t,e)},m(t,s){j(t,r,s)},p(t,s){s&8&&e!==(e=t[3].t("Copy Link")+"")&&z(r,e)},d(t){t&&f(r)}}}function Nt(n){let e=n[3].t("Update and Copy Link")+"",r;return{c(){r=M(e)},l(t){r=F(t,e)},m(t,s){j(t,r,s)},p(t,s){s&8&&e!==(e=t[3].t("Update and Copy Link")+"")&&z(r,e)},d(t){t&&f(r)}}}function xt(n){let e,r,t,s=n[3].t("Share Chat")+"",o,l,a,i,g,_,c,h;i=new Xe({props:{className:"size-5"}});let p=n[2]&&Je(n);return{c(){e=y("div"),r=y("div"),t=y("div"),o=M(s),l=N(),a=y("button"),R(i.$$.fragment),g=N(),p&&p.c(),this.h()},l(w){e=$(w,"DIV",{});var T=E(e);r=$(T,"DIV",{class:!0});var D=E(r);t=$(D,"DIV",{class:!0});var v=E(t);o=F(v,s),v.forEach(f),l=x(D),a=$(D,"BUTTON",{class:!0});var S=E(a);J(i.$$.fragment,S),S.forEach(f),D.forEach(f),g=x(T),p&&p.l(T),T.forEach(f),this.h()},h(){u(t,"class","text-lg font-medium self-center"),u(a,"class","self-center"),u(r,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-0.5")},m(w,T){j(w,e,T),m(e,r),m(r,t),m(t,o),m(r,l),m(r,a),K(i,a,null),m(e,g),p&&p.m(e,null),_=!0,c||(h=ee(a,"click",n[8]),c=!0)},p(w,T){(!_||T&8)&&s!==(s=w[3].t("Share Chat")+"")&&z(o,s),w[2]?p?(p.p(w,T),T&4&&B(p,1)):(p=Je(w),p.c(),B(p,1),p.m(e,null)):p&&(Ee(),A(p,1,1,()=>{p=null}),Ie())},i(w){_||(B(i.$$.fragment,w),B(p),_=!0)},o(w){A(i.$$.fragment,w),A(p),_=!1},d(w){w&&f(e),q(i),p&&p.d(),c=!1,h()}}}function Ot(n){let e,r,t;function s(l){n[12](l)}let o={size:"md",$$slots:{default:[xt]},$$scope:{ctx:n}};return n[0]!==void 0&&(o.show=n[0]),e=new Ye({props:o}),ue.push(()=>de(e,"show",s)),{c(){R(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,a){K(e,l,a),t=!0},p(l,[a]){const i={};a&65567&&(i.$$scope={dirty:a,ctx:l}),!r&&a&1&&(r=!0,i.show=l[0],me(()=>r=!1)),e.$set(i)},i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Ut(n,e,r){let t,s,o;re(n,Qe,b=>r(14,t=b)),re(n,et,b=>r(4,o=b));let{chatId:l}=e,a=null,i=null;const g=Se("i18n");re(n,g,b=>r(3,s=b));const _=async()=>{const b=await dt(localStorage.token,l);return i=`${window.location.origin}/s/${b.id}`,r(2,a=await ye(localStorage.token,l)),i},c=async()=>{const b=a.chat;be.success(s.t("Redirecting you to Open WebUI Community"));const V="https://openwebui.com",I=await window.open(`${V}/chats/upload`,"_blank");window.addEventListener("message",d=>{d.origin===V&&d.data==="loaded"&&I.postMessage(JSON.stringify({chat:b,models:t.filter(k=>b.models.includes(k.id))}),"*")},!1)};let{show:h=!1}=e;const p=b=>a?b?a.id!==b.id||a.share_id!==b.share_id:!1:!0,w=()=>{r(0,h=!1)},T=async()=>{await mt(localStorage.token,l)&&r(2,a=await ye(localStorage.token,l))},D=()=>{c(),r(0,h=!1)},v=async()=>{if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)){const V=async()=>{const I=await _();return new Blob([I],{type:"text/plain"})};navigator.clipboard.write([new ClipboardItem({"text/plain":V()})]).then(()=>!0).catch(I=>(console.error("Async: Could not copy text: ",I),!1))}else pt(await _());be.success(s.t("Copied shared chat URL to clipboard!")),r(0,h=!1)};function S(b){h=b,r(0,h)}return n.$$set=b=>{"chatId"in b&&r(1,l=b.chatId),"show"in b&&r(0,h=b.show)},n.$$.update=()=>{n.$$.dirty&7&&h&&(async()=>{if(l){const b=await ye(localStorage.token,l);p(b)&&r(2,a=b)}else r(2,a=null)})()},[h,l,a,s,o,g,_,c,w,T,D,v,S]}class Cr extends ie{constructor(e){super(),fe(this,e,Ut,Ot,ce,{chatId:1,show:0})}}function Mt(n){let e;const r=n[8].default,t=st(r,n,n[14],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,o){t&&t.m(s,o),e=!0},p(s,o){t&&t.p&&(!e||o&16384)&&at(t,r,s,s[14],e?lt(r,s[14],o,null):nt(s[14]),null)},i(s){e||(B(t,s),e=!0)},o(s){A(t,s),e=!1},d(s){t&&t.d(s)}}}function Ft(n){let e,r;return e=new yt({props:{content:n[5].t("More"),$$slots:{default:[Mt]},$$scope:{ctx:n}}}),{c(){R(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,s){K(e,t,s),r=!0},p(t,s){const o={};s&32&&(o.content=t[5].t("More")),s&16384&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){r||(B(e.$$.fragment,t),r=!0)},o(t){A(e.$$.fragment,t),r=!1},d(t){q(e,t)}}}function Pt(n){let e,r,t,s=n[5].t("Edit")+"",o,l;return e=new kt({props:{strokeWidth:"2"}}),{c(){R(e.$$.fragment),r=N(),t=y("div"),o=M(s),this.h()},l(a){J(e.$$.fragment,a),r=x(a),t=$(a,"DIV",{class:!0});var i=E(t);o=F(i,s),i.forEach(f),this.h()},h(){u(t,"class","flex items-center")},m(a,i){K(e,a,i),j(a,r,i),j(a,t,i),m(t,o),l=!0},p(a,i){(!l||i&32)&&s!==(s=a[5].t("Edit")+"")&&z(o,s)},i(a){l||(B(e.$$.fragment,a),l=!0)},o(a){A(e.$$.fragment,a),l=!1},d(a){a&&(f(r),f(t)),q(e,a)}}}function zt(n){let e,r,t,s=n[5].t("Export")+"",o,l;return e=new $t({props:{strokeWidth:"2"}}),{c(){R(e.$$.fragment),r=N(),t=y("div"),o=M(s),this.h()},l(a){J(e.$$.fragment,a),r=x(a),t=$(a,"DIV",{class:!0});var i=E(t);o=F(i,s),i.forEach(f),this.h()},h(){u(t,"class","flex items-center")},m(a,i){K(e,a,i),j(a,r,i),j(a,t,i),m(t,o),l=!0},p(a,i){(!l||i&32)&&s!==(s=a[5].t("Export")+"")&&z(o,s)},i(a){l||(B(e.$$.fragment,a),l=!0)},o(a){A(e.$$.fragment,a),l=!1},d(a){a&&(f(r),f(t)),q(e,a)}}}function Lt(n){let e,r,t,s=n[5].t("Delete")+"",o,l;return e=new vt({props:{strokeWidth:"2"}}),{c(){R(e.$$.fragment),r=N(),t=y("div"),o=M(s),this.h()},l(a){J(e.$$.fragment,a),r=x(a),t=$(a,"DIV",{class:!0});var i=E(t);o=F(i,s),i.forEach(f),this.h()},h(){u(t,"class","flex items-center")},m(a,i){K(e,a,i),j(a,r,i),j(a,t,i),m(t,o),l=!0},p(a,i){(!l||i&32)&&s!==(s=a[5].t("Delete")+"")&&z(o,s)},i(a){l||(B(e.$$.fragment,a),l=!0)},o(a){A(e.$$.fragment,a),l=!1},d(a){a&&(f(r),f(t)),q(e,a)}}}function Wt(n){let e,r,t,s,o,l;return e=new $e({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Pt]},$$scope:{ctx:n}}}),e.$on("click",n[9]),t=new $e({props:{class:"flex gap-2 items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[zt]},$$scope:{ctx:n}}}),t.$on("click",n[10]),o=new $e({props:{class:"flex  gap-2  items-center px-3 py-1.5 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Lt]},$$scope:{ctx:n}}}),o.$on("click",n[11]),{c(){R(e.$$.fragment),r=N(),R(t.$$.fragment),s=N(),R(o.$$.fragment)},l(a){J(e.$$.fragment,a),r=x(a),J(t.$$.fragment,a),s=x(a),J(o.$$.fragment,a)},m(a,i){K(e,a,i),j(a,r,i),K(t,a,i),j(a,s,i),K(o,a,i),l=!0},p(a,i){const g={};i&16416&&(g.$$scope={dirty:i,ctx:a}),e.$set(g);const _={};i&16416&&(_.$$scope={dirty:i,ctx:a}),t.$set(_);const c={};i&16416&&(c.$$scope={dirty:i,ctx:a}),o.$set(c)},i(a){l||(B(e.$$.fragment,a),B(t.$$.fragment,a),B(o.$$.fragment,a),l=!0)},o(a){A(e.$$.fragment,a),A(t.$$.fragment,a),A(o.$$.fragment,a),l=!1},d(a){a&&(f(r),f(s)),q(e,a),q(t,a),q(o,a)}}}function Rt(n){let e,r,t;return r=new gt({props:{class:"w-full max-w-[170px] rounded-lg px-1 py-1.5  z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",sideOffset:-2,side:"bottom",align:n[0],transition:wt,$$slots:{default:[Wt]},$$scope:{ctx:n}}}),{c(){e=y("div"),R(r.$$.fragment),this.h()},l(s){e=$(s,"DIV",{slot:!0});var o=E(e);J(r.$$.fragment,o),o.forEach(f),this.h()},h(){u(e,"slot","content")},m(s,o){j(s,e,o),K(r,e,null),t=!0},p(s,o){const l={};o&1&&(l.align=s[0]),o&16430&&(l.$$scope={dirty:o,ctx:s}),r.$set(l)},i(s){t||(B(r.$$.fragment,s),t=!0)},o(s){A(r.$$.fragment,s),t=!1},d(s){s&&f(e),q(r)}}}function Jt(n){let e,r,t;function s(l){n[12](l)}let o={$$slots:{content:[Rt],default:[Ft]},$$scope:{ctx:n}};return n[4]!==void 0&&(o.show=n[4]),e=new bt({props:o}),ue.push(()=>de(e,"show",s)),e.$on("change",n[13]),{c(){R(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,a){K(e,l,a),t=!0},p(l,[a]){const i={};a&16431&&(i.$$scope={dirty:a,ctx:l}),!r&&a&16&&(r=!0,i.show=l[4],me(()=>r=!1)),e.$set(i)},i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Kt(n,e,r){let t,{$$slots:s={},$$scope:o}=e;const l=Se("i18n");re(n,l,S=>r(5,t=S));const a=He();let{align:i="start"}=e,{onEdit:g=()=>{}}=e,{onExport:_=()=>{}}=e,{onDelete:c=()=>{}}=e,h=!1;const p=()=>{g()},w=()=>{_()},T=()=>{c()};function D(S){h=S,r(4,h)}const v=S=>{S.detail===!1&&a("close")};return n.$$set=S=>{"align"in S&&r(0,i=S.align),"onEdit"in S&&r(1,g=S.onEdit),"onExport"in S&&r(2,_=S.onExport),"onDelete"in S&&r(3,c=S.onDelete),"$$scope"in S&&r(14,o=S.$$scope)},[i,g,_,c,h,t,l,a,s,p,w,T,D,v,o]}class jr extends ie{constructor(e){super(),fe(this,e,Kt,Jt,ce,{align:0,onEdit:1,onExport:2,onDelete:3})}}function qt(n){let e=n[5].t("Create Folder")+"",r;return{c(){r=M(e)},l(t){r=F(t,e)},m(t,s){j(t,r,s)},p(t,s){s&32&&e!==(e=t[5].t("Create Folder")+"")&&z(r,e)},d(t){t&&f(r)}}}function Gt(n){let e=n[5].t("Edit Folder")+"",r;return{c(){r=M(e)},l(t){r=F(t,e)},m(t,s){j(t,r,s)},p(t,s){s&32&&e!==(e=t[5].t("Edit Folder")+"")&&z(r,e)},d(t){t&&f(r)}}}function qe(n){let e,r,t=n[5].t("System Prompt")+"",s,o,l,a,i,g;function _(h){n[13](h)}let c={className:" text-sm w-full bg-transparent outline-hidden ",placeholder:n[5].t(`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`),maxSize:200};return n[3].system_prompt!==void 0&&(c.value=n[3].system_prompt),a=new It({props:c}),ue.push(()=>de(a,"value",_)),{c(){e=y("div"),r=y("div"),s=M(t),o=N(),l=y("div"),R(a.$$.fragment),this.h()},l(h){e=$(h,"DIV",{class:!0});var p=E(e);r=$(p,"DIV",{class:!0});var w=E(r);s=F(w,t),w.forEach(f),o=x(p),l=$(p,"DIV",{});var T=E(l);J(a.$$.fragment,T),T.forEach(f),p.forEach(f),this.h()},h(){u(r,"class","mb-2 text-xs text-gray-500"),u(e,"class","my-1")},m(h,p){j(h,e,p),m(e,r),m(r,s),m(e,o),m(e,l),K(a,l,null),g=!0},p(h,p){(!g||p&32)&&t!==(t=h[5].t("System Prompt")+"")&&z(s,t);const w={};p&32&&(w.placeholder=h[5].t(`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`)),!i&&p&8&&(i=!0,w.value=h[3].system_prompt,me(()=>i=!1)),a.$set(w)},i(h){g||(B(a.$$.fragment,h),g=!0)},o(h){A(a.$$.fragment,h),g=!1},d(h){h&&f(e),q(a)}}}function Ht(n){let e,r,t,s=n[5].t("Knowledge")+"",o;return{c(){e=y("div"),r=y("div"),t=y("div"),o=M(s),this.h()},l(l){e=$(l,"DIV",{slot:!0});var a=E(e);r=$(a,"DIV",{class:!0});var i=E(r);t=$(i,"DIV",{class:!0});var g=E(t);o=F(g,s),g.forEach(f),i.forEach(f),a.forEach(f),this.h()},h(){u(t,"class","mb-2 text-xs text-gray-500"),u(r,"class","flex w-full justify-between"),u(e,"slot","label")},m(l,a){j(l,e,a),m(e,r),m(r,t),m(t,o)},p(l,a){a&32&&s!==(s=l[5].t("Knowledge")+"")&&z(o,s)},d(l){l&&f(e)}}}function Ge(n){let e,r,t;return r=new Et({}),{c(){e=y("div"),R(r.$$.fragment),this.h()},l(s){e=$(s,"DIV",{class:!0});var o=E(e);J(r.$$.fragment,o),o.forEach(f),this.h()},h(){u(e,"class","ml-2 self-center")},m(s,o){j(s,e,o),K(r,e,null),t=!0},i(s){t||(B(r.$$.fragment,s),t=!0)},o(s){A(r.$$.fragment,s),t=!1},d(s){s&&f(e),q(r)}}}function Yt(n){var je,Be,Ve;let e,r,t,s,o,l,a,i,g,_,c,h,p=n[5].t("Folder Name")+"",w,T,D,v,S,b,V,I,d,k,L,X,te,G,W,ae=n[5].t("Save")+"",he,ve,pe,Z,ke,Te;function De(C,O){return C[1]?Gt:qt}let _e=De(n),H=_e(n);l=new Xe({props:{className:"size-5"}});let U=(((je=n[6])==null?void 0:je.role)==="admin"||(((Ve=(Be=n[6])==null?void 0:Be.permissions.chat)==null?void 0:Ve.system_prompt)??!0))&&qe(n);function Ze(C){n[14](C)}let Ce={$$slots:{label:[Ht]},$$scope:{ctx:n}};n[3].files!==void 0&&(Ce.selectedItems=n[3].files),L=new St({props:Ce}),ue.push(()=>de(L,"selectedItems",Ze));let P=n[4]&&Ge();return{c(){e=y("div"),r=y("div"),t=y("div"),H.c(),s=N(),o=y("button"),R(l.$$.fragment),a=N(),i=y("div"),g=y("div"),_=y("form"),c=y("div"),h=y("div"),w=M(p),T=N(),D=y("div"),v=y("input"),b=N(),V=y("hr"),I=N(),U&&U.c(),d=N(),k=y("div"),R(L.$$.fragment),te=N(),G=y("div"),W=y("button"),he=M(ae),ve=N(),P&&P.c(),this.h()},l(C){e=$(C,"DIV",{});var O=E(e);r=$(O,"DIV",{class:!0});var Q=E(r);t=$(Q,"DIV",{class:!0});var ne=E(t);H.l(ne),ne.forEach(f),s=x(Q),o=$(Q,"BUTTON",{class:!0});var le=E(o);J(l.$$.fragment,le),le.forEach(f),Q.forEach(f),a=x(O),i=$(O,"DIV",{class:!0});var oe=E(i);g=$(oe,"DIV",{class:!0});var Ae=E(g);_=$(Ae,"FORM",{class:!0});var Y=E(_);c=$(Y,"DIV",{class:!0});var ge=E(c);h=$(ge,"DIV",{class:!0});var Ne=E(h);w=F(Ne,p),Ne.forEach(f),T=x(ge),D=$(ge,"DIV",{class:!0});var xe=E(D);v=$(xe,"INPUT",{class:!0,type:!0,placeholder:!0,autocomplete:!0}),xe.forEach(f),ge.forEach(f),b=x(Y),V=$(Y,"HR",{class:!0}),I=x(Y),U&&U.l(Y),d=x(Y),k=$(Y,"DIV",{class:!0});var Oe=E(k);J(L.$$.fragment,Oe),Oe.forEach(f),te=x(Y),G=$(Y,"DIV",{class:!0});var Ue=E(G);W=$(Ue,"BUTTON",{class:!0,type:!0});var we=E(W);he=F(we,ae),ve=x(we),P&&P.l(we),we.forEach(f),Ue.forEach(f),Y.forEach(f),Ae.forEach(f),oe.forEach(f),O.forEach(f),this.h()},h(){u(t,"class","text-lg font-medium self-center"),u(o,"class","self-center"),u(r,"class","flex justify-between dark:text-gray-300 px-5 pt-4 pb-1"),u(h,"class","mb-1 text-xs text-gray-500"),u(v,"class","w-full text-sm bg-transparent placeholder:text-gray-300 dark:placeholder:text-gray-700 outline-hidden"),u(v,"type","text"),u(v,"placeholder",S=n[5].t("Enter folder name")),u(v,"autocomplete","off"),u(D,"class","flex-1"),u(c,"class","flex flex-col w-full mt-1"),u(V,"class","border-gray-50 dark:border-gray-850 my-2.5 w-full"),u(k,"class","my-2"),u(W,"class",pe="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center "+(n[4]?" cursor-not-allowed":"")),u(W,"type","submit"),W.disabled=n[4],u(G,"class","flex justify-end pt-3 text-sm font-medium gap-1.5"),u(_,"class","flex flex-col w-full"),u(g,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),u(i,"class","flex flex-col md:flex-row w-full px-5 pb-4 md:space-x-4 dark:text-gray-200")},m(C,O){j(C,e,O),m(e,r),m(r,t),H.m(t,null),m(r,s),m(r,o),K(l,o,null),m(e,a),m(e,i),m(i,g),m(g,_),m(_,c),m(c,h),m(h,w),m(c,T),m(c,D),m(D,v),Le(v,n[2]),m(_,b),m(_,V),m(_,I),U&&U.m(_,null),m(_,d),m(_,k),K(L,k,null),m(_,te),m(_,G),m(G,W),m(W,he),m(W,ve),P&&P.m(W,null),Z=!0,ke||(Te=[ee(o,"click",n[11]),ee(v,"input",n[12]),ee(_,"submit",ot(n[15]))],ke=!0)},p(C,O){var ne,le,oe;_e===(_e=De(C))&&H?H.p(C,O):(H.d(1),H=_e(C),H&&(H.c(),H.m(t,null))),(!Z||O&32)&&p!==(p=C[5].t("Folder Name")+"")&&z(w,p),(!Z||O&32&&S!==(S=C[5].t("Enter folder name")))&&u(v,"placeholder",S),O&4&&v.value!==C[2]&&Le(v,C[2]),((ne=C[6])==null?void 0:ne.role)==="admin"||(((oe=(le=C[6])==null?void 0:le.permissions.chat)==null?void 0:oe.system_prompt)??!0)?U?(U.p(C,O),O&64&&B(U,1)):(U=qe(C),U.c(),B(U,1),U.m(_,d)):U&&(Ee(),A(U,1,1,()=>{U=null}),Ie());const Q={};O&262176&&(Q.$$scope={dirty:O,ctx:C}),!X&&O&8&&(X=!0,Q.selectedItems=C[3].files,me(()=>X=!1)),L.$set(Q),(!Z||O&32)&&ae!==(ae=C[5].t("Save")+"")&&z(he,ae),C[4]?P?O&16&&B(P,1):(P=Ge(),P.c(),B(P,1),P.m(W,null)):P&&(Ee(),A(P,1,1,()=>{P=null}),Ie()),(!Z||O&16&&pe!==(pe="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-950 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full flex flex-row space-x-1 items-center "+(C[4]?" cursor-not-allowed":"")))&&u(W,"class",pe),(!Z||O&16)&&(W.disabled=C[4])},i(C){Z||(B(l.$$.fragment,C),B(U),B(L.$$.fragment,C),B(P),Z=!0)},o(C){A(l.$$.fragment,C),A(U),A(L.$$.fragment,C),A(P),Z=!1},d(C){C&&f(e),H.d(),q(l),U&&U.d(),q(L),P&&P.d(),ke=!1,it(Te)}}}function Xt(n){let e,r,t;function s(l){n[16](l)}let o={size:"md",$$slots:{default:[Yt]},$$scope:{ctx:n}};return n[0]!==void 0&&(o.show=n[0]),e=new Ye({props:o}),ue.push(()=>de(e,"show",s)),{c(){R(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,a){K(e,l,a),t=!0},p(l,[a]){const i={};a&262271&&(i.$$scope={dirty:a,ctx:l}),!r&&a&1&&(r=!0,i.show=l[0],me(()=>r=!1)),e.$set(i)},i(l){t||(B(e.$$.fragment,l),t=!0)},o(l){A(e.$$.fragment,l),t=!1},d(l){q(e,l)}}}function Zt(n,e,r){let t,s;re(n,tt,I=>r(6,s=I));const o=Se("i18n");re(n,o,I=>r(5,t=I));let{show:l=!1}=e,{onSubmit:a=I=>{}}=e,{edit:i=!1}=e,{folder:g=null}=e,_="",c={system_prompt:"",files:[]},h=!1;const p=async()=>{if(r(4,h=!0),((c==null?void 0:c.files)??[]).some(I=>I.status==="uploading")){be.error(t.t("Please wait until all files are uploaded.")),r(4,h=!1);return}await a({name:_,data:c}),r(0,l=!1),r(4,h=!1)},w=()=>{r(2,_=g.name),r(3,c=g.data||{system_prompt:"",files:[]})},T=()=>{r(0,l=!1)};function D(){_=this.value,r(2,_),r(0,l),r(1,i)}function v(I){n.$$.not_equal(c.system_prompt,I)&&(c.system_prompt=I,r(3,c),r(0,l),r(1,i))}function S(I){n.$$.not_equal(c.files,I)&&(c.files=I,r(3,c),r(0,l),r(1,i))}const b=()=>{p()};function V(I){l=I,r(0,l)}return n.$$set=I=>{"show"in I&&r(0,l=I.show),"onSubmit"in I&&r(9,a=I.onSubmit),"edit"in I&&r(1,i=I.edit),"folder"in I&&r(10,g=I.folder)},n.$$.update=()=>{n.$$.dirty&1024&&g&&w(),n.$$.dirty&3&&!l&&!i&&(r(2,_=""),r(3,c={system_prompt:"",files:[]}))},[l,i,_,c,h,t,s,o,p,a,g,T,D,v,S,b,V]}class Br extends ie{constructor(e){super(),fe(this,e,Zt,Xt,ce,{show:0,onSubmit:9,edit:1,folder:10})}}export{Dr as F,Cr as S,Tr as T,Br as a,jr as b,Er as c,Sr as d,Ir as e,kr as f,yr as g,$r as u};
//# sourceMappingURL=CMkgaLGL.js.map
