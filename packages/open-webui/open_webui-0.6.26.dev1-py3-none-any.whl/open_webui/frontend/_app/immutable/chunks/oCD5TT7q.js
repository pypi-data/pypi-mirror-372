import{S as et,i as tt,s as lt,H as me,I as pe,C as Z,D as G,E as X,K as ve,q as T,r as S,F as Q,v as it,k as we,w as at,M as ot,e as y,t as z,l as A,c as E,a as w,b as F,d,p as U,f as m,g as D,h as b,G as ae,J as ft,j as B,y as te,u as le,P as nt,m as ie,n as se,X as ct,a3 as be,T as ut,a9 as dt,N as ge,O as ke}from"./D0xw479y.js";import"./IHki7fMi.js";import{t as _t,u as oe,w as Be}from"./DoRuB-ZG.js";import{e as Ae}from"./DI3dAAkc.js";import{e as Y,a as ht}from"./DTJLE-DR.js";import{a as mt}from"./LKv5dHGb.js";import{M as pt}from"./C1SOao-N.js";import{X as rt}from"./CbJTeXHO.js";import{S as vt}from"./B8JnFf9y.js";import{T as st}from"./DMhPNgOe.js";import{d as Ue}from"./I1CDPYOB.js";import{S as ye}from"./CAm-jMer.js";const il=async(s,e,t)=>{const l=new FormData;l.append("file",e),t&&l.append("metadata",JSON.stringify(t));let i=null;const n=await fetch(`${Y}/files/`,{method:"POST",headers:{Accept:"application/json",authorization:`Bearer ${s}`},body:l}).then(async r=>{if(!r.ok)throw await r.json();return r.json()}).catch(r=>(i=r.detail,console.error(r),null));if(i)throw i;if(n){const r=await bt(s,n.id);if(r&&r.ok){const o=r.body.pipeThrough(new TextDecoderStream).pipeThrough(_t(`
`)).getReader();for(;;){const{value:a,done:_}=await o.read();if(_)break;try{let u=a.split(`
`);for(const f of u)if(f!==""&&f!=="data: [DONE]"){let c=JSON.parse(f.replace(/^data: /,""));c!=null&&c.error&&(console.error(c.error),n.error=c.error)}}catch{}}}}if(i)throw i;return n},bt=async(s,e)=>{const t=new URLSearchParams;t.append("stream","true");let l=null;const i=await fetch(`${Y}/files/${e}/process/status?${t}`,{method:"GET",headers:{Accept:"application/json",authorization:`Bearer ${s}`}}).catch(n=>(l=n.detail,console.error(n),null));if(l)throw l;return i},gt=async(s,e)=>{let t=null;const l=await fetch(`${Y}/files/${e}`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${s}`}}).then(async i=>{if(!i.ok)throw await i.json();return i.json()}).then(i=>i).catch(i=>(t=i.detail,console.error(i),null));if(t)throw t;return l},nl=async(s,e,t)=>{let l=null;const i=await fetch(`${Y}/files/${e}/data/content/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${s}`},body:JSON.stringify({content:t})}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).then(n=>n).catch(n=>(l=n.detail,console.error(n),null));if(l)throw l;return i},rl=async s=>{let e=null;const t=await fetch(`${Y}/files/all`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${s}`}}).then(async l=>{if(!l.ok)throw await l.json();return l.json()}).then(l=>l).catch(l=>(e=l.detail,console.error(l),null));if(e)throw e;return t};function Oe(s,e,t){const l=s.slice();return l[18]=e[t],l}function Me(s){var o,a,_;let e,t,l,i=((o=s[0])==null?void 0:o.type)&&Le(s),n=((a=s[0])==null?void 0:a.description)&&Pe(s),r=((_=s[0])==null?void 0:_.created_at)&&Re(s);return{c(){i&&i.c(),e=A(),n&&n.c(),t=A(),r&&r.c(),l=ie()},l(u){i&&i.l(u),e=U(u),n&&n.l(u),t=U(u),r&&r.l(u),l=ie()},m(u,f){i&&i.m(u,f),D(u,e,f),n&&n.m(u,f),D(u,t,f),r&&r.m(u,f),D(u,l,f)},p(u,f){var c,h,g;(c=u[0])!=null&&c.type?i?i.p(u,f):(i=Le(u),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),(h=u[0])!=null&&h.description?n?n.p(u,f):(n=Pe(u),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null),(g=u[0])!=null&&g.created_at?r?r.p(u,f):(r=Re(u),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null)},d(u){u&&(d(e),d(t),d(l)),i&&i.d(u),n&&n.d(u),r&&r.d(u)}}}function Le(s){let e,t=s[0].type+"",l,i;return{c(){e=y("div"),l=z(t),i=z(`
								•`),this.h()},l(n){e=E(n,"DIV",{class:!0});var r=w(e);l=F(r,t),r.forEach(d),i=F(n,`
								•`),this.h()},h(){m(e,"class","capitalize shrink-0")},m(n,r){D(n,e,r),b(e,l),D(n,i,r)},p(n,r){r&1&&t!==(t=n[0].type+"")&&B(l,t)},d(n){n&&(d(e),d(i))}}}function Pe(s){let e,t=s[0].description+"",l,i;return{c(){e=y("div"),l=z(t),i=z(`
								•`),this.h()},l(n){e=E(n,"DIV",{class:!0});var r=w(e);l=F(r,t),r.forEach(d),i=F(n,`
								•`),this.h()},h(){m(e,"class","line-clamp-1")},m(n,r){D(n,e,r),b(e,l),D(n,i,r)},p(n,r){r&1&&t!==(t=n[0].description+"")&&B(l,t)},d(n){n&&(d(e),d(i))}}}function Re(s){let e,t=Ue(s[0].created_at*1e3).format("LL")+"",l;return{c(){e=y("div"),l=z(t),this.h()},l(i){e=E(i,"DIV",{class:!0});var n=w(e);l=F(n,t),n.forEach(d),this.h()},h(){m(e,"class","capitalize shrink-0")},m(i,n){D(i,e,n),b(e,l)},p(i,n){n&1&&t!==(t=Ue(i[0].created_at*1e3).format("LL")+"")&&B(l,t)},d(i){i&&d(e)}}}function We(s){let e,t=oe(s[0].size)+"",l,i;return{c(){e=y("div"),l=z(t),i=z(`
							•`),this.h()},l(n){e=E(n,"DIV",{class:!0});var r=w(e);l=F(r,t),r.forEach(d),i=F(n,`
							•`),this.h()},h(){m(e,"class","capitalize shrink-0")},m(n,r){D(n,e,r),b(e,l),D(n,i,r)},p(n,r){r&1&&t!==(t=oe(n[0].size)+"")&&B(l,t)},d(n){n&&(d(e),d(i))}}}function qe(s){var _,u,f;let e,t=s[8].t("{{COUNT}} extracted lines",{COUNT:Be(((f=(u=(_=s[0])==null?void 0:_.file)==null?void 0:u.data)==null?void 0:f.content)??"")})+"",l,i,n,r,o=s[8].t("Formatting may be inconsistent from source.")+"",a;return{c(){e=y("div"),l=z(t),i=A(),n=y("div"),r=z("• "),a=z(o),this.h()},l(c){e=E(c,"DIV",{class:!0});var h=w(e);l=F(h,t),h.forEach(d),i=U(c),n=E(c,"DIV",{class:!0});var g=w(n);r=F(g,"• "),a=F(g,o),g.forEach(d),this.h()},h(){m(e,"class","capitalize shrink-0"),m(n,"class","flex items-center gap-1 shrink-0")},m(c,h){D(c,e,h),b(e,l),D(c,i,h),D(c,n,h),b(n,r),b(n,a)},p(c,h){var g,N,p;h&257&&t!==(t=c[8].t("{{COUNT}} extracted lines",{COUNT:Be(((p=(N=(g=c[0])==null?void 0:g.file)==null?void 0:N.data)==null?void 0:p.content)??"")})+"")&&B(l,t),h&256&&o!==(o=c[8].t("Formatting may be inconsistent from source.")+"")&&B(a,o)},d(c){c&&(d(e),d(i),d(n))}}}function He(s){let e,t=s[8].t("Knowledge Base")+"",l;return{c(){e=y("div"),l=z(t),this.h()},l(i){e=E(i,"DIV",{class:!0});var n=w(e);l=F(n,t),n.forEach(d),this.h()},h(){m(e,"class","capitalize shrink-0")},m(i,n){D(i,e,n),b(e,l)},p(i,n){n&256&&t!==(t=i[8].t("Knowledge Base")+"")&&B(l,t)},d(i){i&&d(e)}}}function Je(s){let e,t,l;return t=new st({props:{content:s[3]?s[8].t("Inject the entire content as context for comprehensive processing, this is recommended for complex queries."):s[8].t("Default to segmented retrieval for focused and relevant content extraction, this is recommended for most cases."),$$slots:{default:[yt]},$$scope:{ctx:s}}}),{c(){e=y("div"),Z(t.$$.fragment)},l(i){e=E(i,"DIV",{});var n=w(e);G(t.$$.fragment,n),n.forEach(d)},m(i,n){D(i,e,n),X(t,e,null),l=!0},p(i,n){const r={};n&264&&(r.content=i[3]?i[8].t("Inject the entire content as context for comprehensive processing, this is recommended for complex queries."):i[8].t("Default to segmented retrieval for focused and relevant content extraction, this is recommended for most cases.")),n&2097417&&(r.$$scope={dirty:n,ctx:i}),t.$set(r)},i(i){l||(T(t.$$.fragment,i),l=!0)},o(i){S(t.$$.fragment,i),l=!1},d(i){i&&d(e),Q(t)}}}function kt(s){let e=s[8].t("Using Focused Retrieval")+"",t;return{c(){t=z(e)},l(l){t=F(l,e)},m(l,i){D(l,t,i)},p(l,i){i&256&&e!==(e=l[8].t("Using Focused Retrieval")+"")&&B(t,e)},d(l){l&&d(t)}}}function wt(s){let e=s[8].t("Using Entire Document")+"",t;return{c(){t=z(e)},l(l){t=F(l,e)},m(l,i){D(l,t,i)},p(l,i){i&256&&e!==(e=l[8].t("Using Entire Document")+"")&&B(t,e)},d(l){l&&d(t)}}}function yt(s){let e,t,l,i,n;function r(f,c){return f[3]?wt:kt}let o=r(s),a=o(s);function _(f){s[12](f)}let u={};return s[3]!==void 0&&(u.state=s[3]),l=new vt({props:u}),me.push(()=>pe(l,"state",_)),l.$on("change",s[13]),{c(){e=y("div"),a.c(),t=A(),Z(l.$$.fragment),this.h()},l(f){e=E(f,"DIV",{class:!0});var c=w(e);a.l(c),t=U(c),G(l.$$.fragment,c),c.forEach(d),this.h()},h(){m(e,"class","flex items-center gap-1.5 text-xs")},m(f,c){D(f,e,c),a.m(e,null),b(e,t),X(l,e,null),n=!0},p(f,c){o===(o=r(f))&&a?a.p(f,c):(a.d(1),a=o(f),a&&(a.c(),a.m(e,t)));const h={};!i&&c&8&&(i=!0,h.state=f[3],ve(()=>i=!1)),l.$set(h)},i(f){n||(T(l.$$.fragment,f),n=!0)},o(f){S(l.$$.fragment,f),n=!1},d(f){f&&d(e),a.d(),Q(l)}}}function Et(s){let e,t,l;return t=new ye({props:{className:"size-5"}}),{c(){e=y("div"),Z(t.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0});var n=w(e);G(t.$$.fragment,n),n.forEach(d),this.h()},h(){m(e,"class","flex items-center justify-center py-6")},m(i,n){D(i,e,n),X(t,e,null),l=!0},p:se,i(i){l||(T(t.$$.fragment,i),l=!0)},o(i){S(t.$$.fragment,i),l=!1},d(i){i&&d(e),Q(t)}}}function Dt(s){let e;function t(n,r){var o;return((o=n[0])==null?void 0:o.type)==="collection"?Vt:n[7]?Nt:It}let l=t(s),i=l(s);return{c(){i.c(),e=ie()},l(n){i.l(n),e=ie()},m(n,r){i.m(n,r),D(n,e,r)},p(n,r){l===(l=t(n))&&i?i.p(n,r):(i.d(1),i=l(n),i&&(i.c(),i.m(e.parentNode,e)))},i:se,o:se,d(n){n&&d(e),i.d(n)}}}function It(s){var n,r;let e,t,l=s[4]&&Ke(s),i=((r=(n=s[0])==null?void 0:n.file)==null?void 0:r.data)&&Ze(s);return{c(){l&&l.c(),e=A(),i&&i.c(),t=ie()},l(o){l&&l.l(o),e=U(o),i&&i.l(o),t=ie()},m(o,a){l&&l.m(o,a),D(o,e,a),i&&i.m(o,a),D(o,t,a)},p(o,a){var _,u;o[4]?l?l.p(o,a):(l=Ke(o),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),(u=(_=o[0])==null?void 0:_.file)!=null&&u.data?i?i.p(o,a):(i=Ze(o),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d(o){o&&(d(e),d(t)),l&&l.d(o),i&&i.d(o)}}}function Nt(s){let e,t,l=s[8].t("Content")+"",i,n,r,o,a=s[8].t("Preview")+"",_,u,f,c,h,g;function N(k,V){return k[6]==="preview"?jt:Ct}let p=N(s),v=p(s);return{c(){e=y("div"),t=y("button"),i=z(l),r=A(),o=y("button"),_=z(a),f=A(),v.c(),c=ie(),this.h()},l(k){e=E(k,"DIV",{class:!0});var V=w(e);t=E(V,"BUTTON",{class:!0,type:!0});var K=w(t);i=F(K,l),K.forEach(d),r=U(V),o=E(V,"BUTTON",{class:!0,type:!0});var C=w(o);_=F(C,a),C.forEach(d),V.forEach(d),f=U(k),v.l(k),c=ie(),this.h()},h(){m(t,"class",n="min-w-fit py-1.5 px-4 border-b "+(s[6]===""?" ":" border-transparent text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition"),m(t,"type","button"),m(o,"class",u="min-w-fit py-1.5 px-4 border-b "+(s[6]==="preview"?" ":" border-transparent text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition"),m(o,"type","button"),m(e,"class","flex mb-2.5 scrollbar-none overflow-x-auto w-full border-b border-gray-100 dark:border-gray-800 text-center text-sm font-medium bg-transparent dark:text-gray-200")},m(k,V){D(k,e,V),b(e,t),b(t,i),b(e,r),b(e,o),b(o,_),D(k,f,V),v.m(k,V),D(k,c,V),h||(g=[ae(t,"click",s[14]),ae(o,"click",s[15])],h=!0)},p(k,V){V&256&&l!==(l=k[8].t("Content")+"")&&B(i,l),V&64&&n!==(n="min-w-fit py-1.5 px-4 border-b "+(k[6]===""?" ":" border-transparent text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition")&&m(t,"class",n),V&256&&a!==(a=k[8].t("Preview")+"")&&B(_,a),V&64&&u!==(u="min-w-fit py-1.5 px-4 border-b "+(k[6]==="preview"?" ":" border-transparent text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white")+" transition")&&m(o,"class",u),p===(p=N(k))&&v?v.p(k,V):(v.d(1),v=p(k),v&&(v.c(),v.m(c.parentNode,c)))},d(k){k&&(d(e),d(f),d(c)),v.d(k),h=!1,nt(g)}}}function Vt(s){var i;let e,t=Ae((i=s[0])==null?void 0:i.files),l=[];for(let n=0;n<t.length;n+=1)l[n]=Ge(Oe(s,t,n));return{c(){e=y("div");for(let n=0;n<l.length;n+=1)l[n].c()},l(n){e=E(n,"DIV",{});var r=w(e);for(let o=0;o<l.length;o+=1)l[o].l(r);r.forEach(d)},m(n,r){D(n,e,r);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(n,r){var o;if(r&1){t=Ae((o=n[0])==null?void 0:o.files);let a;for(a=0;a<t.length;a+=1){const _=Oe(n,t,a);l[a]?l[a].p(_,r):(l[a]=Ge(_),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&d(e),ct(l,n)}}}function Ke(s){let e,t;return{c(){e=y("audio"),this.h()},l(l){e=E(l,"AUDIO",{src:!0,class:!0,playsinline:!0}),w(e).forEach(d),this.h()},h(){be(e.src,t=`${Y}/files/${s[0].id}/content`)||m(e,"src",t),m(e,"class","w-full border-0 rounded-lg mb-2"),e.controls=!0,m(e,"playsinline","")},m(l,i){D(l,e,i)},p(l,i){i&1&&!be(e.src,t=`${Y}/files/${l[0].id}/content`)&&m(e,"src",t)},d(l){l&&d(e)}}}function Ze(s){var i,n,r;let e,t=(((r=(n=(i=s[0])==null?void 0:i.file)==null?void 0:n.data)==null?void 0:r.content)??"No content")+"",l;return{c(){e=y("div"),l=z(t),this.h()},l(o){e=E(o,"DIV",{class:!0});var a=w(e);l=F(a,t),a.forEach(d),this.h()},h(){m(e,"class","max-h-96 overflow-scroll scrollbar-hidden text-xs whitespace-pre-wrap")},m(o,a){D(o,e,a),b(e,l)},p(o,a){var _,u,f;a&1&&t!==(t=(((f=(u=(_=o[0])==null?void 0:_.file)==null?void 0:u.data)==null?void 0:f.content)??"No content")+"")&&B(l,t)},d(o){o&&d(e)}}}function Ct(s){var i,n,r;let e,t=(((r=(n=(i=s[0])==null?void 0:i.file)==null?void 0:n.data)==null?void 0:r.content)??"No content")+"",l;return{c(){e=y("div"),l=z(t),this.h()},l(o){e=E(o,"DIV",{class:!0});var a=w(e);l=F(a,t),a.forEach(d),this.h()},h(){m(e,"class","max-h-96 overflow-scroll scrollbar-hidden text-xs whitespace-pre-wrap")},m(o,a){D(o,e,a),b(e,l)},p(o,a){var _,u,f;a&1&&t!==(t=(((f=(u=(_=o[0])==null?void 0:_.file)==null?void 0:u.data)==null?void 0:f.content)??"No content")+"")&&B(l,t)},d(o){o&&d(e)}}}function jt(s){let e,t,l;return{c(){e=y("iframe"),this.h()},l(i){e=E(i,"IFRAME",{title:!0,src:!0,class:!0}),w(e).forEach(d),this.h()},h(){var i;m(e,"title",t=(i=s[0])==null?void 0:i.name),be(e.src,l=`${Y}/files/${s[0].id}/content`)||m(e,"src",l),m(e,"class","w-full h-[70vh] border-0 rounded-lg")},m(i,n){D(i,e,n)},p(i,n){var r;n&1&&t!==(t=(r=i[0])==null?void 0:r.name)&&m(e,"title",t),n&1&&!be(e.src,l=`${Y}/files/${i[0].id}/content`)&&m(e,"src",l)},d(i){i&&d(e)}}}function Ge(s){var r,o;let e,t,l=((o=(r=s[18])==null?void 0:r.meta)==null?void 0:o.name)+"",i,n;return{c(){e=y("div"),t=y("div"),i=z(l),n=A(),this.h()},l(a){e=E(a,"DIV",{class:!0});var _=w(e);t=E(_,"DIV",{class:!0});var u=w(t);i=F(u,l),u.forEach(d),n=U(_),_.forEach(d),this.h()},h(){m(t,"class","flex-shrink-0 text-xs"),m(e,"class","flex items-center gap-2 mb-2")},m(a,_){D(a,e,_),b(e,t),b(t,i),b(e,n)},p(a,_){var u,f;_&1&&l!==(l=((f=(u=a[18])==null?void 0:u.meta)==null?void 0:f.name)+"")&&B(i,l)},d(a){a&&d(e)}}}function Tt(s){var Ne,Ve,Ce,je,Te,ze;let e,t,l,i,n,r,o=(((Ne=s[0])==null?void 0:Ne.name)??"File")+"",a,_,u,f,c,h,g,N,p,v,k,V,K,C,L,H,J,I,ne,Ee;c=new rt({});let P=((Ve=s[0])==null?void 0:Ve.type)==="collection"&&Me(s),R=s[0].size&&We(s),W=((Te=(je=(Ce=s[0])==null?void 0:Ce.file)==null?void 0:je.data)==null?void 0:Te.content)&&qe(s),q=((ze=s[0])==null?void 0:ze.knowledge)&&He(s),O=s[2]&&Je(s);const De=[Dt,Et],$=[];function Ie(j,M){return j[5]?1:0}return H=Ie(s),J=$[H]=De[H](s),{c(){e=y("div"),t=y("div"),l=y("div"),i=y("div"),n=y("div"),r=y("a"),a=z(o),_=A(),u=y("div"),f=y("button"),Z(c.$$.fragment),h=A(),g=y("div"),N=y("div"),p=y("div"),P&&P.c(),v=A(),R&&R.c(),k=A(),W&&W.c(),V=A(),q&&q.c(),K=A(),O&&O.c(),C=A(),L=y("div"),J.c(),this.h()},l(j){e=E(j,"DIV",{class:!0});var M=w(e);t=E(M,"DIV",{class:!0});var x=w(t);l=E(x,"DIV",{class:!0});var re=w(l);i=E(re,"DIV",{});var fe=w(i);n=E(fe,"DIV",{class:!0});var ce=w(n);r=E(ce,"A",{href:!0,class:!0});var ue=w(r);a=F(ue,o),ue.forEach(d),ce.forEach(d),fe.forEach(d),_=U(re),u=E(re,"DIV",{});var de=w(u);f=E(de,"BUTTON",{});var _e=w(f);G(c.$$.fragment,_e),_e.forEach(d),de.forEach(d),re.forEach(d),h=U(x),g=E(x,"DIV",{});var Fe=w(g);N=E(Fe,"DIV",{class:!0});var he=w(N);p=E(he,"DIV",{class:!0});var ee=w(p);P&&P.l(ee),v=U(ee),R&&R.l(ee),k=U(ee),W&&W.l(ee),V=U(ee),q&&q.l(ee),ee.forEach(d),K=U(he),O&&O.l(he),he.forEach(d),Fe.forEach(d),x.forEach(d),C=U(M),L=E(M,"DIV",{class:!0});var Se=w(L);J.l(Se),Se.forEach(d),M.forEach(d),this.h()},h(){m(r,"href","#"),m(r,"class","hover:underline line-clamp-1"),m(n,"class","font-medium text-lg dark:text-gray-100"),m(l,"class","flex items-start justify-between"),m(p,"class","flex flex-wrap text-xs gap-1 text-gray-500"),m(N,"class","flex flex-col items-center md:flex-row gap-1 justify-between w-full"),m(t,"class","pb-2"),m(L,"class","max-h-[75vh] overflow-auto"),m(e,"class","font-primary px-6 py-5 w-full flex flex-col justify-center dark:text-gray-400")},m(j,M){D(j,e,M),b(e,t),b(t,l),b(l,i),b(i,n),b(n,r),b(r,a),b(l,_),b(l,u),b(u,f),X(c,f,null),b(t,h),b(t,g),b(g,N),b(N,p),P&&P.m(p,null),b(p,v),R&&R.m(p,null),b(p,k),W&&W.m(p,null),b(p,V),q&&q.m(p,null),b(N,K),O&&O.m(N,null),b(e,C),b(e,L),$[H].m(L,null),I=!0,ne||(Ee=[ae(r,"click",ft(s[10])),ae(f,"click",s[11])],ne=!0)},p(j,M){var re,fe,ce,ue,de,_e;(!I||M&1)&&o!==(o=(((re=j[0])==null?void 0:re.name)??"File")+"")&&B(a,o),((fe=j[0])==null?void 0:fe.type)==="collection"?P?P.p(j,M):(P=Me(j),P.c(),P.m(p,v)):P&&(P.d(1),P=null),j[0].size?R?R.p(j,M):(R=We(j),R.c(),R.m(p,k)):R&&(R.d(1),R=null),(de=(ue=(ce=j[0])==null?void 0:ce.file)==null?void 0:ue.data)!=null&&de.content?W?W.p(j,M):(W=qe(j),W.c(),W.m(p,V)):W&&(W.d(1),W=null),(_e=j[0])!=null&&_e.knowledge?q?q.p(j,M):(q=He(j),q.c(),q.m(p,null)):q&&(q.d(1),q=null),j[2]?O?(O.p(j,M),M&4&&T(O,1)):(O=Je(j),O.c(),T(O,1),O.m(N,null)):O&&(te(),S(O,1,1,()=>{O=null}),le());let x=H;H=Ie(j),H===x?$[H].p(j,M):(te(),S($[x],1,1,()=>{$[x]=null}),le(),J=$[H],J?J.p(j,M):(J=$[H]=De[H](j),J.c()),T(J,1),J.m(L,null))},i(j){I||(T(c.$$.fragment,j),T(O),T(J),I=!0)},o(j){S(c.$$.fragment,j),S(O),S(J),I=!1},d(j){j&&d(e),Q(c),P&&P.d(),R&&R.d(),W&&W.d(),q&&q.d(),O&&O.d(),$[H].d(),ne=!1,nt(Ee)}}}function zt(s){let e,t,l;function i(r){s[16](r)}let n={size:"lg",$$slots:{default:[Tt]},$$scope:{ctx:s}};return s[1]!==void 0&&(n.show=s[1]),e=new pt({props:n}),me.push(()=>pe(e,"show",i)),{c(){Z(e.$$.fragment)},l(r){G(e.$$.fragment,r)},m(r,o){X(e,r,o),l=!0},p(r,[o]){const a={};o&2097663&&(a.$$scope={dirty:o,ctx:r}),!t&&o&2&&(t=!0,a.show=r[1],ve(()=>t=!1)),e.$set(a)},i(r){l||(T(e.$$.fragment,r),l=!0)},o(r){S(e.$$.fragment,r),l=!1},d(r){Q(e,r)}}}function Ft(s,e,t){let l,i;const n=it("i18n");we(s,n,C=>t(8,i=C));let{item:r}=e,{show:o=!1}=e,{edit:a=!1}=e,_=!1,u=!1,f=!1,c="";const h=async()=>{if((r==null?void 0:r.type)==="collection"){t(5,f=!0);const C=await mt(localStorage.token,r.id).catch(L=>(console.error("Error fetching knowledge base:",L),null));C&&t(0,r.files=C.files||[],r),t(5,f=!1)}else if((r==null?void 0:r.type)==="file"){t(5,f=!0);const C=await gt(localStorage.token,r.id).catch(L=>(console.error("Error fetching file:",L),null));C&&t(0,r.file=C||{},r),t(5,f=!1)}await ot()};at(()=>{(r==null?void 0:r.context)==="full"&&t(3,_=!0)});const g=()=>{!l&&r.url&&window.open(r.type==="file"?`${r.url}/content`:`${r.url}`,"_blank")},N=()=>{t(1,o=!1)};function p(C){_=C,t(3,_)}const v=C=>{t(0,r.context=C.detail?"full":void 0,r)},k=()=>{t(6,c="")},V=()=>{t(6,c="preview")};function K(C){o=C,t(1,o)}return s.$$set=C=>{"item"in C&&t(0,r=C.item),"show"in C&&t(1,o=C.show),"edit"in C&&t(2,a=C.edit)},s.$$.update=()=>{var C,L;s.$$.dirty&1&&t(7,l=((C=r==null?void 0:r.meta)==null?void 0:C.content_type)==="application/pdf"||(r==null?void 0:r.name)&&(r==null?void 0:r.name.toLowerCase().endsWith(".pdf"))),s.$$.dirty&1&&t(4,u=(((L=r==null?void 0:r.meta)==null?void 0:L.content_type)??"").startsWith("audio/")||(r==null?void 0:r.name)&&(r==null?void 0:r.name.toLowerCase().endsWith(".mp3"))||(r==null?void 0:r.name)&&(r==null?void 0:r.name.toLowerCase().endsWith(".wav"))||(r==null?void 0:r.name)&&(r==null?void 0:r.name.toLowerCase().endsWith(".ogg"))||(r==null?void 0:r.name)&&(r==null?void 0:r.name.toLowerCase().endsWith(".m4a"))||(r==null?void 0:r.name)&&(r==null?void 0:r.name.toLowerCase().endsWith(".webm"))),s.$$.dirty&2&&o&&h()},[r,o,a,_,u,f,c,l,i,n,g,N,p,v,k,V,K]}class St extends et{constructor(e){super(),tt(this,e,Ft,zt,lt,{item:0,show:1,edit:2})}}function Xe(s){let e,t,l,i;function n(a){s[18](a)}function r(a){s[19](a)}let o={edit:s[7]};return s[12]!==void 0&&(o.show=s[12]),s[0]!==void 0&&(o.item=s[0]),e=new St({props:o}),me.push(()=>pe(e,"show",n)),me.push(()=>pe(e,"item",r)),{c(){Z(e.$$.fragment)},l(a){G(e.$$.fragment,a)},m(a,_){X(e,a,_),i=!0},p(a,_){const u={};_&128&&(u.edit=a[7]),!t&&_&4096&&(t=!0,u.show=a[12],ve(()=>t=!1)),!l&&_&1&&(l=!0,u.item=a[0],ve(()=>l=!1)),e.$set(u)},i(a){i||(T(e.$$.fragment,a),i=!0)},o(a){S(e.$$.fragment,a),i=!1},d(a){Q(e,a)}}}function Qe(s){let e,t,l,i;const n=[At,Bt],r=[];function o(a,_){return a[6]?1:0}return t=o(s),l=r[t]=n[t](s),{c(){e=y("div"),l.c(),this.h()},l(a){e=E(a,"DIV",{class:!0});var _=w(e);l.l(_),_.forEach(d),this.h()},h(){m(e,"class","size-10 shrink-0 flex justify-center items-center bg-black/20 dark:bg-white/10 text-white rounded-xl")},m(a,_){D(a,e,_),r[t].m(e,null),i=!0},p(a,_){let u=t;t=o(a),t!==u&&(te(),S(r[u],1,1,()=>{r[u]=null}),le(),l=r[t],l||(l=r[t]=n[t](a),l.c()),T(l,1),l.m(e,null))},i(a){i||(T(l),i=!0)},o(a){S(l),i=!1},d(a){a&&d(e),r[t].d()}}}function Bt(s){let e,t;return e=new ye({}),{c(){Z(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,i){X(e,l,i),t=!0},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function At(s){let e,t,l;return{c(){e=ge("svg"),t=ge("path"),l=ge("path"),this.h()},l(i){e=ke(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,"aria-hidden":!0,class:!0});var n=w(e);t=ke(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),w(t).forEach(d),l=ke(n,"path",{d:!0}),w(l).forEach(d),n.forEach(d),this.h()},h(){m(t,"fill-rule","evenodd"),m(t,"d","M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z"),m(t,"clip-rule","evenodd"),m(l,"d","M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"viewBox","0 0 24 24"),m(e,"fill","currentColor"),m(e,"aria-hidden","true"),m(e,"class","size-4.5")},m(i,n){D(i,e,n),b(e,t),b(e,l)},i:se,o:se,d(i){i&&d(e)}}}function Ut(s){let e,t;return e=new st({props:{content:s[17](s[9]),className:"flex flex-col w-full",placement:"top-start",$$slots:{default:[Mt]},$$scope:{ctx:s}}}),{c(){Z(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,i){X(e,l,i),t=!0},p(l,i){const n={};i&512&&(n.content=l[17](l[9])),i&4196928&&(n.$$scope={dirty:i,ctx:l}),e.$set(n)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){S(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Ot(s){let e,t,l=s[17](s[9])+"",i,n,r,o,a;function _(h,g){return h[10]==="file"?Wt:h[10]==="doc"?Rt:h[10]==="collection"?Pt:Lt}let u=_(s),f=u(s),c=s[11]&&$e(s);return{c(){e=y("div"),t=y("div"),i=z(l),n=A(),r=y("div"),f.c(),o=A(),c&&c.c(),this.h()},l(h){e=E(h,"DIV",{class:!0});var g=w(e);t=E(g,"DIV",{class:!0});var N=w(t);i=F(N,l),N.forEach(d),n=U(g),r=E(g,"DIV",{class:!0});var p=w(r);f.l(p),o=U(p),c&&c.l(p),p.forEach(d),g.forEach(d),this.h()},h(){var h;m(t,"class","dark:text-gray-100 text-sm font-medium line-clamp-1 mb-1"),m(r,"class",a="flex justify-between text-xs line-clamp-1 "+(((h=s[13])==null?void 0:h.highContrastMode)??!1?"text-gray-800 dark:text-gray-100":"text-gray-500")),m(e,"class","flex flex-col justify-center -space-y-0.5 px-2.5 w-full")},m(h,g){D(h,e,g),b(e,t),b(t,i),b(e,n),b(e,r),f.m(r,null),b(r,o),c&&c.m(r,null)},p(h,g){var N;g&512&&l!==(l=h[17](h[9])+"")&&B(i,l),u===(u=_(h))&&f?f.p(h,g):(f.d(1),f=u(h),f&&(f.c(),f.m(r,o))),h[11]?c?c.p(h,g):(c=$e(h),c.c(),c.m(r,null)):c&&(c.d(1),c=null),g&8192&&a!==(a="flex justify-between text-xs line-clamp-1 "+(((N=h[13])==null?void 0:N.highContrastMode)??!1?"text-gray-800 dark:text-gray-100":"text-gray-500"))&&m(r,"class",a)},i:se,o:se,d(h){h&&d(e),f.d(),c&&c.d()}}}function Ye(s){let e,t,l;return t=new ye({props:{className:"size-4"}}),{c(){e=y("div"),Z(t.$$.fragment),this.h()},l(i){e=E(i,"DIV",{class:!0});var n=w(e);G(t.$$.fragment,n),n.forEach(d),this.h()},h(){m(e,"class","shrink-0 mr-2")},m(i,n){D(i,e,n),X(t,e,null),l=!0},i(i){l||(T(t.$$.fragment,i),l=!0)},o(i){S(t.$$.fragment,i),l=!1},d(i){i&&d(e),Q(t)}}}function Mt(s){let e,t,l,i,n=s[17](s[9])+"",r,o,a,_=oe(s[11])+"",u,f,c=s[6]&&Ye();return{c(){e=y("div"),t=y("div"),c&&c.c(),l=A(),i=y("div"),r=z(n),o=A(),a=y("div"),u=z(_),this.h()},l(h){e=E(h,"DIV",{class:!0});var g=w(e);t=E(g,"DIV",{class:!0});var N=w(t);c&&c.l(N),l=U(N),i=E(N,"DIV",{class:!0});var p=w(i);r=F(p,n),p.forEach(d),o=U(N),a=E(N,"DIV",{class:!0});var v=w(a);u=F(v,_),v.forEach(d),N.forEach(d),g.forEach(d),this.h()},h(){m(i,"class","font-medium line-clamp-1 flex-1"),m(a,"class","text-gray-500 text-xs capitalize shrink-0"),m(t,"class","dark:text-gray-100 text-sm flex justify-between items-center"),m(e,"class","flex flex-col justify-center -space-y-0.5 px-2.5 w-full")},m(h,g){D(h,e,g),b(e,t),c&&c.m(t,null),b(t,l),b(t,i),b(i,r),b(t,o),b(t,a),b(a,u),f=!0},p(h,g){h[6]?c?g&64&&T(c,1):(c=Ye(),c.c(),T(c,1),c.m(t,l)):c&&(te(),S(c,1,1,()=>{c=null}),le()),(!f||g&512)&&n!==(n=h[17](h[9])+"")&&B(r,n),(!f||g&2048)&&_!==(_=oe(h[11])+"")&&B(u,_)},i(h){f||(T(c),f=!0)},o(h){S(c),f=!1},d(h){h&&d(e),c&&c.d()}}}function Lt(s){let e,t;return{c(){e=y("span"),t=z(s[10]),this.h()},l(l){e=E(l,"SPAN",{class:!0});var i=w(e);t=F(i,s[10]),i.forEach(d),this.h()},h(){m(e,"class","capitalize line-clamp-1")},m(l,i){D(l,e,i),b(e,t)},p(l,i){i&1024&&B(t,l[10])},d(l){l&&d(e)}}}function Pt(s){let e=s[14].t("Collection")+"",t;return{c(){t=z(e)},l(l){t=F(l,e)},m(l,i){D(l,t,i)},p(l,i){i&16384&&e!==(e=l[14].t("Collection")+"")&&B(t,e)},d(l){l&&d(t)}}}function Rt(s){let e=s[14].t("Document")+"",t;return{c(){t=z(e)},l(l){t=F(l,e)},m(l,i){D(l,t,i)},p(l,i){i&16384&&e!==(e=l[14].t("Document")+"")&&B(t,e)},d(l){l&&d(t)}}}function Wt(s){let e=s[14].t("File")+"",t;return{c(){t=z(e)},l(l){t=F(l,e)},m(l,i){D(l,t,i)},p(l,i){i&16384&&e!==(e=l[14].t("File")+"")&&B(t,e)},d(l){l&&d(t)}}}function $e(s){let e,t=oe(s[11])+"",l;return{c(){e=y("span"),l=z(t),this.h()},l(i){e=E(i,"SPAN",{class:!0});var n=w(e);l=F(n,t),n.forEach(d),this.h()},h(){m(e,"class","capitalize")},m(i,n){D(i,e,n),b(e,l)},p(i,n){n&2048&&t!==(t=oe(i[11])+"")&&B(l,t)},d(i){i&&d(e)}}}function xe(s){let e,t,l,i,n,r,o,a;return l=new rt({props:{className:"size-4"}}),{c(){e=y("div"),t=y("button"),Z(l.$$.fragment),this.h()},l(_){e=E(_,"DIV",{class:!0});var u=w(e);t=E(u,"BUTTON",{"aria-label":!0,class:!0,type:!0});var f=w(t);G(l.$$.fragment,f),f.forEach(d),u.forEach(d),this.h()},h(){var _;m(t,"aria-label",i=s[14].t("Remove File")),m(t,"class",n="bg-white text-black border border-gray-50 rounded-full "+(((_=s[13])==null?void 0:_.highContrastMode)??!1?"":"outline-hidden focus:outline-hidden group-hover:visible invisible transition")),m(t,"type","button"),m(e,"class","absolute -top-1 -right-1")},m(_,u){D(_,e,u),b(e,t),X(l,t,null),r=!0,o||(a=ae(t,"click",dt(s[20])),o=!0)},p(_,u){var f;(!r||u&16384&&i!==(i=_[14].t("Remove File")))&&m(t,"aria-label",i),(!r||u&8192&&n!==(n="bg-white text-black border border-gray-50 rounded-full "+(((f=_[13])==null?void 0:f.highContrastMode)??!1?"":"outline-hidden focus:outline-hidden group-hover:visible invisible transition")))&&m(t,"class",n)},i(_){r||(T(l.$$.fragment,_),r=!0)},o(_){S(l.$$.fragment,_),r=!1},d(_){_&&d(e),Q(l),o=!1,a()}}}function qt(s){let e,t,l,i,n,r,o,a,_,u,f=s[0]&&Xe(s),c=!s[8]&&Qe(s);const h=[Ot,Ut],g=[];function N(v,k){return v[8]?1:0}i=N(s),n=g[i]=h[i](s);let p=s[4]&&xe(s);return{c(){f&&f.c(),e=A(),t=y("button"),c&&c.c(),l=A(),n.c(),r=A(),p&&p.c(),this.h()},l(v){f&&f.l(v),e=U(v),t=E(v,"BUTTON",{class:!0,type:!0});var k=w(t);c&&c.l(k),l=U(k),n.l(k),r=U(k),p&&p.l(k),k.forEach(d),this.h()},h(){m(t,"class",o="relative group p-1.5 "+s[1]+" flex items-center gap-1 "+s[2]+" "+(s[8]?"rounded-xl":"rounded-2xl")+" text-left"),m(t,"type","button")},m(v,k){f&&f.m(v,k),D(v,e,k),D(v,t,k),c&&c.m(t,null),b(t,l),g[i].m(t,null),b(t,r),p&&p.m(t,null),a=!0,_||(u=ae(t,"click",s[21]),_=!0)},p(v,[k]){v[0]?f?(f.p(v,k),k&1&&T(f,1)):(f=Xe(v),f.c(),T(f,1),f.m(e.parentNode,e)):f&&(te(),S(f,1,1,()=>{f=null}),le()),v[8]?c&&(te(),S(c,1,1,()=>{c=null}),le()):c?(c.p(v,k),k&256&&T(c,1)):(c=Qe(v),c.c(),T(c,1),c.m(t,l));let V=i;i=N(v),i===V?g[i].p(v,k):(te(),S(g[V],1,1,()=>{g[V]=null}),le(),n=g[i],n?n.p(v,k):(n=g[i]=h[i](v),n.c()),T(n,1),n.m(t,r)),v[4]?p?(p.p(v,k),k&16&&T(p,1)):(p=xe(v),p.c(),T(p,1),p.m(t,null)):p&&(te(),S(p,1,1,()=>{p=null}),le()),(!a||k&262&&o!==(o="relative group p-1.5 "+v[1]+" flex items-center gap-1 "+v[2]+" "+(v[8]?"rounded-xl":"rounded-2xl")+" text-left"))&&m(t,"class",o)},i(v){a||(T(f),T(c),T(n),T(p),a=!0)},o(v){S(f),S(c),S(n),S(p),a=!1},d(v){v&&(d(e),d(t)),f&&f.d(v),c&&c.d(),g[i].d(),p&&p.d(),_=!1,u()}}}function Ht(s,e,t){let l,i;we(s,ht,I=>t(13,l=I));const n=it("i18n");we(s,n,I=>t(14,i=I));const r=ut();let{className:o="w-60"}=e,{colorClassName:a="bg-white dark:bg-gray-850 border border-gray-50 dark:border-white/5"}=e,{url:_=null}=e,{dismissible:u=!1}=e,{modal:f=!1}=e,{loading:c=!1}=e,{item:h=null}=e,{edit:g=!1}=e,{small:N=!1}=e,{name:p}=e,{type:v}=e,{size:k}=e,V=!1;const K=I=>{try{return decodeURIComponent(I)}catch{return I}};function C(I){V=I,t(12,V)}function L(I){h=I,t(0,h)}const H=()=>{r("dismiss")},J=async()=>{var I,ne;(ne=(I=h==null?void 0:h.file)==null?void 0:I.data)!=null&&ne.content||(h==null?void 0:h.type)==="file"||f?t(12,V=!V):_&&(v==="file"?window.open(`${_}/content`,"_blank").focus():window.open(`${_}`,"_blank").focus()),r("click")};return s.$$set=I=>{"className"in I&&t(1,o=I.className),"colorClassName"in I&&t(2,a=I.colorClassName),"url"in I&&t(3,_=I.url),"dismissible"in I&&t(4,u=I.dismissible),"modal"in I&&t(5,f=I.modal),"loading"in I&&t(6,c=I.loading),"item"in I&&t(0,h=I.item),"edit"in I&&t(7,g=I.edit),"small"in I&&t(8,N=I.small),"name"in I&&t(9,p=I.name),"type"in I&&t(10,v=I.type),"size"in I&&t(11,k=I.size)},[h,o,a,_,u,f,c,g,N,p,v,k,V,l,i,n,r,K,C,L,H,J]}class sl extends et{constructor(e){super(),tt(this,e,Ht,qt,lt,{className:1,colorClassName:2,url:3,dismissible:4,modal:5,loading:6,item:0,edit:7,small:8,name:9,type:10,size:11})}}export{sl as F,nl as a,rl as d,gt as g,il as u};
//# sourceMappingURL=oCD5TT7q.js.map
