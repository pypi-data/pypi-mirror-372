import{S as We,i as Pe,s as Ve,N as Ge,O as Je,a as w,d as u,f as c,g as B,h as _,n as ue,e as g,c as v,q as C,y as je,u as He,r as N,X as Et,T as pt,C as L,l as q,D as O,p as X,E as j,F as H,H as Be,I as Me,K as Ae,v as _t,k as ze,$ as yt,G as oe,t as we,b as ke,j as be,L as ve,J as It,P as ut,w as Dt,U as Ft}from"../chunks/D0xw479y.js";import"../chunks/IHki7fMi.js";import{F as Vt}from"../chunks/CU2r43ac.js";import{t as R}from"../chunks/Bsi2JmMy.js";import{g as xt}from"../chunks/MzUleSW4.js";import{p as Ct}from"../chunks/SfJ_PBSK.js";import{a as Tt,c as St,s as Nt,u as zt,k as Bt}from"../chunks/9KaKOOpG.js";import{F as Mt,u as At,a as Wt,g as Pt}from"../chunks/Bbgb4xy3.js";import{a as Ut,r as Kt,e as Lt,f as Ot,u as jt,h as Ht,g as Rt}from"../chunks/BQbcYuSS.js";import{A as qt,v as Xt}from"../chunks/DYRA2TyL.js";import{S as Gt}from"../chunks/CAm-jMer.js";import{e as gt}from"../chunks/DI3dAAkc.js";import{A as Jt}from"../chunks/Dq2Nr4FG.js";import"../chunks/r3-xQPyV.js";import{b as Yt,c as ft}from"../chunks/BBk-VSVD.js";import{f as Qt}from"../chunks/CBc5jlPY.js";import{D as Zt}from"../chunks/BQZluJa_.js";import{T as dt}from"../chunks/DMhPNgOe.js";import{F as el}from"../chunks/B-gh_62k.js";import"../chunks/I1CDPYOB.js";import{M as tl}from"../chunks/C1SOao-N.js";import{R as ll,V as rl,D as sl}from"../chunks/DYAJic7a.js";import{X as nl}from"../chunks/CbJTeXHO.js";import{M as ol}from"../chunks/BGk_Ro1z.js";import{C as al}from"../chunks/CqIWj6sC.js";import"../chunks/CF4_YkFU.js";import{C as il}from"../chunks/Dz6hIiok.js";import{L as cl}from"../chunks/om28Gawo.js";import{A as fl}from"../chunks/C77KlH7I.js";import{S as ul}from"../chunks/OR3nt-MH.js";function dl(s){let e,t;return{c(){e=Ge("svg"),t=Ge("path"),this.h()},l(l){e=Je(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=w(e);t=Je(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(t).forEach(u),r.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){B(l,e,r),_(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ue,o:ue,d(l){l&&u(e)}}}function hl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=n=>{"className"in n&&t(0,l=n.className),"strokeWidth"in n&&t(1,r=n.strokeWidth)},[l,r]}class ml extends We{constructor(e){super(),Pe(this,e,hl,dl,Ve,{className:0,strokeWidth:1})}}function vt(s,e,t){const l=s.slice();return l[6]=e[t],l}function wt(s){var a,i,f,p,y,I;let e,t,l,r;function n(){return s[4](s[6])}function o(){return s[5](s[6])}return t=new Mt({props:{className:"w-full",colorClassName:(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition",small:s[2],item:s[6],name:((a=s[6])==null?void 0:a.name)??((f=(i=s[6])==null?void 0:i.meta)==null?void 0:f.name),type:"file",size:((p=s[6])==null?void 0:p.size)??((I=(y=s[6])==null?void 0:y.meta)==null?void 0:I.size)??"",loading:s[6].status==="uploading",dismissible:!0}}),t.$on("click",n),t.$on("dismiss",o),{c(){e=g("div"),L(t.$$.fragment),l=q(),this.h()},l(h){e=v(h,"DIV",{class:!0});var E=w(e);O(t.$$.fragment,E),l=X(E),E.forEach(u),this.h()},h(){c(e,"class","mt-1 px-2")},m(h,E){B(h,e,E),j(t,e,null),_(e,l),r=!0},p(h,E){var z,P,U,T,W,F;s=h;const $={};E&3&&($.colorClassName=(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition"),E&4&&($.small=s[2]),E&2&&($.item=s[6]),E&2&&($.name=((z=s[6])==null?void 0:z.name)??((U=(P=s[6])==null?void 0:P.meta)==null?void 0:U.name)),E&2&&($.size=((T=s[6])==null?void 0:T.size)??((F=(W=s[6])==null?void 0:W.meta)==null?void 0:F.size)??""),E&2&&($.loading=s[6].status==="uploading"),t.$set($)},i(h){r||(C(t.$$.fragment,h),r=!0)},o(h){N(t.$$.fragment,h),r=!1},d(h){h&&u(e),H(t)}}}function pl(s){let e,t,l=gt(s[1]),r=[];for(let o=0;o<l.length;o+=1)r[o]=wt(vt(s,l,o));const n=o=>N(r[o],1,1,()=>{r[o]=null});return{c(){e=g("div");for(let o=0;o<r.length;o+=1)r[o].c();this.h()},l(o){e=v(o,"DIV",{class:!0});var a=w(e);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(u),this.h()},h(){c(e,"class","max-h-full flex flex-col w-full")},m(o,a){B(o,e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(o,[a]){if(a&15){l=gt(o[1]);let i;for(i=0;i<l.length;i+=1){const f=vt(o,l,i);r[i]?(r[i].p(f,a),C(r[i],1)):(r[i]=wt(f),r[i].c(),C(r[i],1),r[i].m(e,null))}for(je(),i=l.length;i<r.length;i+=1)n(i);He()}},i(o){if(!t){for(let a=0;a<l.length;a+=1)C(r[a]);t=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)N(r[a]);t=!1},d(o){o&&u(e),Et(r,o)}}}function _l(s,e,t){const l=pt();let{selectedFileId:r=null}=e,{files:n=[]}=e,{small:o=!1}=e;const a=f=>{f.status!=="uploading"&&l("click",f.id)},i=f=>{f.status!=="uploading"&&l("delete",f.id)};return s.$$set=f=>{"selectedFileId"in f&&t(0,r=f.selectedFileId),"files"in f&&t(1,n=f.files),"small"in f&&t(2,o=f.small)},[r,n,o,l,a,i]}class gl extends We{constructor(e){super(),Pe(this,e,_l,pl,Ve,{selectedFileId:0,files:1,small:2})}}function vl(s){let e,t;return{c(){e=Ge("svg"),t=Ge("path"),this.h()},l(l){e=Je(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=w(e);t=Je(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(t).forEach(u),r.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){B(l,e,r),_(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ue,o:ue,d(l){l&&u(e)}}}function wl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=n=>{"className"in n&&t(0,l=n.className),"strokeWidth"in n&&t(1,r=n.strokeWidth)},[l,r]}class kl extends We{constructor(e){super(),Pe(this,e,wl,vl,Ve,{className:0,strokeWidth:1})}}function bl(s){let e,t;return{c(){e=Ge("svg"),t=Ge("path"),this.h()},l(l){e=Je(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=w(e);t=Je(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(t).forEach(u),r.forEach(u),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){B(l,e,r),_(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:ue,o:ue,d(l){l&&u(e)}}}function $l(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=n=>{"className"in n&&t(0,l=n.className),"strokeWidth"in n&&t(1,r=n.strokeWidth)},[l,r]}class yl extends We{constructor(e){super(),Pe(this,e,$l,bl,Ve,{className:0,strokeWidth:1})}}function El(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',l,r;return{c(){e=g("button"),e.innerHTML=t,this.h()},l(n){e=v(n,"BUTTON",{class:!0,"data-svelte-h":!0}),yt(e)!=="svelte-144k6kh"&&(e.innerHTML=t),this.h()},h(){c(e,"class","p-1.5 rounded-xl hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition font-medium text-sm flex items-center space-x-1")},m(n,o){B(n,e,o),l||(r=oe(e,"click",s[9]),l=!0)},p:ue,d(n){n&&u(e),l=!1,r()}}}function Il(s){let e,t;return e=new dt({props:{content:s[2].t("Add Content"),$$slots:{default:[El]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const n={};r&4&&(n.content=l[2].t("Add Content")),r&4098&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function Dl(s){let e,t,l,r=s[2].t("Upload files")+"",n,o;return e=new ml({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=q(),l=g("div"),n=we(r),this.h()},l(a){O(e.$$.fragment,a),t=X(a),l=v(a,"DIV",{class:!0});var i=w(l);n=ke(i,r),i.forEach(u),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),B(a,t,i),B(a,l,i),_(l,n),o=!0},p(a,i){(!o||i&4)&&r!==(r=a[2].t("Upload files")+"")&&be(n,r)},i(a){o||(C(e.$$.fragment,a),o=!0)},o(a){N(e.$$.fragment,a),o=!1},d(a){a&&(u(t),u(l)),H(e,a)}}}function Fl(s){let e,t,l,r=s[2].t("Upload directory")+"",n,o;return e=new el({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=q(),l=g("div"),n=we(r),this.h()},l(a){O(e.$$.fragment,a),t=X(a),l=v(a,"DIV",{class:!0});var i=w(l);n=ke(i,r),i.forEach(u),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),B(a,t,i),B(a,l,i),_(l,n),o=!0},p(a,i){(!o||i&4)&&r!==(r=a[2].t("Upload directory")+"")&&be(n,r)},i(a){o||(C(e.$$.fragment,a),o=!0)},o(a){N(e.$$.fragment,a),o=!1},d(a){a&&(u(t),u(l)),H(e,a)}}}function Vl(s){let e,t,l,r=s[2].t("Sync directory")+"",n,o;return e=new yl({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=q(),l=g("div"),n=we(r),this.h()},l(a){O(e.$$.fragment,a),t=X(a),l=v(a,"DIV",{class:!0});var i=w(l);n=ke(i,r),i.forEach(u),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),B(a,t,i),B(a,l,i),_(l,n),o=!0},p(a,i){(!o||i&4)&&r!==(r=a[2].t("Sync directory")+"")&&be(n,r)},i(a){o||(C(e.$$.fragment,a),o=!0)},o(a){N(e.$$.fragment,a),o=!1},d(a){a&&(u(t),u(l)),H(e,a)}}}function xl(s){let e,t;return e=new ft({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Vl]},$$scope:{ctx:s}}}),e.$on("click",s[7]),{c(){L(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const n={};r&4100&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function Cl(s){let e,t,l,r=s[2].t("Add text content")+"",n,o;return e=new kl({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),t=q(),l=g("div"),n=we(r),this.h()},l(a){O(e.$$.fragment,a),t=X(a),l=v(a,"DIV",{class:!0});var i=w(l);n=ke(i,r),i.forEach(u),this.h()},h(){c(l,"class","flex items-center")},m(a,i){j(e,a,i),B(a,t,i),B(a,l,i),_(l,n),o=!0},p(a,i){(!o||i&4)&&r!==(r=a[2].t("Add text content")+"")&&be(n,r)},i(a){o||(C(e.$$.fragment,a),o=!0)},o(a){N(e.$$.fragment,a),o=!1},d(a){a&&(u(t),u(l)),H(e,a)}}}function Tl(s){let e,t,l,r,n,o,a,i;return e=new ft({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Dl]},$$scope:{ctx:s}}}),e.$on("click",s[5]),l=new ft({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Fl]},$$scope:{ctx:s}}}),l.$on("click",s[6]),n=new dt({props:{content:s[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files."),className:"w-full",$$slots:{default:[xl]},$$scope:{ctx:s}}}),a=new ft({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[Cl]},$$scope:{ctx:s}}}),a.$on("click",s[8]),{c(){L(e.$$.fragment),t=q(),L(l.$$.fragment),r=q(),L(n.$$.fragment),o=q(),L(a.$$.fragment)},l(f){O(e.$$.fragment,f),t=X(f),O(l.$$.fragment,f),r=X(f),O(n.$$.fragment,f),o=X(f),O(a.$$.fragment,f)},m(f,p){j(e,f,p),B(f,t,p),j(l,f,p),B(f,r,p),j(n,f,p),B(f,o,p),j(a,f,p),i=!0},p(f,p){const y={};p&4100&&(y.$$scope={dirty:p,ctx:f}),e.$set(y);const I={};p&4100&&(I.$$scope={dirty:p,ctx:f}),l.$set(I);const h={};p&4&&(h.content=f[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files.")),p&4100&&(h.$$scope={dirty:p,ctx:f}),n.$set(h);const E={};p&4100&&(E.$$scope={dirty:p,ctx:f}),a.$set(E)},i(f){i||(C(e.$$.fragment,f),C(l.$$.fragment,f),C(n.$$.fragment,f),C(a.$$.fragment,f),i=!0)},o(f){N(e.$$.fragment,f),N(l.$$.fragment,f),N(n.$$.fragment,f),N(a.$$.fragment,f),i=!1},d(f){f&&(u(t),u(r),u(o)),H(e,f),H(l,f),H(n,f),H(a,f)}}}function Sl(s){let e,t,l;return t=new Yt({props:{class:"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-sm",sideOffset:4,side:"bottom",align:"end",transition:Qt,$$slots:{default:[Tl]},$$scope:{ctx:s}}}),{c(){e=g("div"),L(t.$$.fragment),this.h()},l(r){e=v(r,"DIV",{slot:!0});var n=w(e);O(t.$$.fragment,n),n.forEach(u),this.h()},h(){c(e,"slot","content")},m(r,n){B(r,e,n),j(t,e,null),l=!0},p(r,n){const o={};n&4100&&(o.$$scope={dirty:n,ctx:r}),t.$set(o)},i(r){l||(C(t.$$.fragment,r),l=!0)},o(r){N(t.$$.fragment,r),l=!1},d(r){r&&u(e),H(t)}}}function Nl(s){let e,t,l;function r(o){s[10](o)}let n={align:"end",$$slots:{content:[Sl],default:[Il]},$$scope:{ctx:s}};return s[1]!==void 0&&(n.show=s[1]),e=new Zt({props:n}),Be.push(()=>Me(e,"show",r)),e.$on("change",s[11]),{c(){L(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,a){j(e,o,a),l=!0},p(o,[a]){const i={};a&4102&&(i.$$scope={dirty:a,ctx:o}),!t&&a&2&&(t=!0,i.show=o[1],Ae(()=>t=!1)),e.$set(i)},i(o){l||(C(e.$$.fragment,o),l=!0)},o(o){N(e.$$.fragment,o),l=!1},d(o){H(e,o)}}}function zl(s,e,t){let l;const r=pt(),n=_t("i18n");ze(s,n,$=>t(2,l=$));let{onClose:o=()=>{}}=e,a=!1;const i=()=>{r("upload",{type:"files"})},f=()=>{r("upload",{type:"directory"})},p=()=>{r("sync",{type:"directory"})},y=()=>{r("upload",{type:"text"})},I=$=>{$.stopPropagation(),t(1,a=!0)};function h($){a=$,t(1,a)}const E=$=>{$.detail===!1&&o()};return s.$$set=$=>{"onClose"in $&&t(0,o=$.onClose)},[o,a,l,r,n,i,f,p,y,I,h,E]}class Bl extends We{constructor(e){super(),Pe(this,e,zl,Nl,Ve,{onClose:0})}}function Ml(s){let e,t;return e=new dt({props:{content:s[4].t("Voice Input"),$$slots:{default:[Wl]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const n={};r&16&&(n.content=l[4].t("Voice Input")),r&65560&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function Al(s){let e,t,l,r;function n(a){s[12](a)}let o={className:"p-1",onCancel:s[10],onConfirm:s[11]};return s[3]!==void 0&&(o.recording=s[3]),t=new rl({props:o}),Be.push(()=>Me(t,"recording",n)),{c(){e=g("div"),L(t.$$.fragment),this.h()},l(a){e=v(a,"DIV",{class:!0});var i=w(e);O(t.$$.fragment,i),i.forEach(u),this.h()},h(){c(e,"class","max-w-full w-full")},m(a,i){B(a,e,i),j(t,e,null),r=!0},p(a,i){const f={};i&8&&(f.onCancel=a[10]),i&12&&(f.onConfirm=a[11]),!l&&i&8&&(l=!0,f.recording=a[3],Ae(()=>l=!1)),t.$set(f)},i(a){r||(C(t.$$.fragment,a),r=!0)},o(a){N(t.$$.fragment,a),r=!1},d(a){a&&u(e),H(t)}}}function Wl(s){let e,t,l,r,n;return t=new ol({props:{className:"size-5"}}),{c(){e=g("button"),L(t.$$.fragment),this.h()},l(o){e=v(o,"BUTTON",{class:!0,type:!0});var a=w(e);O(t.$$.fragment,a),a.forEach(u),this.h()},h(){c(e,"class","p-2 bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-white transition rounded-full"),c(e,"type","button")},m(o,a){B(o,e,a),j(t,e,null),l=!0,r||(n=oe(e,"click",s[13]),r=!0)},p:ue,i(o){l||(C(t.$$.fragment,o),l=!0)},o(o){N(t.$$.fragment,o),l=!1},d(o){o&&u(e),H(t),r=!1,n()}}}function Pl(s){let e,t=s[4].t("Save")+"",l;return{c(){e=g("button"),l=we(t),this.h()},l(r){e=v(r,"BUTTON",{class:!0,type:!0});var n=w(e);l=ke(n,t),n.forEach(u),this.h()},h(){c(e,"class","px-3.5 py-2 bg-black text-white dark:bg-white dark:text-black transition rounded-full"),c(e,"type","submit")},m(r,n){B(r,e,n),_(e,l)},p(r,n){n&16&&t!==(t=r[4].t("Save")+"")&&be(l,t)},d(r){r&&u(e)}}}function Ul(s){let e,t,l,r,n,o,a,i,f,p,y,I,h,E,$,z,P,U,T,W,F,S,ee,m,k,V,M;l=new nl({props:{className:"size-3.5"}});function Q(x){s[9](x)}let te={placeholder:s[4].t("Write something..."),preserveBreaks:!0};s[2]!==void 0&&(te.value=s[2]),$=new ll({props:te}),Be.push(()=>Me($,"value",Q));const se=[Al,Ml],Y=[];function de(x,G){return x[3]?0:1}return W=de(s),F=Y[W]=se[W](s),m=new dt({props:{content:s[4].t("Save"),$$slots:{default:[Pl]},$$scope:{ctx:s}}}),{c(){e=g("div"),t=g("button"),L(l.$$.fragment),r=q(),n=g("div"),o=g("form"),a=g("div"),i=g("div"),f=g("div"),p=g("div"),y=g("input"),h=q(),E=g("div"),L($.$$.fragment),P=q(),U=g("div"),T=g("div"),F.c(),S=q(),ee=g("div"),L(m.$$.fragment),this.h()},l(x){e=v(x,"DIV",{class:!0});var G=w(e);t=v(G,"BUTTON",{class:!0,type:!0});var ce=w(t);O(l.$$.fragment,ce),ce.forEach(u),G.forEach(u),r=X(x),n=v(x,"DIV",{class:!0});var _e=w(n);o=v(_e,"FORM",{class:!0});var le=w(o);a=v(le,"DIV",{class:!0});var $e=w(a);i=v($e,"DIV",{class:!0});var me=w(i);f=v(me,"DIV",{class:!0});var ge=w(f);p=v(ge,"DIV",{class:!0});var he=w(p);y=v(he,"INPUT",{class:!0,type:!0,placeholder:!0}),he.forEach(u),ge.forEach(u),h=X(me),E=v(me,"DIV",{class:!0});var xe=w(E);O($.$$.fragment,xe),xe.forEach(u),me.forEach(u),$e.forEach(u),P=X(le),U=v(le,"DIV",{class:!0});var ne=w(U);T=v(ne,"DIV",{class:!0});var ae=w(T);F.l(ae),ae.forEach(u),S=X(ne),ee=v(ne,"DIV",{class:!0});var Ce=w(ee);O(m.$$.fragment,Ce),Ce.forEach(u),ne.forEach(u),le.forEach(u),_e.forEach(u),this.h()},h(){c(t,"class","self-center dark:text-white"),c(t,"type","button"),c(e,"class","absolute top-0 right-0 p-5"),c(y,"class","w-full text-3xl font-semibold bg-transparent outline-hidden svelte-1vx7r9s"),c(y,"type","text"),c(y,"placeholder",I=s[4].t("Title")),y.required=!0,c(p,"class","w-full"),c(f,"class","shrink-0 w-full flex justify-between items-center"),c(E,"class","flex-1 w-full h-full"),c(i,"class","max-w-3xl py-2 md:py-10 w-full flex flex-col gap-2"),c(a,"class","flex-1 w-full h-full flex justify-center overflow-auto px-5 py-4"),c(T,"class",""),c(ee,"class","shrink-0"),c(U,"class","flex flex-row items-center justify-end text-sm font-medium shrink-0 mt-1 p-4 gap-1.5"),c(o,"class","flex flex-col w-full h-full"),c(n,"class","flex flex-col md:flex-row w-full h-full md:space-x-4 dark:text-gray-200")},m(x,G){B(x,e,G),_(e,t),j(l,t,null),B(x,r,G),B(x,n,G),_(n,o),_(o,a),_(a,i),_(i,f),_(f,p),_(p,y),ve(y,s[1]),_(i,h),_(i,E),j($,E,null),_(o,P),_(o,U),_(U,T),Y[W].m(T,null),_(U,S),_(U,ee),j(m,ee,null),k=!0,V||(M=[oe(t,"click",s[7]),oe(y,"input",s[8]),oe(o,"submit",It(s[14]))],V=!0)},p(x,G){(!k||G&16&&I!==(I=x[4].t("Title")))&&c(y,"placeholder",I),G&2&&y.value!==x[1]&&ve(y,x[1]);const ce={};G&16&&(ce.placeholder=x[4].t("Write something...")),!z&&G&4&&(z=!0,ce.value=x[2],Ae(()=>z=!1)),$.$set(ce);let _e=W;W=de(x),W===_e?Y[W].p(x,G):(je(),N(Y[_e],1,1,()=>{Y[_e]=null}),He(),F=Y[W],F?F.p(x,G):(F=Y[W]=se[W](x),F.c()),C(F,1),F.m(T,null));const le={};G&16&&(le.content=x[4].t("Save")),G&65552&&(le.$$scope={dirty:G,ctx:x}),m.$set(le)},i(x){k||(C(l.$$.fragment,x),C($.$$.fragment,x),C(F),C(m.$$.fragment,x),k=!0)},o(x){N(l.$$.fragment,x),N($.$$.fragment,x),N(F),N(m.$$.fragment,x),k=!1},d(x){x&&(u(e),u(r),u(n)),H(l),H($),Y[W].d(),H(m),V=!1,ut(M)}}}function Kl(s){let e,t,l;function r(o){s[15](o)}let n={size:"full",containerClassName:"",className:"h-full bg-white dark:bg-gray-900",$$slots:{default:[Ul]},$$scope:{ctx:s}};return s[0]!==void 0&&(n.show=s[0]),e=new tl({props:n}),Be.push(()=>Me(e,"show",r)),{c(){L(e.$$.fragment)},l(o){O(e.$$.fragment,o)},m(o,a){j(e,o,a),l=!0},p(o,[a]){const i={};a&65567&&(i.$$scope={dirty:a,ctx:o}),!t&&a&1&&(t=!0,i.show=o[0],Ae(()=>t=!1)),e.$set(i)},i(o){l||(C(e.$$.fragment,o),l=!0)},o(o){N(e.$$.fragment,o),l=!1},d(o){H(e,o)}}}function Ll(s,e,t){let l;const r=_t("i18n");ze(s,r,T=>t(4,l=T));const n=pt();let{show:o=!1}=e,a="Untitled",i="",f=!1;const p=()=>{t(0,o=!1)};function y(){a=this.value,t(1,a)}function I(T){i=T,t(2,i)}const h=()=>{t(3,f=!1)},E=T=>{const{text:W,filename:F}=T;t(2,i=`${i}${W} `),t(3,f=!1)};function $(T){f=T,t(3,f)}const z=async()=>{try{let T=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(W){return R.error(l.t("Permission denied when accessing microphone: {{error}}",{error:W})),null});T&&(t(3,f=!0),T.getTracks().forEach(F=>F.stop())),T=null}catch{R.error(l.t("Permission denied when accessing microphone"))}},P=()=>{if(a.trim()===""||i.trim()===""){R.error(l.t("Please fill in all fields.")),t(1,a=a.trim()),t(2,i=i.trim());return}n("submit",{name:a,content:i}),t(0,o=!1),t(1,a=""),t(2,i="")};function U(T){o=T,t(0,o)}return s.$$set=T=>{"show"in T&&t(0,o=T.show)},[o,a,i,f,l,r,n,p,y,I,h,E,$,z,P,U]}class Ol extends We{constructor(e){super(),Pe(this,e,Ll,Kl,Ve,{show:0})}}function kt(s){let e,t,l,r,n,o,a;return n=new Jt({props:{$$slots:{default:[jl]},$$scope:{ctx:s}}}),{c(){e=g("div"),t=g("div"),l=g("div"),r=g("div"),L(n.$$.fragment),this.h()},l(i){e=v(i,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var f=w(e);t=v(f,"DIV",{class:!0});var p=w(t);l=v(p,"DIV",{class:!0});var y=w(l);r=v(y,"DIV",{class:!0});var I=w(r);O(n.$$.fragment,I),I.forEach(u),y.forEach(u),p.forEach(u),f.forEach(u),this.h()},h(){c(r,"class","max-w-md"),c(l,"class","m-auto pt-64 flex flex-col justify-center"),c(t,"class","absolute w-full h-full backdrop-blur-sm bg-gray-800/40 flex justify-center"),c(e,"class",o="fixed "+(s[14]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),c(e,"id","dropzone"),c(e,"role","region"),c(e,"aria-label","Drag and Drop Container")},m(i,f){B(i,e,f),_(e,t),_(t,l),_(l,r),j(n,r,null),a=!0},p(i,f){const p={};f[2]&512&&(p.$$scope={dirty:f,ctx:i}),n.$set(p),(!a||f[0]&16384&&o!==(o="fixed "+(i[14]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&c(e,"class",o)},i(i){a||(C(n.$$.fragment,i),a=!0)},o(i){N(n.$$.fragment,i),a=!1},d(i){i&&u(e),H(n)}}}function jl(s){let e,t="Drop any files here to add to my documents";return{c(){e=g("div"),e.textContent=t,this.h()},l(l){e=v(l,"DIV",{class:!0,"data-svelte-h":!0}),yt(e)!=="svelte-19eg75t"&&(e.textContent=t),this.h()},h(){c(e,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(l,r){B(l,e,r)},p:ue,d(l){l&&u(e)}}}function Hl(s){let e,t;return e=new Gt({props:{className:"size-5"}}),{c(){L(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p:ue,i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function Rl(s){var nt,ot,at,it;let e,t,l,r,n,o,a,i,f,p,y,I,h,E,$,z,P,U=s[13].t("Access")+"",T,W,F,S,ee,m,k,V,M,Q,te,se,Y,de,x,G,ce,_e,le,$e,me,ge,he,xe,ne,ae,Ce,ye,Ye,et;function ht(b){s[34](b)}function mt(b){s[35](b)}let Qe={allowPublic:((at=(ot=(nt=s[15])==null?void 0:nt.permissions)==null?void 0:ot.sharing)==null?void 0:at.public_knowledge)||((it=s[15])==null?void 0:it.role)==="admin",onChange:s[33],accessRoles:["read","write"]};s[7]!==void 0&&(Qe.show=s[7]),s[0].access_control!==void 0&&(Qe.accessControl=s[0].access_control),e=new fl({props:Qe}),Be.push(()=>Me(e,"show",ht)),Be.push(()=>Me(e,"accessControl",mt)),$=new cl({props:{strokeWidth:"2.5",className:"size-3.5"}});const tt=[Xl,ql],Ee=[];function lt(b,J){return b[3]?0:!b[3]&&b[2]!==null?1:-1}~(V=lt(s))&&(M=Ee[V]=tt[V](s)),ce=new ul({}),he=new Bl({}),he.$on("upload",s[50]),he.$on("sync",s[51]);const rt=[Zl,Ql],Ie=[];function st(b,J){return b[9].length>0?0:1}return ne=st(s),ae=Ie[ne]=rt[ne](s),{c(){L(e.$$.fragment),r=q(),n=g("div"),o=g("div"),a=g("div"),i=g("div"),f=g("div"),p=g("input"),I=q(),h=g("div"),E=g("button"),L($.$$.fragment),z=q(),P=g("div"),T=we(U),W=q(),F=g("div"),S=g("input"),m=q(),k=g("div"),M&&M.c(),Q=q(),te=g("div"),se=g("div"),Y=g("div"),de=g("div"),x=g("div"),G=g("div"),L(ce.$$.fragment),_e=q(),le=g("input"),me=q(),ge=g("div"),L(he.$$.fragment),xe=q(),ae.c(),this.h()},l(b){O(e.$$.fragment,b),r=X(b),n=v(b,"DIV",{class:!0});var J=w(n);o=v(J,"DIV",{class:!0});var Te=w(o);a=v(Te,"DIV",{class:!0});var De=w(a);i=v(De,"DIV",{class:!0});var Fe=w(i);f=v(Fe,"DIV",{class:!0});var Ue=w(f);p=v(Ue,"INPUT",{type:!0,class:!0,placeholder:!0}),Ue.forEach(u),I=X(Fe),h=v(Fe,"DIV",{class:!0});var Ke=w(h);E=v(Ke,"BUTTON",{class:!0,type:!0});var Se=w(E);O($.$$.fragment,Se),z=X(Se),P=v(Se,"DIV",{class:!0});var Le=w(P);T=ke(Le,U),Le.forEach(u),Se.forEach(u),Ke.forEach(u),Fe.forEach(u),W=X(De),F=v(De,"DIV",{class:!0});var ct=w(F);S=v(ct,"INPUT",{type:!0,class:!0,placeholder:!0}),ct.forEach(u),De.forEach(u),Te.forEach(u),J.forEach(u),m=X(b),k=v(b,"DIV",{class:!0});var Re=w(k);M&&M.l(Re),Q=X(Re),te=v(Re,"DIV",{class:!0});var d=w(te);se=v(d,"DIV",{class:!0});var D=w(se);Y=v(D,"DIV",{class:!0});var A=w(Y);de=v(A,"DIV",{class:!0});var K=w(de);x=v(K,"DIV",{class:!0});var Z=w(x);G=v(Z,"DIV",{class:!0});var ie=w(G);O(ce.$$.fragment,ie),ie.forEach(u),_e=X(Z),le=v(Z,"INPUT",{class:!0,placeholder:!0}),me=X(Z),ge=v(Z,"DIV",{});var fe=w(ge);O(he.$$.fragment,fe),fe.forEach(u),Z.forEach(u),K.forEach(u),xe=X(A),ae.l(A),A.forEach(u),D.forEach(u),d.forEach(u),Re.forEach(u),this.h()},h(){c(p,"type","text"),c(p,"class","text-left w-full font-semibold text-2xl font-primary bg-transparent outline-hidden"),c(p,"placeholder",y=s[13].t("Knowledge Name")),c(f,"class","w-full"),c(P,"class","text-sm font-medium shrink-0"),c(E,"class","bg-gray-50 hover:bg-gray-100 text-black dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white transition px-2 py-1 rounded-full flex gap-1 items-center"),c(E,"type","button"),c(h,"class","self-center shrink-0"),c(i,"class","flex items-center justify-between w-full px-0.5 mb-1"),c(S,"type","text"),c(S,"class","text-left text-xs w-full text-gray-500 bg-transparent outline-hidden"),c(S,"placeholder",ee=s[13].t("Knowledge Description")),c(F,"class","flex w-full px-1"),c(a,"class","flex-1"),c(o,"class","flex w-full"),c(n,"class","w-full mb-2.5"),c(G,"class","self-center ml-1 mr-3"),c(le,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent"),c(le,"placeholder",$e=s[13].t("Search Collection")),c(x,"class","flex mb-0.5"),c(de,"class","px-3"),c(Y,"class","w-full h-full flex flex-col"),c(se,"class","flex flex-col w-full space-x-2 rounded-lg h-full"),c(te,"class",Ce=(s[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"),c(k,"class","flex flex-row flex-1 h-full max-h-full pb-2.5 gap-3")},m(b,J){j(e,b,J),B(b,r,J),B(b,n,J),_(n,o),_(o,a),_(a,i),_(i,f),_(f,p),ve(p,s[0].name),_(i,I),_(i,h),_(h,E),j($,E,null),_(E,z),_(E,P),_(P,T),_(a,W),_(a,F),_(F,S),ve(S,s[0].description),B(b,m,J),B(b,k,J),~V&&Ee[V].m(k,null),_(k,Q),_(k,te),_(te,se),_(se,Y),_(Y,de),_(de,x),_(x,G),j(ce,G,null),_(x,_e),_(x,le),ve(le,s[1]),_(x,me),_(x,ge),j(he,ge,null),_(Y,xe),Ie[ne].m(Y,null),ye=!0,Ye||(et=[oe(p,"input",s[36]),oe(p,"input",s[37]),oe(E,"click",s[38]),oe(S,"input",s[39]),oe(S,"input",s[40]),oe(le,"input",s[48]),oe(le,"focus",s[49])],Ye=!0)},p(b,J){var Ue,Ke,Se,Le;const Te={};J[0]&32768&&(Te.allowPublic=((Se=(Ke=(Ue=b[15])==null?void 0:Ue.permissions)==null?void 0:Ke.sharing)==null?void 0:Se.public_knowledge)||((Le=b[15])==null?void 0:Le.role)==="admin"),!t&&J[0]&128&&(t=!0,Te.show=b[7],Ae(()=>t=!1)),!l&&J[0]&1&&(l=!0,Te.accessControl=b[0].access_control,Ae(()=>l=!1)),e.$set(Te),(!ye||J[0]&8192&&y!==(y=b[13].t("Knowledge Name")))&&c(p,"placeholder",y),J[0]&1&&p.value!==b[0].name&&ve(p,b[0].name),(!ye||J[0]&8192)&&U!==(U=b[13].t("Access")+"")&&be(T,U),(!ye||J[0]&8192&&ee!==(ee=b[13].t("Knowledge Description")))&&c(S,"placeholder",ee),J[0]&1&&S.value!==b[0].description&&ve(S,b[0].description);let De=V;V=lt(b),V===De?~V&&Ee[V].p(b,J):(M&&(je(),N(Ee[De],1,1,()=>{Ee[De]=null}),He()),~V?(M=Ee[V],M?M.p(b,J):(M=Ee[V]=tt[V](b),M.c()),C(M,1),M.m(k,Q)):M=null),(!ye||J[0]&8192&&$e!==($e=b[13].t("Search Collection")))&&c(le,"placeholder",$e),J[0]&2&&le.value!==b[1]&&ve(le,b[1]);let Fe=ne;ne=st(b),ne===Fe?Ie[ne].p(b,J):(je(),N(Ie[Fe],1,1,()=>{Ie[Fe]=null}),He(),ae=Ie[ne],ae?ae.p(b,J):(ae=Ie[ne]=rt[ne](b),ae.c()),C(ae,1),ae.m(Y,null)),(!ye||J[0]&8&&Ce!==(Ce=(b[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"))&&c(te,"class",Ce)},i(b){ye||(C(e.$$.fragment,b),C($.$$.fragment,b),C(M),C(ce.$$.fragment,b),C(he.$$.fragment,b),C(ae),ye=!0)},o(b){N(e.$$.fragment,b),N($.$$.fragment,b),N(M),N(ce.$$.fragment,b),N(he.$$.fragment,b),N(ae),ye=!1},d(b){b&&(u(r),u(n),u(m),u(k)),H(e,b),H($),~V&&Ee[V].d(),H(ce),H(he),Ie[ne].d(),Ye=!1,ut(et)}}}function ql(s){let e,t;return e=new sl({props:{className:"h-full",show:s[2]!==null,onClose:s[47],$$slots:{default:[Gl]},$$scope:{ctx:s}}}),{c(){L(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p(l,r){const n={};r[0]&4&&(n.show=l[2]!==null),r[0]&4&&(n.onClose=l[47]),r[0]&11268|r[2]&512&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}function Xl(s){let e,t,l,r;const n=[Yl,Jl],o=[];function a(i,f){return i[10]?0:1}return t=a(s),l=o[t]=n[t](s),{c(){e=g("div"),l.c(),this.h()},l(i){e=v(i,"DIV",{class:!0});var f=w(e);l.l(f),f.forEach(u),this.h()},h(){c(e,"class","flex-1 flex justify-start w-full h-full max-h-full")},m(i,f){B(i,e,f),o[t].m(e,null),r=!0},p(i,f){let p=t;t=a(i),t===p?o[t].p(i,f):(je(),N(o[p],1,1,()=>{o[p]=null}),He(),l=o[t],l?l.p(i,f):(l=o[t]=n[t](i),l.c()),C(l,1),l.m(e,null))},i(i){r||(C(l),r=!0)},o(i){N(l),r=!1},d(i){i&&u(e),o[t].d()}}}function bt(s){let e,t,l,r;return{c(){e=g("textarea"),this.h()},l(n){e=v(n,"TEXTAREA",{class:!0,placeholder:!0}),w(e).forEach(u),this.h()},h(){c(e,"class","w-full h-full outline-none resize-none"),c(e,"placeholder",t=s[13].t("Add content here"))},m(n,o){B(n,e,o),ve(e,s[11]),l||(r=oe(e,"input",s[46]),l=!0)},p(n,o){o[0]&8192&&t!==(t=n[13].t("Add content here"))&&c(e,"placeholder",t),o[0]&2048&&ve(e,n[11])},d(n){n&&u(e),l=!1,r()}}}function Gl(s){var ee,m;let e,t,l,r,n,o,a,i,f=((m=(ee=s[10])==null?void 0:ee.meta)==null?void 0:m.name)+"",p,y,I,h,E=s[13].t("Save")+"",$,z,P,U=s[10].id,T,W,F;o=new il({props:{strokeWidth:"2.5"}});let S=bt(s);return{c(){e=g("div"),t=g("div"),l=g("div"),r=g("div"),n=g("button"),L(o.$$.fragment),a=q(),i=g("div"),p=we(f),y=q(),I=g("div"),h=g("button"),$=we(E),z=q(),P=g("div"),S.c(),this.h()},l(k){e=v(k,"DIV",{class:!0});var V=w(e);t=v(V,"DIV",{class:!0});var M=w(t);l=v(M,"DIV",{class:!0});var Q=w(l);r=v(Q,"DIV",{class:!0});var te=w(r);n=v(te,"BUTTON",{class:!0});var se=w(n);O(o.$$.fragment,se),se.forEach(u),te.forEach(u),a=X(Q),i=v(Q,"DIV",{class:!0});var Y=w(i);p=ke(Y,f),Y.forEach(u),y=X(Q),I=v(Q,"DIV",{});var de=w(I);h=v(de,"BUTTON",{class:!0});var x=w(h);$=ke(x,E),x.forEach(u),de.forEach(u),Q.forEach(u),z=X(M),P=v(M,"DIV",{class:!0});var G=w(P);S.l(G),G.forEach(u),M.forEach(u),V.forEach(u),this.h()},h(){c(n,"class","w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850"),c(r,"class","mr-2"),c(i,"class","flex-1 text-xl line-clamp-1"),c(h,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(l,"class","shrink-0 mt-1 mb-2 flex items-center"),c(P,"class","flex-1 w-full h-full max-h-full py-2.5 px-3.5 rounded-lg text-sm bg-transparent overflow-y-auto scrollbar-hidden"),c(t,"class","flex flex-col w-full h-full max-h-full"),c(e,"class","flex flex-col justify-start h-full max-h-full p-2")},m(k,V){B(k,e,V),_(e,t),_(t,l),_(l,r),_(r,n),j(o,n,null),_(l,a),_(l,i),_(i,p),_(l,y),_(l,I),_(I,h),_(h,$),_(t,z),_(t,P),S.m(P,null),T=!0,W||(F=[oe(n,"click",s[44]),oe(h,"click",s[45])],W=!0)},p(k,V){var M,Q;(!T||V[0]&1024)&&f!==(f=((Q=(M=k[10])==null?void 0:M.meta)==null?void 0:Q.name)+"")&&be(p,f),(!T||V[0]&8192)&&E!==(E=k[13].t("Save")+"")&&be($,E),V[0]&1024&&Ve(U,U=k[10].id)?(S.d(1),S=bt(k),S.c(),S.m(P,null)):S.p(k,V)},i(k){T||(C(o.$$.fragment,k),T=!0)},o(k){N(o.$$.fragment,k),T=!1},d(k){k&&u(e),H(o),S.d(k),W=!1,ut(F)}}}function Jl(s){let e,t,l=s[13].t("Drag and drop a file to upload or select a file to view")+"",r;return{c(){e=g("div"),t=g("div"),r=we(l),this.h()},l(n){e=v(n,"DIV",{class:!0});var o=w(e);t=v(o,"DIV",{class:!0});var a=w(t);r=ke(a,l),a.forEach(u),o.forEach(u),this.h()},h(){c(t,"class","m-auto text-xs text-center text-gray-200 dark:text-gray-700"),c(e,"class","h-full flex w-full")},m(n,o){B(n,e,o),_(e,t),_(t,r)},p(n,o){o[0]&8192&&l!==(l=n[13].t("Drag and drop a file to upload or select a file to view")+"")&&be(r,l)},i:ue,o:ue,d(n){n&&u(e)}}}function Yl(s){var S,ee;let e,t,l,r,n,o=s[25]((ee=(S=s[10])==null?void 0:S.meta)==null?void 0:ee.name)+"",a,i,f,p,y,I=s[13].t("Save")+"",h,E,$,z=s[10].id,P,U,T,W=!tr,F=$t(s);return{c(){e=g("div"),t=g("div"),l=q(),r=g("div"),n=g("a"),a=we(o),f=q(),p=g("div"),y=g("button"),h=we(I),E=q(),$=g("div"),F.c(),this.h()},l(m){e=v(m,"DIV",{class:!0});var k=w(e);t=v(k,"DIV",{class:!0});var V=w(t);l=X(V),r=v(V,"DIV",{class:!0});var M=w(r);n=v(M,"A",{class:!0,href:!0,target:!0});var Q=w(n);a=ke(Q,o),Q.forEach(u),M.forEach(u),f=X(V),p=v(V,"DIV",{});var te=w(p);y=v(te,"BUTTON",{class:!0});var se=w(y);h=ke(se,I),se.forEach(u),te.forEach(u),V.forEach(u),E=X(k),$=v(k,"DIV",{class:!0});var Y=w($);F.l(Y),Y.forEach(u),k.forEach(u),this.h()},h(){c(n,"class","hover:text-gray-500 dark:hover:text-gray-100 hover:underline grow line-clamp-1"),c(n,"href",i=s[10].id?`/api/v1/files/${s[10].id}/content`:"#"),c(n,"target","_blank"),c(r,"class","flex-1 text-xl font-medium"),c(y,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(t,"class","shrink-0 mb-2 flex items-center"),c($,"class","flex-1 w-full h-full max-h-full text-sm bg-transparent outline-hidden overflow-y-auto scrollbar-hidden"),c(e,"class","flex flex-col w-full h-full max-h-full")},m(m,k){B(m,e,k),_(e,t),_(t,l),_(t,r),_(r,n),_(n,a),_(t,f),_(t,p),_(p,y),_(y,h),_(e,E),_(e,$),F.m($,null),P=!0,U||(T=oe(y,"click",s[42]),U=!0)},p(m,k){var V,M;(!P||k[0]&1024)&&o!==(o=m[25]((M=(V=m[10])==null?void 0:V.meta)==null?void 0:M.name)+"")&&be(a,o),(!P||k[0]&1024&&i!==(i=m[10].id?`/api/v1/files/${m[10].id}/content`:"#"))&&c(n,"href",i),(!P||k[0]&8192)&&I!==(I=m[13].t("Save")+"")&&be(h,I),k[0]&1024&&Ve(z,z=m[10].id)?(F.d(1),F=$t(m),F.c(),F.m($,null)):F.p(m,k)},i(m){P||(C(W),P=!0)},o(m){N(W),P=!1},d(m){m&&u(e),F.d(m),U=!1,T()}}}function $t(s){let e,t,l,r;return{c(){e=g("textarea"),this.h()},l(n){e=v(n,"TEXTAREA",{class:!0,placeholder:!0}),w(e).forEach(u),this.h()},h(){c(e,"class","w-full h-full outline-none resize-none"),c(e,"placeholder",t=s[13].t("Add content here"))},m(n,o){B(n,e,o),ve(e,s[11]),l||(r=oe(e,"input",s[43]),l=!0)},p(n,o){o[0]&8192&&t!==(t=n[13].t("Add content here"))&&c(e,"placeholder",t),o[0]&2048&&ve(e,n[11])},d(n){n&&u(e),l=!1,r()}}}function Ql(s){let e,t,l=s[13].t("No content found")+"",r;return{c(){e=g("div"),t=g("div"),r=we(l),this.h()},l(n){e=v(n,"DIV",{class:!0});var o=w(e);t=v(o,"DIV",{});var a=w(t);r=ke(a,l),a.forEach(u),o.forEach(u),this.h()},h(){c(e,"class","my-3 flex flex-col justify-center text-center text-gray-500 text-xs")},m(n,o){B(n,e,o),_(e,t),_(t,r)},p(n,o){o[0]&8192&&l!==(l=n[13].t("No content found")+"")&&be(r,l)},i:ue,o:ue,d(n){n&&u(e)}}}function Zl(s){let e,t,l;return t=new gl({props:{small:!0,files:s[9],selectedFileId:s[2]}}),t.$on("click",s[52]),t.$on("delete",s[53]),{c(){e=g("div"),L(t.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var n=w(e);O(t.$$.fragment,n),n.forEach(u),this.h()},h(){c(e,"class","flex overflow-y-auto h-full w-full scrollbar-hidden text-xs")},m(r,n){B(r,e,n),j(t,e,null),l=!0},p(r,n){const o={};n[0]&512&&(o.files=r[9]),n[0]&4&&(o.selectedFileId=r[2]),t.$set(o)},i(r){l||(C(t.$$.fragment,r),l=!0)},o(r){N(t.$$.fragment,r),l=!1},d(r){r&&u(e),H(t)}}}function er(s){let e,t,l,r,n,o,a,i,f,p,y,I,h,E,$,z=s[12]&&kt(s);function P(m){s[27](m)}let U={message:s[13].t("This will reset the knowledge base and sync all files. Do you wish to continue?")};s[6]!==void 0&&(U.show=s[6]),t=new al({props:U}),Be.push(()=>Me(t,"show",P)),t.$on("confirm",s[28]);function T(m){s[29](m)}let W={};s[5]!==void 0&&(W.show=s[5]),n=new Ol({props:W}),Be.push(()=>Me(n,"show",T)),n.$on("submit",s[30]);const F=[Rl,Hl],S=[];function ee(m,k){return m[4]&&m[0]?0:1}return y=ee(s),I=S[y]=F[y](s),{c(){z&&z.c(),e=q(),L(t.$$.fragment),r=q(),L(n.$$.fragment),a=q(),i=g("input"),f=q(),p=g("div"),I.c(),this.h()},l(m){z&&z.l(m),e=X(m),O(t.$$.fragment,m),r=X(m),O(n.$$.fragment,m),a=X(m),i=v(m,"INPUT",{id:!0,type:!0}),f=X(m),p=v(m,"DIV",{class:!0,id:!0});var k=w(p);I.l(k),k.forEach(u),this.h()},h(){c(i,"id","files-input"),c(i,"type","file"),i.multiple=!0,i.hidden=!0,c(p,"class","flex flex-col w-full h-full translate-y-1"),c(p,"id","collection-container")},m(m,k){z&&z.m(m,k),B(m,e,k),j(t,m,k),B(m,r,k),j(n,m,k),B(m,a,k),B(m,i,k),B(m,f,k),B(m,p,k),S[y].m(p,null),h=!0,E||($=[oe(i,"change",s[31]),oe(i,"change",s[32])],E=!0)},p(m,k){m[12]?z?(z.p(m,k),k[0]&4096&&C(z,1)):(z=kt(m),z.c(),C(z,1),z.m(e.parentNode,e)):z&&(je(),N(z,1,1,()=>{z=null}),He());const V={};k[0]&8192&&(V.message=m[13].t("This will reset the knowledge base and sync all files. Do you wish to continue?")),!l&&k[0]&64&&(l=!0,V.show=m[6],Ae(()=>l=!1)),t.$set(V);const M={};!o&&k[0]&32&&(o=!0,M.show=m[5],Ae(()=>o=!1)),n.$set(M);let Q=y;y=ee(m),y===Q?S[y].p(m,k):(je(),N(S[Q],1,1,()=>{S[Q]=null}),He(),I=S[y],I?I.p(m,k):(I=S[y]=F[y](m),I.c()),C(I,1),I.m(p,null))},i(m){h||(C(z),C(t.$$.fragment,m),C(n.$$.fragment,m),C(I),h=!0)},o(m){N(z),N(t.$$.fragment,m),N(n.$$.fragment,m),N(I),h=!1},d(m){m&&(u(e),u(r),u(a),u(i),u(f),u(p)),z&&z.d(m),H(t,m),H(n,m),S[y].d(),E=!1,ut($)}}}let tr=!0;function lr(s,e,t){let l,r,n,o,a,i;ze(s,Ct,d=>t(57,l=d)),ze(s,Tt,d=>t(58,n=d)),ze(s,St,d=>t(59,o=d)),ze(s,Nt,d=>t(14,a=d)),ze(s,zt,d=>t(15,i=d));const f=_t("i18n");ze(s,f,d=>t(13,r=d));let p=!0,y,I=null,h=null,E="",$=!1,z=!1,P=!1,U=null,T=[],W=null,F=null,S="",ee=new Map,m=null,k=null,V,M=!1;const Q=(d,D)=>{const A=new Blob([D],{type:"text/plain"}),K=qt(A,`${d}.txt`);return K},te=async d=>{var K,Z,ie,fe,re,pe,Ne,Ze;const D=Xt(),A={type:"file",file:"",id:null,url:"",name:d.name,size:d.size,status:"uploading",error:"",itemId:D};if(A.size==0)return R.error(r.t("You cannot upload an empty file.")),null;if((((K=o==null?void 0:o.file)==null?void 0:K.max_size)??null)!==null&&d.size>(((Z=o==null?void 0:o.file)==null?void 0:Z.max_size)??0)*1024*1024){d.size,(((ie=o==null?void 0:o.file)==null?void 0:ie.max_size)??0)*1024*1024,R.error(r.t("File size should not exceed {{maxSize}} MB.",{maxSize:(fe=o==null?void 0:o.file)==null?void 0:fe.max_size}));return}t(0,h.files=[...h.files??[],A],h);try{let qe=null;(d.type.startsWith("audio/")||d.type.startsWith("video/"))&&((pe=(re=n==null?void 0:n.audio)==null?void 0:re.stt)!=null&&pe.language)&&(qe={language:(Ze=(Ne=n==null?void 0:n.audio)==null?void 0:Ne.stt)==null?void 0:Ze.language});const Oe=await At(localStorage.token,d,qe).catch(Xe=>(R.error(`${Xe}`),null));Oe?(Oe.error&&(console.warn("File upload warning:",Oe.error),R.warning(Oe.error)),t(0,h.files=h.files.map(Xe=>(Xe.itemId===D&&(Xe.id=Oe.id),delete Xe.itemId,Xe)),h),await _e(Oe.id)):R.error(r.t("Failed to upload file."))}catch(qe){R.error(`${qe}`)}},se=async()=>{const d="showDirectoryPicker"in window;try{d?await de():await x()}catch(D){G(D)}},Y=d=>d.split("/").some(D=>D.startsWith(".")),de=async()=>{const d=await window.showDirectoryPicker();let D=0,A=0;const K=()=>{const fe=A/D*100;R.info(r.t("Upload Progress: {{uploadedFiles}}/{{totalFiles}} ({{percentage}}%)",{uploadedFiles:A,totalFiles:D,percentage:fe.toFixed(2)}))};async function Z(fe){for await(const re of fe.values())re.name.startsWith(".")||(re.kind==="file"?D++:re.kind==="directory"&&(re.name.startsWith(".")||await Z(re)))}async function ie(fe,re=""){for await(const pe of fe.values()){if(pe.name.startsWith("."))continue;const Ne=re?`${re}/${pe.name}`:pe.name;if(!Y(Ne))if(pe.kind==="file"){const Ze=await pe.getFile(),qe=new File([Ze],Ne,{type:Ze.type});await te(qe),A++,K()}else pe.kind==="directory"&&(pe.name.startsWith(".")||await ie(pe,Ne))}}await Z(d),K(),D>0&&await ie(d)},x=async()=>new Promise((d,D)=>{const A=document.createElement("input");A.type="file",A.webkitdirectory=!0,A.directory=!0,A.multiple=!0,A.style.display="none",document.body.appendChild(A),A.onchange=async()=>{try{const K=Array.from(A.files).filter(re=>!Y(re.webkitRelativePath));let Z=K.length,ie=0;const fe=()=>{const re=ie/Z*100;R.info(r.t("Upload Progress: {{uploadedFiles}}/{{totalFiles}} ({{percentage}}%)",{uploadedFiles:ie,totalFiles:Z,percentage:re.toFixed(2)}))};fe();for(const re of K)if(!re.name.startsWith(".")){const pe=re.webkitRelativePath||re.name,Ne=new File([re],pe,{type:re.type});await te(Ne),ie++,fe()}document.body.removeChild(A),d()}catch(K){D(K)}},A.onerror=K=>{document.body.removeChild(A),D(K)},A.click()}),G=d=>{d.name==="AbortError"?R.info(r.t("Directory selection was cancelled")):(R.error(r.t("Error accessing directory")),console.error("Directory access error:",d))},ce=async()=>{if(((h==null?void 0:h.files)??[]).length>0){const d=await Kt(localStorage.token,I).catch(D=>{R.error(`${D}`)});d&&(t(0,h=d),R.success(r.t("Knowledge reset successfully.")),se())}else se()},_e=async d=>{const D=await Lt(localStorage.token,I,d).catch(A=>(R.error(`${A}`),null));D?(t(0,h=D),R.success(r.t("File added successfully."))):(R.error(r.t("Failed to add file.")),t(0,h.files=h.files.filter(A=>A.id!==d),h))},le=async d=>{try{const D=await Ot(localStorage.token,I,d);D&&(t(0,h=D),R.success(r.t("File removed successfully.")))}catch(D){console.error("Error in deleteFileHandler:",D),R.error(`${D}`)}},$e=async()=>{const d=W.id,D=S;ee.delete(d);const A=Wt(localStorage.token,d,D).catch(Z=>{R.error(`${Z}`)}),K=await jt(localStorage.token,I,d).catch(Z=>{R.error(`${Z}`)});A&&K&&(t(0,h=K),R.success(r.t("File content updated successfully.")))},me=()=>{k&&clearTimeout(k),k=setTimeout(async()=>{if(h.name.trim()===""||h.description.trim()===""){R.error(r.t("Please fill in all fields."));return}await Ht(localStorage.token,I,{...h,name:h.name,description:h.description,access_control:h.access_control}).catch(D=>{R.error(`${D}`)})&&(R.success(r.t("Knowledge updated successfully")),Bt.set(await Rt(localStorage.token)))},1e3)},ge=async d=>{d.matches?t(3,p=!0):t(3,p=!1)},he=async d=>{try{if(t(10,W=d),ee.has(d.id)){t(11,S=ee.get(d.id));return}const D=await Pt(localStorage.token,d.id);D?(t(11,S=D.data.content),ee.set(d.id,D.data.content)):R.error(r.t("No content found in file."))}catch{R.error(r.t("Failed to load file content."))}},xe=d=>{var D,A;d.preventDefault(),(A=(D=d.dataTransfer)==null?void 0:D.types)!=null&&A.includes("Files")?t(12,M=!0):t(12,M=!1)},ne=()=>{t(12,M=!1)},ae=async d=>{var D,A,K,Z;if(d.preventDefault(),t(12,M=!1),(A=(D=d.dataTransfer)==null?void 0:D.types)!=null&&A.includes("Files")&&(K=d.dataTransfer)!=null&&K.files){const ie=(Z=d.dataTransfer)==null?void 0:Z.files;if(ie&&ie.length>0)for(const fe of ie)await te(fe);else R.error(r.t("File not found."))}};Dt(async()=>{V=window.matchMedia("(min-width: 1024px)"),V.addEventListener("change",ge),ge(V);const d=document.getElementById("collection-container");p&&Math.floor(300/d.clientWidth*100),new ResizeObserver(Z=>{for(let ie of Z)ie.contentRect.width}).observe(d),t(4,I=l.params.id);const A=await Ut(localStorage.token,I).catch(Z=>(R.error(`${Z}`),null));A?t(0,h=A):xt("/workspace/knowledge");const K=document.querySelector("body");K==null||K.addEventListener("dragover",xe),K==null||K.addEventListener("drop",ae),K==null||K.addEventListener("dragleave",ne)}),Ft(()=>{V==null||V.removeEventListener("change",ge);const d=document.querySelector("body");d==null||d.removeEventListener("dragover",xe),d==null||d.removeEventListener("drop",ae),d==null||d.removeEventListener("dragleave",ne)});const Ce=d=>{try{return decodeURIComponent(d)}catch{return d}};function ye(d){z=d,t(6,z)}const Ye=()=>{ce()};function et(d){$=d,t(5,$)}const ht=d=>{const D=Q(d.detail.name,d.detail.content);te(D)};function mt(){U=this.files,t(8,U)}const Qe=async()=>{if(U&&U.length>0){for(const D of U)await te(D);t(8,U=null);const d=document.getElementById("files-input");d&&(d.value="")}else R.error(r.t("File not found."))},tt=()=>{me()};function Ee(d){P=d,t(7,P)}function lt(d){s.$$.not_equal(h.access_control,d)&&(h.access_control=d,t(0,h))}function rt(){h.name=this.value,t(0,h)}const Ie=()=>{me()},st=()=>{t(7,P=!0)};function nt(){h.description=this.value,t(0,h)}const ot=()=>{me()},at=()=>{y.expand()},it=()=>{$e()};function b(){S=this.value,t(11,S)}const J=()=>{t(2,F=null)},Te=()=>{$e()};function De(){S=this.value,t(11,S)}const Fe=()=>{t(2,F=null)};function Ue(){E=this.value,t(1,E)}const Ke=()=>{t(2,F=null)},Se=d=>{d.detail.type==="directory"?se():d.detail.type==="text"?t(5,$=!0):document.getElementById("files-input").click()},Le=d=>{t(6,z=!0)},ct=d=>{t(2,F=F===d.detail?null:d.detail)},Re=d=>{d.detail,t(2,F=null),le(d.detail)};return s.$$.update=()=>{if(s.$$.dirty[0]&1&&h&&h.files&&t(26,m=new Vt(h.files,{keys:["meta.name","meta.description"]})),s.$$.dirty[0]&67108867&&m&&t(9,T=E?m.search(E).map(d=>d.item):(h==null?void 0:h.files)??[]),s.$$.dirty[0]&5)if(F){const d=((h==null?void 0:h.files)??[]).find(D=>D.id===F);d?he(d):t(10,W=null)}else t(10,W=null)},[h,E,F,p,I,$,z,P,U,T,W,S,M,r,a,i,f,y,Q,te,se,ce,le,$e,me,Ce,m,ye,Ye,et,ht,mt,Qe,tt,Ee,lt,rt,Ie,st,nt,ot,at,it,b,J,Te,De,Fe,Ue,Ke,Se,Le,ct,Re]}class rr extends We{constructor(e){super(),Pe(this,e,lr,er,Ve,{},null,[-1,-1,-1])}}function sr(s){let e,t;return e=new rr({}),{c(){L(e.$$.fragment)},l(l){O(e.$$.fragment,l)},m(l,r){j(e,l,r),t=!0},p:ue,i(l){t||(C(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){H(e,l)}}}class Br extends We{constructor(e){super(),Pe(this,e,null,sr,Ve,{})}}export{Br as component};
//# sourceMappingURL=31.BaZqPUkp.js.map
