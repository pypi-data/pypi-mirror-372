// conditionals.mdl - Test conditional logic and control flow
pack "conditionals" description "Conditional logic test" pack_format 82;

namespace "test";

function "basic_conditionals" {
    var num player_level = 15;
    var str player_class = "warrior";
    var num experience = 75;
    
    if "score @s player_level >= 10" {
        if "score @s player_class == 'warrior'" {
            if "score @s experience >= 50" {
                say Advanced warrior detected!;
                effect give @s minecraft:strength 10 2;
                effect give @s minecraft:glowing 10 0;
            } else {
                say Novice warrior;
                effect give @s minecraft:haste 10 0;
            }
        } else if "score @s player_class == 'mage'" {
            say Advanced mage detected!;
            effect give @s minecraft:night_vision 10 0;
            effect give @s minecraft:levitation 5 0;
        } else {
            say Unknown advanced class;
            effect give @s minecraft:glowing 10 0;
        }
    } else if "score @s player_level >= 5" {
        say Intermediate player;
        effect give @s minecraft:speed 10 0;
    } else {
        say Beginner player;
        effect give @s minecraft:jump_boost 10 0;
    }
}

function "entity_conditionals" {
    if "entity @s[type=minecraft:player,nbt={SelectedItem:{id:'minecraft:diamond_sword'}}]" {
        say Diamond sword detected!;
        effect give @s minecraft:strength 10 1;
        effect give @s minecraft:glowing 10 0;
    } else if "entity @s[type=minecraft:player,nbt={SelectedItem:{id:'minecraft:golden_sword'}}]" {
        say Golden sword detected!;
        effect give @s minecraft:speed 10 1;
        effect give @s minecraft:night_vision 10 0;
    } else if "entity @s[type=minecraft:player,nbt={SelectedItem:{id:'minecraft:bow'}}]" {
        say Bow detected!;
        effect give @s minecraft:jump_boost 10 1;
    } else if "entity @s[type=minecraft:player]" {
        say Player without special weapon;
        effect give @s minecraft:haste 5 0;
    } else {
        say No player found;
    }
}

function "complex_conditionals" {
    var num health = 15;
    var num hunger = 8;
    var str biome = "plains";
    
    if "score @s health < 10" {
        if "score @s hunger < 5" {
            say Player is in critical condition!;
            effect give @s minecraft:regeneration 10 1;
            effect give @s minecraft:saturation 5 0;
        } else {
            say Player is low on health;
            effect give @s minecraft:regeneration 5 0;
        }
    } else if "score @s hunger < 5" {
        say Player is hungry;
        effect give @s minecraft:saturation 10 0;
    } else if "score @s biome == 'desert'" {
        say Player in desert - hydration needed;
        effect give @s minecraft:water_breathing 10 0;
    } else if "score @s biome == 'nether'" {
        say Player in nether - fire resistance;
        effect give @s minecraft:fire_resistance 10 0;
    } else {
        say Player is healthy;
        effect give @s minecraft:speed 5 0;
    }
}

on_tick "test:basic_conditionals";
on_tick "test:entity_conditionals";
on_tick "test:complex_conditionals";
