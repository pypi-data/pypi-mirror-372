# Auto-Pytester  
> *â€œå…ˆå†™å‡½æ•°ç­¾å + ä¸€è¡Œæ³¨é‡Š â†’ è‡ªåŠ¨ç”Ÿæˆå®Œæ•´å•å…ƒæµ‹è¯•â€*

Auto-Pytester å¸®ä½ æŠŠ **TDD çš„å‰ç½®æˆæœ¬é™åˆ°é›¶**ï¼š  
åªéœ€åœ¨å‡½æ•°/æ–¹æ³•é‡Œè´´ä¸Šå¸¦æœ‰ç¤ºä¾‹çš„ docstringï¼Œå³å¯ä¸€é”®ç”Ÿæˆ `pytest`/`unittest` ç”¨ä¾‹æ–‡ä»¶ï¼Œä¿æŒä»£ç ä¸Žæµ‹è¯•åŒæ­¥æ¼”è¿›ã€‚

---

## âœ¨ ç‰¹æ€§
- ðŸš€ **é›¶é…ç½®**â€ƒå¤åˆ¶ç²˜è´´å³å¯ç”¨  
- ðŸ§ª æ”¯æŒ **pytest** / **unittest** åŒæ ¼å¼  
- ðŸ“¦ æ”¯æŒ **YAML / JSON / TOML** ç¤ºä¾‹è¯­æ³•  
- ðŸ æ”¯æŒ **åŒæ­¥ & å¼‚æ­¥** å‡½æ•°  
- ðŸ—ï¸ æ”¯æŒ **åµŒå¥—ç±» / ç»§æ‰¿ / æ³›åž‹**  
- ðŸ“ æ”¯æŒ **monorepo** å¤šåŒ…æ‰«æ  

---

## ðŸš€ 30 ç§’ä¸Šæ‰‹

### 1. å®‰è£…
```bash
pip install auto-pytester
```
ðŸ› ï¸ CLI å‚è€ƒ
```bash
tester@Paradox2024:~/app$ auto-pytest --help
usage: auto-pytest [-h] [-o OUTPUT_DIR] [-i INCLUDE] [-e EXCLUDE] [-I] [-v] project_dir

Auto generate pytest cases from docstring YAML examples

positional arguments:
  project_dir           Root of the Python project

options:
  -h, --help            show this help message and exit
  -o OUTPUT_DIR, --output-dir OUTPUT_DIR
                        Output dir for tests (default: tests-auto)
  -i INCLUDE, --include INCLUDE
                        Glob to include (repeatable)
  -e EXCLUDE, --exclude EXCLUDE
                        Glob to exclude (repeatable)
  -I, --inplace         Generate test_xxx.py next to sources
  -v, --verbose         Show verbose output
```


### 2. ç¼–å†™æ‚¨çš„ä¸šåŠ¡ä»£ç ï¼Œå½“ç„¶åªéœ€è¦ç©ºå£³å­å’Œç¤ºä¾‹æ•°æ®å³å¯
#### ä¸šåŠ¡ä»£ç ç¤ºä¾‹
```python
# /bin/bash

class Calc:
    @classmethod
    def add(cls, a: int, b: int) -> int:
        """
        åŠ æ³•

        Examples:
            >>> yaml
            doc: "expect 2 + 3 == 5"
            input:
              a: 2
              b: 3
            output: 5
            <<<
        """
        return 0
```

### 3. ç”Ÿæˆæµ‹è¯•
```bash
tester@Paradox2024:~/app$ auto-pytest -o testcases -v .
[INFO] Scanning ~/app
[scan_project] elapsed: 0.001ms
[render_tests] elapsed: 0.622ms
[INFO] Generated 7 test cases in ~/app/testcases
```
#### ç”Ÿæˆçš„æµ‹è¯•æ–‡ä»¶å¦‚ä¸‹
```python
"""
Tests for class `Calc`
Generated by auto-pytester â€” DO NOT EDIT MANUALLY.
"""
import pytest

from src.calc import Calc


@pytest.fixture
def calc():
    return Calc()

def test_Calc_div_0(calc):
    result = calc.div(**{'a': 6, 'b': 3})
    assert result == 2

def test_Calc_div_1(calc):
    with pytest.raises(ValueError):
        result = calc.div(**{'a': 1, 'b': 0})
```

### 4. æ‰§è¡Œæµ‹è¯•
```bash
tester@Paradox2024:~/app$ pytest testcases/ -q 
======================= test session starts =======================
platform linux -- Python 3.11.13, pytest-8.4.1, pluggy-1.6.0 -- ~/app/.venv/bin/python3
cachedir: .pytest_cache
rootdir: ~/app
configfile: pytest.ini
plugins: allure-pytest-2.13.5, assume-2.4.3
collected 6 items

tests-auto/test_Calc.py::test_Calc_add_0 PASSED
tests-auto/test_Calc.py::test_Calc_add_1 PASSED
tests-auto/test_Calc.py::test_Calc_div_2 PASSED
tests-auto/test_Calc.py::test_Calc_div_3 PASSED
tests-auto/test_cx.py::test_cx_0 PASSED
tests-auto/test_cx.py::test_cx_1 PASSED

======================= 6 passed in 0.02s =======================
``` 

---

### ðŸ“œ License

#### MIT Â© EveryOne

è®©æµ‹è¯•æˆä¸ºå‰¯äº§å“ï¼Œä¸“æ³¨ä¸šåŠ¡ã€‚Happy TDD! ðŸŽ‰
