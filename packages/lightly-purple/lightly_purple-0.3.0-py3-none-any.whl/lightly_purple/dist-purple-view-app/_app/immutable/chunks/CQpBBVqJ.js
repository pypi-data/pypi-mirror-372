import"./CWj6FrbW.js";import{p as q,f as O,s as C,a as G,g as t,d as f,t as H,c as D,r as R,P as Y,F as Z}from"./Bzf_CGVu.js";import{t as I,a as S,n as J}from"./DudhA4Qw.js";import{i as W,s as $,a as X}from"./CMIc6HKa.js";import{p,b as tt}from"./BYXJJYwp.js";import{l as et,m as ot,n as at,o as P,p as nt,s as o}from"./CEsXP70Q.js";import"./C2RVOhm1.js";import"./DVrGeszw.js";import"./zR0aG0nj.js";import"./JOxghoy7.js";import"./69_IOA4Y.js";import"./BoQGZ29z.js";import"./BzArsHZA.js";import{s as rt}from"./CF3MLdDH.js";var it=I("<!> <!>",1),st=I("<!> <!>",1);function Lt(v,e){var T,M;q(e,!0);const[m,c]=$(),h=()=>X(u,"$taskMap",m),d=()=>X(x,"$customLabelColorsStore",m),l=p(e,"showLabel",3,!1),{taskMap:u}=et(),{customLabelColorsStore:x}=nt(),{annotation_task_id:n}=e.annotation,r=f(()=>e.annotation.annotation_label.annotation_label_name),{x:g,y:s,width:i,height:y}=ot(e.annotation),b=(M=(T=e.annotation)==null?void 0:T.instance_segmentation_details)==null?void 0:M.segmentation_mask,_=f(()=>n&&h().has(n)?h().get(n).is_prediction:!1),k=f(()=>P(t(r),1)),B=f(()=>{var a;return((a=d()[t(r)])==null?void 0:a.color)??P(t(r),1).color}),w=f(()=>{var a;return((a=d()[t(r)])==null?void 0:a.color)??P(t(r),.4).color}),L=f(()=>{var a;return((a=d()[t(r)])==null?void 0:a.alpha)*.4});var F=st(),A=O(F);{var K=a=>{gt(a,{coordinates:[g,s],get colorText(){return t(k)},get label(){return t(r)},get isPrediction(){return t(_)}})};W(A,a=>{l()&&a(K)})}var N=C(A,2);{var Q=a=>{var z=it(),E=O(z);at(E,{segmentation:b,get width(){return e.imageWidth},get colorFill(){return t(w)},get opacity(){return t(L)}});var V=C(E,2);j(V,{bbox:[g,s,i,y],get label(){return t(r)},get colorStroke(){return t(B)},get colorFill(){return t(w)},get opacity(){return t(L)},get isPrediction(){return t(_)}}),S(a,z)},U=a=>{j(a,{bbox:[g,s,i,y],get label(){return t(r)},get colorStroke(){return t(B)},get colorFill(){return t(w)},get opacity(){return t(L)},get isPrediction(){return t(_)}})};W(N,a=>{b?a(Q):a(U,!1)})}S(v,F),G(),c()}var lt=J('<rect vector-effect="non-scaling-stroke" stroke-width="2" pointer-events="all" data-testid="annotation_box"></rect>');function j(v,e){const m=p(e,"isPrediction",3,!1),[c,h,d,l]=e.bbox,u=m()?"5,5":"none",x=m()?.8:1;var n=lt();o(n,"x",c),o(n,"y",h),o(n,"width",d),o(n,"height",l),o(n,"stroke-opacity",x),o(n,"stroke-dasharray",u),H(()=>{o(n,"stroke",e.colorStroke),o(n,"fill",e.colorFill),o(n,"fill-opacity",e.opacity),o(n,"aria-label",e.label)}),S(v,n)}var ct=J('<g class="unscaled"><rect></rect><text class="annotation-label-text" data-testid="svg-annotation-text"> </text></g>');function gt(v,e){q(e,!0);const m=p(e,"fontSize",3,14),c=p(e,"isPrediction",3,!1),[h,d]=e.coordinates;let l=Y(null);const u=f(()=>t(l)?(t(l).textContent=c()?`${e.label} (pred)`:e.label,t(l).getBBox()):{width:0,height:0}),x=5,n=c()?.8:1,r=c()?"italic":"normal";var g=ct();o(g,"transform",`translate(${h}, ${d})`);var s=D(g);o(s,"opacity",n);var i=C(s);o(i,"x",x),o(i,"y",-5),o(i,"font-style",r);var y=D(i,!0);R(i),tt(i,b=>Z(l,b),()=>t(l)),R(g),H(()=>{var b,_,k;o(s,"y",-((b=t(u))==null?void 0:b.height)),o(s,"width",((_=t(u))==null?void 0:_.width)+x*2),o(s,"height",(k=t(u))==null?void 0:k.height),o(s,"fill",e.colorText.color),o(i,"fill",e.colorText.contrastColor),o(i,"font-size",m()),rt(y,c()?`${e.label} (pred)`:e.label)}),S(v,g),G()}export{Lt as S};
