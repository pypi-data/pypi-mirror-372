import{a as y}from"./CZ9iRrNd.js";import{w as s,g as z}from"./B9NWxkPv.js";function r(a,i){const l=s((()=>{if(typeof sessionStorage>"u")return i;try{const n=sessionStorage.getItem(a);if(n)return JSON.parse(n)}catch(n){console.warn(`Failed to read ${a} from sessionStorage`,n)}return i})());return l.subscribe(n=>{if(!(typeof sessionStorage>"u"))try{sessionStorage.setItem(a,JSON.stringify(n))}catch(m){console.warn(`Failed to write ${a} to sessionStorage`,m)}}),l}const g=s("samples"),d=s(new Set),c=s(new Set),u=s(new Set),w=s(0),h=s(!1),A=s(void 0),p=s(null),C=r("purpleView_sampleSize",{width:200,height:200}),_=r("purpleView_metadata_bounds",{}),b=r("purpleView_metadata_values",{}),M=r("purpleView_metadata_info",[]),E=s(void 0),x=s([]),S=s({}),V=s(!1),B=a=>{V.set(a)},G=()=>({tags:E,textEmbedding:A,setTextEmbedding:e=>{A.set(e)},selectedSampleIds:d,selectedSampleAnnotationCropIds:c,selectedAnnotationFilterIds:u,annotationsTotalCount:w,datasetVersions:S,hideAnnotations:h,classifiers:x,classifierSamples:p,setClassifierSamples:e=>{p.set(e)},clearClassifierSamples:()=>{p.set(null)},metadataBounds:_,metadataValues:b,metadataInfo:M,updateMetadataValues:e=>{b.set(e)},updateMetadataBounds:e=>{_.set(e)},updateMetadataInfo:e=>{M.set(e)},setHideAnnotations:e=>{h.set(e)},getDatasetVersion:async e=>{const t=z(S);if(t[e])return t[e];const{data:o}=await y(e);if(o!=null&&o.created_at){const f=new Date(o.created_at).getTime().toString();return S.update(v=>({...v,[e]:f})),f}return""},toggleSampleSelection:e=>{d.update(t=>(t.has(e)?t.delete(e):t.add(e),t))},clearSelectedSamples:()=>{d.update(e=>(e.clear(),e))},toggleSampleAnnotationCropSelection:e=>{c.update(t=>(t.has(e)?t.delete(e):t.add(e),t))},clearSelectedSampleAnnotationCrops:()=>{c.update(e=>(e.clear(),e))},lastGridType:g,setLastGridType:e=>{g.set(e)},setSelectedAnnotationFilterIds:e=>{u.update(t=>(t.has(e)?t.delete(e):t.add(e),t))},clearSelectedAnnotationFilterIds:()=>{u.update(e=>(e.clear(),e))},setAnnotationsTotalCount:e=>{w.set(e)},sampleSize:C,updateSampleSize:e=>{C.set({width:e,height:e})},isEditingMode:V,setIsEditingMode:B});export{r as a,G as u};
