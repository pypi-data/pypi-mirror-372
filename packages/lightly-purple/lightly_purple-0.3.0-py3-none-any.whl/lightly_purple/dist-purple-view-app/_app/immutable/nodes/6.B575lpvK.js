import{l as ke}from"../chunks/DutOwosB.js";import"../chunks/CWj6FrbW.js";import{p as Z,f as k,n as Pe,a as F,$ as re,c as t,g as v,d as B,s as r,r as a,t as U}from"../chunks/Bzf_CGVu.js";import{c as G,a as l,t as u,n as $e}from"../chunks/DudhA4Qw.js";import{i as j,a as O,s as Le}from"../chunks/CMIc6HKa.js";import{s as ee}from"../chunks/DTwAVzRw.js";import{I as Te,u as Ae,d as ie,B as Me,C as ce,z as fe,S as Ne,e as Y,s as Ce,a as pe,D as ne,E as He,c as Ie,i as de,o as De,k as Ee}from"../chunks/CEsXP70Q.js";import{u as ze}from"../chunks/C2RVOhm1.js";import{g as me}from"../chunks/DVrGeszw.js";import"../chunks/zR0aG0nj.js";import"../chunks/JOxghoy7.js";import"../chunks/69_IOA4Y.js";import"../chunks/BoQGZ29z.js";import"../chunks/BzArsHZA.js";import{s as R}from"../chunks/CF3MLdDH.js";import{e as ve}from"../chunks/CGiUvFS7.js";import{g as Be}from"../chunks/B9NWxkPv.js";import{S as ue}from"../chunks/DDZ-yUNZ.js";import{r as X}from"../chunks/H7C68rOM.js";import{S as Ge}from"../chunks/CQpBBVqJ.js";import{Z as je,g as Ke,S as Oe}from"../chunks/DKl5Supe.js";import{T as Re}from"../chunks/BVsK4-M8.js";import{s as Ue,r as Ze}from"../chunks/BYXJJYwp.js";function Fe(i){const e=new Map;return i.forEach(s=>{const n=s.annotation_label.annotation_label_name;n&&e.set(n,(e.get(n)||0)+1)}),e}function We(i,e){Z(e,!0);let s=Ze(e,["$$slots","$$events","$$legacy"]);Te(i,Ue({name:"move-left"},()=>s,{iconNode:[["path",{d:"M6 8L2 12L6 16"}],["path",{d:"M2 12H22"}]],children:(_,g)=>{var c=G(),h=k(c);ee(h,()=>e.children??Pe),l(_,c)},$$slots:{default:!0}})),F()}var qe=$e("<image></image><g></g>",1),Je=u('<div class="h-full w-full overflow-hidden"><div class="sample relative h-full w-full"><div class="absolute right-4 top-2 z-30"><!></div> <!> <!></div></div>'),Qe=u('<div class="flex h-full w-full flex-col space-y-4"><div class="flex w-full items-center space-x-4"><!> <h2 data-testid="sample-filename" class="text-xl font-semibold tracking-tight"> </h2></div> <!> <div class="flex min-h-0 flex-1 gap-4"><div class="flex-1"><!></div> <div class="relative w-[375px]"><!></div></div></div>');function Ve(i,e){Z(e,!0);const[s,n]=Le(),_=()=>O(P,"$lastGridType",s),g=()=>O(x,"$selectedSampleIds",s),c=()=>O(b,"$isHidden",s),h=()=>O(H,"$showAnnotationTextLabelsStore",s),{lastGridType:P,selectedSampleIds:x,toggleSampleSelection:M}=ze(),{isHidden:b,handleKeyEvent:S}=Ae(),{settingsStore:N}=ie(),p=()=>{var o;(o=e.sample)!=null&&o.dataset_id?me(X.toSamples(e.sample.dataset_id)):me("/")},$=o=>{switch(o.key){case Be(N).key_go_back:p();break;case" ":o.preventDefault(),M(e.sample.sample_id);break}S(o)};let C=B(()=>Ke(e.sample.sample_id));const f=B(()=>e.sample.annotations.filter(o=>o.annotation_type!=="classification")),{showAnnotationTextLabelsStore:H}=ie();var I=Qe();ve("keydown",re,$),ve("keyup",re,S);var d=t(I),L=t(d);const w=B(()=>_()==="samples"?X.toSamples(e.sample.dataset_id):X.toAnnotations(e.sample.dataset_id));Me(L,{variant:"outline",get href(){return v(w)},"data-testid":"sample-details-back-button",children:(o,ge)=>{We(o,{})},$$slots:{default:!0}});var m=r(L,2),y=t(m);a(m),a(d);var T=r(d,2);ue(T,{class:"mb-4 bg-border-hard"});var A=r(T,2),D=t(A),W=t(D);ce(W,{className:"h-full",children:(o,ge)=>{fe(o,{className:"h-full",children:(he,ra)=>{var q=Je(),te=t(q),J=t(te),xe=t(J);const be=B(()=>g().has(e.sample.sample_id));Ne(xe,{onSelect:()=>M(e.sample.sample_id),get isSelected(){return v(be)}}),a(J);var se=r(J,2);{var Se=E=>{var Q=G(),K=k(Q);ee(K,()=>e.children),l(E,Q)};j(se,E=>{e.children&&E(Se)})}var we=r(se,2);je(we,{get width(){return e.sample.width},get height(){return e.sample.height},children:(E,Q)=>{var K=qe(),le=k(K),V=r(le);let oe;Y(V,21,()=>v(f),z=>z.annotation_id,(z,ye)=>{Ge(z,{get annotation(){return v(ye)},get showLabel(){return h()},get imageWidth(){return e.sample.width}})}),a(V),U(z=>{Ce(le,"href",v(C)),oe=pe(V,0,"",null,oe,z)},[()=>({invisible:c()})]),l(E,K)},$$slots:{default:!0}}),a(te),a(q),l(he,q)},$$slots:{default:!0}})},$$slots:{default:!0}}),a(D);var ae=r(D,2),_e=t(ae);sa(_e,{get sample(){return e.sample}}),a(ae),a(A),a(I),U(()=>R(y,`Filename: "${e.sample.file_name??""}"`)),l(i,I),F(),n()}var Xe=u("<div> </div>"),Ye=u('<div class="flex gap-1"></div>'),ea=u('<div class="flex items-center justify-between gap-2 rounded-sm bg-card px-5 py-2"><div class="text-sm" data-testid="sample-details-pannel-annotation-name"> </div> <div class="text-sm" data-testid="sample-details-pannel-annotation-count"> </div></div>'),aa=u('<div class="flex flex-col gap-2"></div>'),ta=u('<div class="flex-none"><div class="mb-2.5 text-lg font-semibold">Sample details</div> <!></div> <div class="flex h-full min-h-0 flex-col space-y-2 overflow-y-auto dark:[color-scheme:dark]"><!> <!> <!></div>',1);function sa(i,e){Z(e,!0);const s=e.sample.tags,n=B(()=>Fe(e.sample.annotations));ce(i,{className:"h-full",children:(_,g)=>{fe(_,{className:"h-full flex flex-col",children:(c,h)=>{var P=ta(),x=k(P),M=r(t(x),2);ue(M,{class:"mb-4 bg-border-hard"}),a(x);var b=r(x,2),S=t(b);{var N=f=>{ne(f,{title:"Tags",icon:Re,children:(H,I)=>{var d=Ye();Y(d,21,()=>s,de,(L,w)=>{var m=Xe(),y=t(m,!0);a(m),U(T=>{pe(m,1,T),R(y,v(w).name)},[()=>He(Ie("inline rounded-lg bg-card px-2 py-2 text-xs"))]),l(L,m)}),a(d),l(H,d)}})};j(S,f=>{s.length>0&&f(N)})}var p=r(S,2);{var $=f=>{ne(f,{title:"Annotations",children:(H,I)=>{var d=aa();Y(d,21,()=>v(n),de,(L,w)=>{var m=ea(),y=t(m),T=t(y,!0);a(y);var A=r(y,2),D=t(A);a(A),a(m),U(W=>{R(T,v(w)[0]),Ee(A,`color: ${W??""};`),R(D,`(${v(w)[1]??""})`)},[()=>De(v(w)[0]).color]),l(L,m)}),a(d),l(H,d)}})};j(p,f=>{v(n).size>0&&f($)})}var C=r(p,2);Oe(C,{get sample(){return e.sample}}),a(b),l(c,P)},$$slots:{default:!0}})},$$slots:{default:!0}}),F()}const la=async({params:{dataset_id:i,sampleId:e}})=>({sample:await ke({sample_id:e,dataset_id:i})}),Ma=Object.freeze(Object.defineProperty({__proto__:null,load:la},Symbol.toStringTag,{value:"Module"}));var oa=u('<div class="flex h-full w-full space-x-4 px-4 pb-4" data-testid="sample-details"><div class="h-full w-full space-y-6 rounded-[1vw] bg-card p-4"><!></div></div>');function Na(i,e){Z(e,!0);var s=G(),n=k(s);{var _=g=>{var c=oa(),h=t(c),P=t(h);Ve(P,{get sample(){return e.data.sample.data},children:(x,M)=>{var b=G(),S=k(b);{var N=p=>{var $=G(),C=k($);ee(C,()=>e.children),l(p,$)};j(S,p=>{e.children&&p(N)})}l(x,b)},$$slots:{default:!0}}),a(h),a(c),l(g,c)};j(n,g=>{e.data.sample.data&&g(_)})}l(i,s),F()}export{Na as component,Ma as universal};
