FROM stewartlab/skimgpt:latest


# Install the latest released skimgpt by querying PyPI and pinning that version at build time
RUN LATEST_VERSION=$(python -c "import json,urllib.request;print(json.load(urllib.request.urlopen('https://pypi.org/pypi/skimgpt/json'))['info']['version'])") \
    && pip install --no-cache-dir --index-url https://pypi.org/simple/ --no-deps "skimgpt==${LATEST_VERSION}"

# Verify the installation
RUN skimgpt-relevance --help || echo "Entry point verification failed, but package may still work"

# Default command (override as needed)
CMD ["skimgpt-relevance", "--help"] 