{
  "$defs": {
    "BashTask": {
      "description": "Bash Task model that will represent to Airflow BashOperator object.",
      "properties": {
        "desc": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "A Airflow task description",
          "title": "Desc"
        },
        "upstream": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "description": "A list of upstream task name or only task name of this task.",
          "title": "Upstream"
        },
        "task": {
          "description": "A task name.",
          "title": "Task",
          "type": "string"
        },
        "type": {
          "const": "task",
          "default": "task",
          "title": "Type",
          "type": "string"
        },
        "op": {
          "const": "bash",
          "description": "An operator type for bash model.",
          "title": "Op",
          "type": "string"
        },
        "trigger_rule": {
          "$ref": "#/$defs/TriggerRule",
          "default": "all_success",
          "description": "Task trigger rule. Read more detail, https://www.astronomer.io/blog/understanding-airflow-trigger-rules-comprehensive-visual-guide/"
        },
        "inlets": {
          "items": {
            "additionalProperties": true,
            "type": "object"
          },
          "title": "Inlets",
          "type": "array"
        },
        "outlets": {
          "items": {
            "additionalProperties": true,
            "type": "object"
          },
          "title": "Outlets",
          "type": "array"
        },
        "command": {
          "description": "A bash command or bash file",
          "title": "Command",
          "type": "string"
        },
        "env": {
          "anyOf": [
            {
              "additionalProperties": {
                "type": "string"
              },
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "A mapping of environment variable.",
          "title": "Env"
        },
        "append_env": {
          "default": false,
          "title": "Append Env",
          "type": "boolean"
        },
        "output_encoding": {
          "default": "utf-8",
          "description": "Output encoding of bash command.",
          "title": "Output Encoding",
          "type": "string"
        },
        "skip_on_exit_code": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "items": {
                "type": "integer"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": 99,
          "title": "Skip On Exit Code"
        },
        "cwd": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Cwd"
        }
      },
      "required": [
        "task",
        "op",
        "command"
      ],
      "title": "BashTask",
      "type": "object"
    },
    "CustomOperatorTask": {
      "properties": {
        "desc": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "A Airflow task description",
          "title": "Desc"
        },
        "upstream": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "description": "A list of upstream task name or only task name of this task.",
          "title": "Upstream"
        },
        "task": {
          "description": "A task name.",
          "title": "Task",
          "type": "string"
        },
        "type": {
          "const": "task",
          "default": "task",
          "title": "Type",
          "type": "string"
        },
        "op": {
          "const": "operator",
          "title": "Op",
          "type": "string"
        },
        "trigger_rule": {
          "$ref": "#/$defs/TriggerRule",
          "default": "all_success",
          "description": "Task trigger rule. Read more detail, https://www.astronomer.io/blog/understanding-airflow-trigger-rules-comprehensive-visual-guide/"
        },
        "inlets": {
          "items": {
            "additionalProperties": true,
            "type": "object"
          },
          "title": "Inlets",
          "type": "array"
        },
        "outlets": {
          "items": {
            "additionalProperties": true,
            "type": "object"
          },
          "title": "Outlets",
          "type": "array"
        },
        "from": {
          "description": "An Airflow operator that import from external provider.",
          "title": "From",
          "type": "string"
        },
        "params": {
          "additionalProperties": true,
          "description": "A mapping of parameters that want to pass to Airflow Operator",
          "title": "Params",
          "type": "object"
        }
      },
      "required": [
        "task",
        "op",
        "from"
      ],
      "title": "CustomOperatorTask",
      "type": "object"
    },
    "CustomTask": {
      "description": "Custom Task model.",
      "properties": {
        "desc": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "A Airflow task description",
          "title": "Desc"
        },
        "upstream": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "description": "A list of upstream task name or only task name of this task.",
          "title": "Upstream"
        },
        "task": {
          "description": "A task name.",
          "title": "Task",
          "type": "string"
        },
        "type": {
          "const": "task",
          "default": "task",
          "title": "Type",
          "type": "string"
        },
        "op": {
          "const": "custom_task",
          "title": "Op",
          "type": "string"
        },
        "trigger_rule": {
          "$ref": "#/$defs/TriggerRule",
          "default": "all_success",
          "description": "Task trigger rule. Read more detail, https://www.astronomer.io/blog/understanding-airflow-trigger-rules-comprehensive-visual-guide/"
        },
        "inlets": {
          "items": {
            "additionalProperties": true,
            "type": "object"
          },
          "title": "Inlets",
          "type": "array"
        },
        "outlets": {
          "items": {
            "additionalProperties": true,
            "type": "object"
          },
          "title": "Outlets",
          "type": "array"
        },
        "uses": {
          "description": "A custom building function name.",
          "title": "Uses",
          "type": "string"
        },
        "params": {
          "additionalProperties": true,
          "description": "A mapping of parameters that want to pass to Custom Task model before build.",
          "title": "Params",
          "type": "object"
        }
      },
      "required": [
        "task",
        "op",
        "uses"
      ],
      "title": "CustomTask",
      "type": "object"
    },
    "DebugTask": {
      "description": "Debug Task model that inherit from Operator task.",
      "properties": {
        "desc": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "A Airflow task description",
          "title": "Desc"
        },
        "upstream": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "description": "A list of upstream task name or only task name of this task.",
          "title": "Upstream"
        },
        "task": {
          "description": "A task name.",
          "title": "Task",
          "type": "string"
        },
        "type": {
          "const": "task",
          "default": "task",
          "title": "Type",
          "type": "string"
        },
        "op": {
          "const": "debug",
          "title": "Op",
          "type": "string"
        },
        "trigger_rule": {
          "$ref": "#/$defs/TriggerRule",
          "default": "all_success",
          "description": "Task trigger rule. Read more detail, https://www.astronomer.io/blog/understanding-airflow-trigger-rules-comprehensive-visual-guide/"
        },
        "inlets": {
          "items": {
            "additionalProperties": true,
            "type": "object"
          },
          "title": "Inlets",
          "type": "array"
        },
        "outlets": {
          "items": {
            "additionalProperties": true,
            "type": "object"
          },
          "title": "Outlets",
          "type": "array"
        },
        "params": {
          "additionalProperties": true,
          "description": "A parameters that want to logging.",
          "title": "Params",
          "type": "object"
        }
      },
      "required": [
        "task",
        "op"
      ],
      "title": "DebugTask",
      "type": "object"
    },
    "DefaultArgs": {
      "description": "Default Args Model that will use with the `default_args` field.",
      "properties": {
        "owner": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Owner"
        },
        "depends_on_past": {
          "default": false,
          "title": "Depends On Past",
          "type": "boolean"
        },
        "retries": {
          "default": 1,
          "description": "A retry count.",
          "title": "Retries",
          "type": "integer"
        },
        "retry_delay": {
          "anyOf": [
            {
              "additionalProperties": {
                "type": "integer"
              },
              "type": "object"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Retry Delay"
        }
      },
      "title": "DefaultArgs",
      "type": "object"
    },
    "EmptyTask": {
      "description": "Empty Task model.",
      "properties": {
        "desc": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "A Airflow task description",
          "title": "Desc"
        },
        "upstream": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "description": "A list of upstream task name or only task name of this task.",
          "title": "Upstream"
        },
        "task": {
          "description": "A task name.",
          "title": "Task",
          "type": "string"
        },
        "type": {
          "const": "task",
          "default": "task",
          "title": "Type",
          "type": "string"
        },
        "op": {
          "const": "empty",
          "title": "Op",
          "type": "string"
        },
        "trigger_rule": {
          "$ref": "#/$defs/TriggerRule",
          "default": "all_success",
          "description": "Task trigger rule. Read more detail, https://www.astronomer.io/blog/understanding-airflow-trigger-rules-comprehensive-visual-guide/"
        },
        "inlets": {
          "items": {
            "additionalProperties": true,
            "type": "object"
          },
          "title": "Inlets",
          "type": "array"
        },
        "outlets": {
          "items": {
            "additionalProperties": true,
            "type": "object"
          },
          "title": "Outlets",
          "type": "array"
        }
      },
      "required": [
        "task",
        "op"
      ],
      "title": "EmptyTask",
      "type": "object"
    },
    "GroupTask": {
      "description": "Group of Task model that will represent Airflow Task Group object.",
      "properties": {
        "desc": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "A Airflow task description",
          "title": "Desc"
        },
        "upstream": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "description": "A list of upstream task name or only task name of this task.",
          "title": "Upstream"
        },
        "group": {
          "description": "A task group name.",
          "title": "Group",
          "type": "string"
        },
        "type": {
          "const": "group",
          "default": "group",
          "title": "Type",
          "type": "string"
        },
        "tasks": {
          "description": "A list of Any Task model.",
          "items": {
            "description": "An any task type that able operator task or group task.",
            "oneOf": [
              {
                "description": "All supported Operator Tasks.",
                "discriminator": {
                  "mapping": {
                    "bash": "#/$defs/BashTask",
                    "custom_task": "#/$defs/CustomTask",
                    "debug": "#/$defs/DebugTask",
                    "empty": "#/$defs/EmptyTask",
                    "operator": "#/$defs/CustomOperatorTask",
                    "python": "#/$defs/PythonTask",
                    "raise": "#/$defs/RaiseTask"
                  },
                  "propertyName": "op"
                },
                "oneOf": [
                  {
                    "$ref": "#/$defs/EmptyTask"
                  },
                  {
                    "$ref": "#/$defs/DebugTask"
                  },
                  {
                    "$ref": "#/$defs/BashTask"
                  },
                  {
                    "$ref": "#/$defs/PythonTask"
                  },
                  {
                    "$ref": "#/$defs/CustomTask"
                  },
                  {
                    "$ref": "#/$defs/CustomOperatorTask"
                  },
                  {
                    "$ref": "#/$defs/RaiseTask"
                  }
                ]
              },
              {
                "$ref": "#/$defs/GroupTask"
              }
            ]
          },
          "title": "Tasks",
          "type": "array"
        }
      },
      "required": [
        "group"
      ],
      "title": "GroupTask",
      "type": "object"
    },
    "PythonTask": {
      "description": "Python Task model.",
      "properties": {
        "desc": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "A Airflow task description",
          "title": "Desc"
        },
        "upstream": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "description": "A list of upstream task name or only task name of this task.",
          "title": "Upstream"
        },
        "task": {
          "description": "A task name.",
          "title": "Task",
          "type": "string"
        },
        "type": {
          "const": "task",
          "default": "task",
          "title": "Type",
          "type": "string"
        },
        "op": {
          "const": "python",
          "title": "Op",
          "type": "string"
        },
        "trigger_rule": {
          "$ref": "#/$defs/TriggerRule",
          "default": "all_success",
          "description": "Task trigger rule. Read more detail, https://www.astronomer.io/blog/understanding-airflow-trigger-rules-comprehensive-visual-guide/"
        },
        "inlets": {
          "items": {
            "additionalProperties": true,
            "type": "object"
          },
          "title": "Inlets",
          "type": "array"
        },
        "outlets": {
          "items": {
            "additionalProperties": true,
            "type": "object"
          },
          "title": "Outlets",
          "type": "array"
        },
        "caller": {
          "description": "A Python function name.",
          "title": "Caller",
          "type": "string"
        },
        "params": {
          "additionalProperties": true,
          "title": "Params",
          "type": "object"
        }
      },
      "required": [
        "task",
        "op",
        "caller"
      ],
      "title": "PythonTask",
      "type": "object"
    },
    "RaiseTask": {
      "properties": {
        "desc": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "A Airflow task description",
          "title": "Desc"
        },
        "upstream": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "description": "A list of upstream task name or only task name of this task.",
          "title": "Upstream"
        },
        "task": {
          "description": "A task name.",
          "title": "Task",
          "type": "string"
        },
        "type": {
          "const": "task",
          "default": "task",
          "title": "Type",
          "type": "string"
        },
        "op": {
          "const": "raise",
          "title": "Op",
          "type": "string"
        },
        "trigger_rule": {
          "$ref": "#/$defs/TriggerRule",
          "default": "all_success",
          "description": "Task trigger rule. Read more detail, https://www.astronomer.io/blog/understanding-airflow-trigger-rules-comprehensive-visual-guide/"
        },
        "inlets": {
          "items": {
            "additionalProperties": true,
            "type": "object"
          },
          "title": "Inlets",
          "type": "array"
        },
        "outlets": {
          "items": {
            "additionalProperties": true,
            "type": "object"
          },
          "title": "Outlets",
          "type": "array"
        },
        "message": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Message"
        },
        "skipped": {
          "default": false,
          "title": "Skipped",
          "type": "boolean"
        }
      },
      "required": [
        "task",
        "op"
      ],
      "title": "RaiseTask",
      "type": "object"
    },
    "TriggerRule": {
      "description": "Class with task's trigger rules.",
      "enum": [
        "all_success",
        "all_failed",
        "all_done",
        "all_done_setup_success",
        "one_success",
        "one_failed",
        "one_done",
        "none_failed",
        "none_failed_or_skipped",
        "none_skipped",
        "dummy",
        "always",
        "none_failed_min_one_success",
        "all_skipped"
      ],
      "title": "TriggerRule",
      "type": "string"
    }
  },
  "description": "Base Dag Model for validate template config data support DagTool object.\nThis model will include necessary field for Airflow DAG object and custom\nfield for DagTool object together.",
  "properties": {
    "name": {
      "description": "A DAG name.",
      "title": "Name",
      "type": "string"
    },
    "type": {
      "const": "dag",
      "description": "A type of template config.",
      "title": "Type",
      "type": "string"
    },
    "desc": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "A DAG description.",
      "title": "Desc"
    },
    "docs": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "A DAG document that allow to pass with markdown syntax.",
      "title": "Docs"
    },
    "params": {
      "additionalProperties": {
        "type": "string"
      },
      "title": "Params",
      "type": "object"
    },
    "vars": {
      "additionalProperties": {
        "type": "string"
      },
      "title": "Vars",
      "type": "object"
    },
    "tasks": {
      "description": "A list of any task, origin task or group task",
      "items": {
        "description": "An any task type that able operator task or group task.",
        "oneOf": [
          {
            "description": "All supported Operator Tasks.",
            "discriminator": {
              "mapping": {
                "bash": "#/$defs/BashTask",
                "custom_task": "#/$defs/CustomTask",
                "debug": "#/$defs/DebugTask",
                "empty": "#/$defs/EmptyTask",
                "operator": "#/$defs/CustomOperatorTask",
                "python": "#/$defs/PythonTask",
                "raise": "#/$defs/RaiseTask"
              },
              "propertyName": "op"
            },
            "oneOf": [
              {
                "$ref": "#/$defs/EmptyTask"
              },
              {
                "$ref": "#/$defs/DebugTask"
              },
              {
                "$ref": "#/$defs/BashTask"
              },
              {
                "$ref": "#/$defs/PythonTask"
              },
              {
                "$ref": "#/$defs/CustomTask"
              },
              {
                "$ref": "#/$defs/CustomOperatorTask"
              },
              {
                "$ref": "#/$defs/RaiseTask"
              }
            ]
          },
          {
            "$ref": "#/$defs/GroupTask"
          }
        ]
      },
      "title": "Tasks",
      "type": "array"
    },
    "filename": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "A filename of the current position.",
      "title": "Filename"
    },
    "parent_dir": {
      "anyOf": [
        {
          "format": "path",
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "A parent dir path.",
      "title": "Parent Dir"
    },
    "created_dt": {
      "anyOf": [
        {
          "format": "date-time",
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "A file created datetime.",
      "title": "Created Dt"
    },
    "updated_dt": {
      "anyOf": [
        {
          "format": "date-time",
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "A file modified datetime.",
      "title": "Updated Dt"
    },
    "raw_data": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "A raw data that load from template config path.",
      "title": "Raw Data"
    },
    "raw_data_hash": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "A hashed raw data with SHA256.",
      "title": "Raw Data Hash"
    },
    "owner": {
      "default": "dagtool",
      "title": "Owner",
      "type": "string"
    },
    "tags": {
      "description": "A list of tags.",
      "items": {
        "type": "string"
      },
      "title": "Tags",
      "type": "array"
    },
    "schedule": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Schedule"
    },
    "start_date": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "format": "date-time",
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Start Date"
    },
    "end_date": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "format": "date-time",
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "End Date"
    },
    "concurrency": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Concurrency"
    },
    "is_paused_upon_creation": {
      "default": true,
      "title": "Is Paused Upon Creation",
      "type": "boolean"
    },
    "max_active_tasks": {
      "title": "Max Active Tasks",
      "type": "integer"
    },
    "max_active_runs": {
      "title": "Max Active Runs",
      "type": "integer"
    },
    "dagrun_timeout_sec": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "A DagRun timeout in second value.",
      "title": "Dagrun Timeout Sec"
    },
    "default_args": {
      "$ref": "#/$defs/DefaultArgs"
    }
  },
  "required": [
    "name",
    "type"
  ],
  "title": "DagModel",
  "type": "object"
}
