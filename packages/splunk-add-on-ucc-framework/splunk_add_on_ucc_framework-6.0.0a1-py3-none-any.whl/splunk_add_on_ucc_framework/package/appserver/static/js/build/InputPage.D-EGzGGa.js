import{r as it,a as st,b as lt,c as ut,d as ct,e as pt,f as ft,g as dt,h as mt,i as vt,j as yt,k as ke,l as S,m as qe,n as Ee,o as s,U as Ce,p as V,q as bt,v as Ie,s as Ae,u as gt,t as ht,P as ue}from"./entry_page.js";import{P as Pt,s as ge,u as St,a as jt,M as _e,b as H,c as Ot,d as xt,T as wt,C as ce,e as Tt,S as Et,f as Ct,g as Me,h as Ne,i as It,E as _t,j as Mt,k as Nt}from"./usePlatform.B0rojwQB.js";import{P as Dt}from"./toUpper.BNt1QE2_.js";import{M as re,D as Rt}from"./Menu.CCGX78wV.js";import{r as kt}from"./ChevronLeft.DxnwXrVH.js";import{E as qt}from"./ErrorBoundary.BjiCoH_C.js";import"./Search.BUYt---Z.js";var be={exports:{}},De;function At(){return De||(De=1,(()=>{var a={};a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var g={};a.r(g),a.d(g,{Panel:()=>Pe,default:()=>nt});const y=it();var j=a.n(y);const w=st();var l=a.n(w);const T=lt();var k=a.n(T);const q=ut();var I=a.n(q);const h=ct();var b=a.n(h);const A=pt();var P=a.n(A);const _=yt,$=ft(),K=dt;var E=a.n(K);const u=mt();var Q=a.n(u);const W=vt();var z=E()((0,_.animated)(Q())).withConfig({displayName:"SlidingPanelsStyles__StyledBox",componentId:"su6isq-0"})(["overflow:hidden;position:relative;"]),Y=E()(_.animated.div).withConfig({displayName:"SlidingPanelsStyles__Styled",componentId:"su6isq-1"})(["",";",";"],W.mixins.reset("block"),W.mixins.clearfix());function J(t,e){t&&(typeof t=="function"?t(e):t.current=e)}function O(t){"@babel/helpers - typeof";return O=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(t)}function f(){return f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f.apply(null,arguments)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,he(r.key),r)}}function i(t,e,n){return e&&m(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function v(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},M(t,e)}function N(t){var e=ee();return function(){var n,r=L(t);if(e){var o=L(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(t,e){if(e&&(O(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X(t)}function X(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ee=function(){return!!t})()}function L(t){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(t)}function U(t,e,n){return(e=he(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function he(t){var e=Ue(t,"string");return O(e)=="symbol"?e:e+""}function Ue(t,e){if(O(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(O(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Be={elementRef:l().oneOfType([l().func,l().object]),panelId:l().any.isRequired,onMount:l().func,onUnmount:l().func},Fe={},pe=function(t){v(n,t);var e=N(n);function n(){var r;p(this,n);for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];return r=e.call.apply(e,[this].concat(c)),U(X(r),"el",null),U(X(r),"handleMount",function(D){r.el=D,J(r.props.elementRef,D)}),r}return i(n,[{key:"componentDidMount",value:function(){var o,c;(o=(c=this.props).onMount)===null||o===void 0||o.call(c,this)}},{key:"componentWillUnmount",value:function(){var o,c;(o=(c=this.props).onUnmount)===null||o===void 0||o.call(c,this)}},{key:"getHeight",value:function(){var o;return(o=this.el)===null||o===void 0?void 0:o.clientHeight}},{key:"getWidth",value:function(){var o;return(o=this.el)===null||o===void 0?void 0:o.clientWidth}},{key:"render",value:function(){var o=this.props.panelId;return j().createElement(Y,f({"data-test":"panel","data-test-panel-id":o},b()(this.props,I()(n.propTypes)),{ref:this.handleMount}))}}]),n}(y.Component);U(pe,"propTypes",Be),U(pe,"defaultProps",Fe);const Pe=pe;function G(t){"@babel/helpers - typeof";return G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(t)}function fe(){return fe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fe.apply(null,arguments)}function $e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,we(r.key),r)}}function je(t,e,n){return e&&Se(t.prototype,e),n&&Se(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function We(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&de(t,e)}function de(t,e){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},de(t,e)}function ze(t){var e=Oe();return function(){var n,r=oe(t);if(e){var o=oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xe(this,n)}}function Xe(t,e){if(e&&(G(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B(t)}function B(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Oe=function(){return!!t})()}function oe(t){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(t)}function xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,r)}return n}function ae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xe(Object(n),!0).forEach(function(r){x(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function x(t,e,n){return(e=we(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function we(t){var e=Ge(t,"string");return G(e)=="symbol"?e:e+""}function Ge(t,e){if(G(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(G(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var He={activePanelId:l().any.isRequired,children:l().node,elementRef:l().oneOfType([l().func,l().object]),innerClassName:l().string,innerStyle:l().object,onAnimationEnd:l().func,outerClassName:l().string,outerStyle:l().object,transition:l().oneOf(["forward","backward"])},Ve={transition:"forward"},Ke={precision:1},Qe=function(e){var n=e.animating,r=e.outerStyle,o=e.interpolatedOuterStyle;return ae(ae({},r),n?o:{})},Ye=function(e){return e?{translateX:1}:{}},Je=function(e){var n=e?e.getWidth():0,r=e?e.getHeight():0;return{width:n,height:r}},Ze=function(e){var n,r=e.activePanelId,o=e.children,c=e.maxWidth,d=e.onMount,D=e.onUnmount,se=e.transition,le=e.transitionStyle,te=y.Children.toArray(o).filter(y.isValidElement).find(function(ne){return ne.props.panelId===r}),me=(n=le.translateX)===null||n===void 0?void 0:n.to(function(ne){return"translateX(".concat(ne*c*(se==="forward"?1:-1),"px)")}),ve=te?j().createElement(_.animated.div,{style:le},(0,y.cloneElement)(te,{style:ae(ae({},te.props.style),{},{transform:me}),onMount:d,onUnmount:D})):null;return ve},et=function(){return{translateX:0}},tt=function(e){return e?{translateX:-1,position:"absolute",left:0,top:0}:{translateX:-1}},ie=function(t){We(n,t);var e=ze(n);je(n,null,[{key:"getDerivedStateFromProps",value:function(o,c){return o.activePanelId!==c.prevActivePanelId?{animating:!0,panelLoading:!0,prevActivePanelId:o.activePanelId,slidingId:c.slidingId+1}:null}}]);function n(r){var o;return $e(this,n),o=e.call(this,r),x(B(o),"panelInstances",{}),x(B(o),"allowAnimationUpdates",!0),x(B(o),"handlePanelMount",function(c){o.panelInstances[c.props.panelId]=c,c.props.panelId===o.props.activePanelId&&o.setState({activePanel:c,panelLoading:!1})}),x(B(o),"handlePanelUnmount",function(c){delete o.panelInstances[c.props.panelId]}),x(B(o),"handleAnimationEnd",function(){var c,d;o.allowAnimationUpdates&&o.setState({animating:!1}),(c=(d=o.props).onAnimationEnd)===null||c===void 0||c.call(d)}),x(B(o),"renderOuterContainer",function(c){var d=o.props,D=d.activePanelId,se=d.children,le=d.elementRef,te=d.outerClassName,me=d.outerStyle,ve=d.innerClassName,ne=d.innerStyle,ye=o.state.animating,rt=Qe({animating:ye,outerStyle:me,interpolatedOuterStyle:c});y.Children.toArray(se).filter(y.isValidElement).find(function(C){return C.props.panelId===D});var ot=k()(P()(o.panelInstances),function(C){return!!C}),at=ot.map(function(C){var F,Te=o.panelInstances[C.props.panelId];return Te&&(F=Te.getWidth())!==null&&F!==void 0?F:0}).reduce(function(C,F){return Math.max(C,F)},0);return j().createElement(z,fe({className:te,"data-test-active-panel-id":D,"data-test":"sliding-panels",elementRef:le,style:rt},b()(o.props,I()(n.propTypes))),j().createElement($.Transition,{from:Ye(ye),enter:et(),leave:tt(ye),items:D},function(C,F){return j().createElement(_.animated.div,{style:ne,className:ve},Ze({activePanelId:F,children:se,maxWidth:at,onMount:o.handlePanelMount,onUnmount:o.handlePanelUnmount,transition:o.props.transition,transitionStyle:C}))}))}),o.state={animating:!1,panelLoading:!1,prevActivePanelId:o.props.activePanelId,slidingId:0},o}return je(n,[{key:"componentWillUnmount",value:function(){this.allowAnimationUpdates=!1}},{key:"render",value:function(){var o=this.state,c=o.activePanel,d=o.panelLoading;return j().createElement($.Spring,{to:Je(c),onRest:this.handleAnimationEnd,immediate:d,config:Ke},this.renderOuterContainer)}}]),n}(y.Component);x(ie,"propTypes",He),x(ie,"defaultProps",Ve),x(ie,"Panel",Pe);const nt=ie;be.exports=g})()),be.exports}var Lt=At();const Re=ke(Lt);var Ut=kt();const Bt=ke(Ut);function Ft(){const a=S.useContext(Pt);if(!a)throw new Error("usePageContext must be used within <PageContextProvider />");return a}const $t=Ae.span`
    color: ${Ie.brandColorD20};
    font-size: ${Ie.fontSizeSmall};
    font-weight: 500;
`,R="main_panel";function Le({handleRequestOpen:a}){const[g,y]=S.useState(R),[j,w]=S.useState("forward"),[l,T]=S.useState(!1),[k,q]=S.useState(!0),{pages:I}=qe(),h=Ft(),{inputs:b}=I;Ee(b);const A="groupsMenu"in b?b.groupsMenu:void 0,[P,_]=S.useState(b.services);S.useEffect(()=>{_(b.services.filter(f=>!ge(f.hideForPlatform,h.platform)))},[b.services,h.platform]);const $=["clickAway","escapeKey","offScreen","toggleClick"],K=s.jsx(Ce,{id:"addInputBtn",label:V._("Create New Input"),isMenu:!0});S.useEffect(()=>{k||(T(!1),q(!0))},[k]);const E=({reason:f})=>{T(!$.includes(f))},u=()=>{T(!0)},Q=(f,p)=>f.map(m=>m?.hasSubmenu?s.jsx(re.Item,{hasSubmenu:!0,onClick:()=>{y(m.name),w("forward")},children:m.title},m.name):s.jsxs(re.Item,{onClick:()=>{a({serviceName:m.name,groupName:p}),q(!1)},children:[m.title,s.jsxs($t,{children:["Â ",m.subTitle]})]},m.name)),W=()=>s.jsxs(s.Fragment,{children:[s.jsx(re.Item,{startAdornment:s.jsx(Bt,{}),onClick:()=>{y(R),w("backward")},children:"Back"}),s.jsx(re.Divider,{})]}),z=f=>Object.keys(f).map(p=>s.jsx(Re.Panel,{panelId:p,children:s.jsxs(re,{children:[p!==R&&W(),Q(f[p],p)]})},p)),Y=S.useMemo(()=>{const f={[R]:[]};return A?A.forEach(p=>{if(p?.groupServices)f[p.groupName]=[],p.groupServices.forEach(m=>{const i=P.find(v=>v.name===m);i&&f[p.groupName].push({name:m,hasSubmenu:!1,title:i?.title||"",subTitle:i?.subTitle})}),f[p.groupName].length>0&&f[R].push({name:p.groupName,title:p.groupTitle,hasSubmenu:!0});else{const m=P.find(i=>i.name===p.groupName);m&&f[R].push({name:p.groupName,title:p.groupTitle,subTitle:m?.subTitle,hasSubmenu:!1})}}):f[R]=P.map(p=>({name:p.name,title:p.title,subTitle:p.subTitle,hasSubmenu:!1})),z(f)},[P]),J=()=>s.jsx(Rt,{toggle:K,open:l,onRequestClose:E,onRequestOpen:u,children:s.jsx(Re,{activePanelId:g,transition:j,style:{width:"210px"},children:Y})}),O=()=>s.jsx(Ce,{label:bt(100),id:"addInputBtn",onClick:()=>{a({serviceName:P[0].name})}});return Ee(P),P.length===1?O():J()}Le.propTypes={handleRequestOpen:Dt.func};const Wt=Ae(ce.Row)`
    padding: 5px 0px;

    .title_menu_column {
        width: auto !important;
    }

    .page_subtitle {
        min-height: 20px;
    }

    .dropdown {
        text-align: right;
    }
`;function zt(a){return a!==void 0&&"description"in a}function Xt(a){return a!==void 0&&"table"in a}function Zt(){const[a,g]=S.useState({open:!1}),y=qe(),j=St(y,"inputs"),w=y.pages.inputs;let l=[],T,k,q,I;w&&(Xt(w)?({services:l,title:T,table:k,description:q,subDescription:I}=w,l=l.filter(i=>!ge(i.hideForPlatform,j))):({services:l,title:T}=w,l=l.filter(i=>!ge(i.hideForPlatform,j))));const h=!k,[b,A]=S.useState(l[0].name),P=l.find(i=>i.name===b),_=zt(P),$=[_e,H,Ot],K=l.map(i=>i.name),E=gt(),u=jt();S.useEffect(()=>{Q(),W()},[ht().search]);const Q=()=>{const i=l.find(v=>v.name===u.get("service"));u&&i&&$.includes(u.get("action")||"")&&!a.open?u.get("action")!==H&&a.stanzaName?g({...a,open:!0,isInputPageStyle:!0,serviceName:u.get("service")||"",mode:u.get("action")||""}):g({...a,open:!0,isInputPageStyle:!0,serviceName:u.get("service")||"",formLabel:`Create ${i?.title}`,mode:H}):(!u.get("service")||!u.get("action"))&&a.open&&a.isInputPageStyle&&g({...a,open:!1})},W=()=>{u&&K.includes(u.get("service")||"")&&A(u.get("service")||"")},z=({serviceName:i,groupName:v,input:M})=>{const N=l.find(L=>L.name===i),Z=N?.title,X=N?.formTitle,ee=N?.style===Nt;if(g({...a,open:!0,serviceName:i,mode:H,formLabel:X?`Add ${X}`:`Add ${Z}`,isInputPageStyle:ee,groupName:v}),ee){u.set("service",i),u.set("action",H);const U=M||(v&&v!==R?v:null)||i;U?u.set("input",U):u.delete("input"),E({search:u.toString()})}},Y=()=>{g({...a,open:!1})},J=()=>a.serviceName&&s.jsx(Mt,{page:ue,open:a.open,handleRequestClose:Y,returnFocus:()=>{},serviceName:a.serviceName,mode:H,formLabel:a.formLabel,groupName:a.groupName}),O=(i,v)=>{const M=l.find(Z=>Z.name===i.serviceName),N=M?.formTitle||M?.title;g({...a,open:!0,isInputPageStyle:!0,serviceName:i.serviceName,stanzaName:i.name,formLabel:v===_e?`Clone ${N}`:`Update ${N}`,mode:v}),u.set("service",i.serviceName),u.set("action",v),E({search:u.toString()})},f=()=>{g({...a,open:!1}),h||u.delete("service"),u.delete("action"),E({search:u.toString()})},p=()=>a.serviceName&&a.mode?s.jsx(_t,{handleRequestClose:f,serviceName:a.serviceName,stanzaName:a.stanzaName,mode:a.mode,formLabel:a.formLabel,page:ue,groupName:a.groupName}):null,m=S.useCallback((i,{selectedTabId:v})=>{v&&(A(v),u.delete("action"),u.set("service",v),E({search:u.toString()}))},[b]);return s.jsx(qt,{children:s.jsx(xt,{platform:j,children:s.jsxs(wt,{children:[a.isInputPageStyle&&a.open?p():null,s.jsxs("div",{style:a.isInputPageStyle&&a.open?{display:"none"}:{display:"block"},children:[s.jsx(ce,{gutter:8,children:s.jsxs(Wt,{children:[s.jsxs(ce.Column,{className:h?"title_menu_column":"",span:9,children:[s.jsx(Tt,{children:h?V._(P?.title||""):V._(T||"")}),s.jsx(Et,{className:h?"pageSubtitle":void 0,children:h?V._(_?P?.description:""):V._(q||"")}),s.jsx(Ct,{text:I?.text||"",links:I?.links})]}),s.jsx(ce.Column,{className:h?"title_menu_column":"dropdown",span:3,children:!h&&s.jsx(Le,{handleRequestOpen:z})})]})}),h?s.jsxs(s.Fragment,{children:[s.jsx(Me,{activeTabId:b,onChange:m,children:l.map(i=>s.jsx(Me.Tab,{label:V._(i.title),tabId:i.name},i.name))}),l.map(i=>s.jsx("div",{style:i.name!==b?{display:"none"}:{display:"block"},id:`${i.name}Tab`,children:s.jsx(Ne,{page:ue,serviceName:i.name,handleRequestModalOpen:()=>z({serviceName:i.name}),handleOpenPageStyleDialog:O})},i.name))]}):s.jsx(Ne,{page:ue,handleOpenPageStyleDialog:O,displayActionBtnAllRows:!0}),s.jsx(It,{position:"top-right"}),!a.isInputPageStyle&&a.open?J():null]})]})})})}export{Zt as default};
