[build-system]
requires = ["flit_core >=3.2,<4"]
build-backend = "flit_core.buildapi"

[project]
name = "geovisio"
authors = [
	{name = "Adrien PAVIE", email = "panieravide@riseup.net"},
	{name = "Antoine Desbordes", email = "antoine.desbordes@gmail.com"},
]
readme = "README.md"
license = {file = "LICENSE"}
classifiers = ["License :: OSI Approved :: MIT License"]
dynamic = ["description", "version"]
requires-python = ">=3.10"
dependencies = [
	"Flask ~= 3.1",
	"psycopg[pool] ~= 3.2",
	"flasgger ~= 0.9.7",
	"Pillow ~= 11.1",
	"Flask-Cors ~= 6.0",
	"fs ~= 2.4",
	"fs-s3fs-forked ~= 1.1.4",
	"flask-compress ~= 1.14",
	"requests ~= 2.31",
	"yoyo-migrations ~= 9.0",
	"psycopg-binary ~= 3.2",
	"python-dotenv ~= 1.1",
	"authlib ~= 1.6",
	"Flask-Executor ~= 1.0",
    "geopic-tag-reader[write-exif] ~= 1.8.0",
	"rfeed ~= 1.1.1",
	"sentry-sdk[flask] ~= 2.24",
	"pygeofilter[backend-native] ~= 0.3.1",
	"python-dateutil ~= 2.9.0",
	"tzdata ~= 2025.2",
	"croniter ~= 6.0.0",
	"pydantic ~= 2.11",
	"pydantic-extra-types ~= 2.7",
	"flask-babel ~= 4.0.0",
	"geojson-pydantic ~= 2.0.0",
	"email-validator ~= 2.2.0",
	"multipart>=1.2.1",
]

[project.urls]
Home = "https://gitlab.com/panoramax/server/api"
"Source Code" = "https://gitlab.com/panoramax/server/api"

[project.optional-dependencies]
dev = [
	"coverage ~= 7.9",
	"protobuf ~= 5.26",
	"mapbox-vector-tile ~= 2.1",
	"pystac ~= 1.9",
	"pytest ~= 8.4",
	"pytest-datafiles ~= 3.0",
	"pyexiv2 ~= 2.15",
	"testcontainers ~= 4.10",
	"requests-mock ~= 1.11",
	"black ~= 25.1",
	"pre-commit ~= 4.2",
	"pyyaml ~= 6.0",
	"openapi-spec-validator ~= 0.7",
	"stac-api-validator ~= 0.6.4",
]

docs = [
	"mkdocs-material ~= 9.6.14",
	"mkdocs-swagger-ui-tag ~= 0.7.1",
]
build = ["flit ~= 3.9.0"]


[tool.black]
line-length = 140


[tool.pytest.ini_options]
testpaths = ["tests", "geovisio"]
filterwarnings = ["ignore::DeprecationWarning"]
addopts = ["--doctest-modules"]
markers = [
	"docker: mark a test as needing docker. Those tests will be slower than normal test",
	"skipci: mark a test as not running on ci. Is done for tests having complex dependencies, or very slow"
]


[tool.flit.sdist]
include = ["geovisio/translations/**/*.mo"]
