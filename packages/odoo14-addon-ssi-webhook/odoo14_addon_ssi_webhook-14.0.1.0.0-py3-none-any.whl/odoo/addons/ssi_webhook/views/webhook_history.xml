<?xml version="1.0" encoding="UTF-8" ?>
<!-- Copyright 2025 OpenSynergy Indonesia
     Copyright 2025 PT. Simetri Sinergi Indonesia
     License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl). -->
<odoo>
	<record id="webhook_history_view_search" model="ir.ui.view">
        <field name="name">webhook.history.search</field>
        <field name="model">webhook_history</field>
        <field name="arch" type="xml">
			<search>
				<field name="webhook_id" />
				<field name="user_id" />
				<filter string="Success" name="success" domain="[('state', '!=',  'success')]" />
				<filter string="Failed" name="failed" domain="[('state', '!=',  'failed')]" />
				<separator />
				<filter string="Date" date="create_date" name="creation_date" />
				<group expand="0" name="group_by" string="Group By">
					<filter string="Type" name="group_by_state" context="{'group_by': 'state'}" />
					<filter string="Hook" name="group_by_webhook_id" context="{'group_by': 'webhook_id'}" />
					<filter
                        string="Date"
                        name="group_by_create_date"
                        context="{'group_by': 'create_date:day'}"
                    />
				</group>
			</search>
        </field>
    </record>
	<record id="webhook_history_view_tree" model="ir.ui.view">
        <field name="name">webhook.history.tree</field>
        <field name="model">webhook_history</field>
        <field name="arch" type="xml">
			<tree sample="1">
				<field name="create_date" />
				<field name="user_id" widget="many2one_avatar_user" />
				<field
                    name="state"
                    widget="badge"
                    decoration-info="state == 'success'"
                    decoration-danger="state == 'failed'"
                />
			</tree>
        </field>
    </record>
	<record id="webhook_history_view_form" model="ir.ui.view">
        <field name="name">webhook.history.form</field>
        <field name="model">webhook_history</field>
        <field name="arch" type="xml">
            <form>
				<header>
				</header>
				<sheet>
					<group>
						<group>
							<field name="user_id" />
						</group>
						<group>
							<field name="create_date" />
							<field name="state" />
						</group>
					</group>
					<notebook>
						<page
                            string="Request"
                            attrs="{'invisible': ['|', ('request', '=', False), ('request', '=', '')]}"
                        >
							<field name="request" widget="ace" readonly="1" />
						</page>
						<page
                            string="Context"
                            attrs="{'invisible': ['|', ('context_data', '=', False), ('context_data', '=', '')]}"
                        >
							<field name="context_data" widget="ace" readonly="1" />
						</page>
						<page
                            string="Response"
                            attrs="{'invisible': ['|', ('response', '=', False), ('response', '=', '')]}"
                        >
							<field name="response" widget="ace" readonly="1" />
						</page>
						<page
                            string="Result"
                            attrs="{'invisible': ['|', ('result', '=', False), ('result', '=', '')]}"
                        >
							<field name="result" widget="ace" readonly="1" />
						</page>
						<page
                            string="Exception"
                            attrs="{'invisible': ['|', ('exception', '=', False), ('exception', '=', '')]}"
                        >
							<field name="exception" widget="text" readonly="1" />
						</page>
						<page
                            string="Traceback"
                            attrs="{'invisible': ['|', ('exception', '=', False), ('exception', '=', '')]}"
                        >
							<field name="traceback" widget="text" readonly="1" />
						</page>
					</notebook>
				</sheet>
            </form>
        </field>
    </record>
</odoo>
