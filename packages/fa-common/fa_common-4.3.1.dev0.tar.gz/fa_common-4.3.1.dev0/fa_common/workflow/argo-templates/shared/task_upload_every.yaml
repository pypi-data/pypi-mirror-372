name: <<TASK.UPLOAD_TASK_NAME>>
template: <<TASK.UPLOAD_TEMPLATE_NAME>>
dependencies:
- <<TASK.RUN_TASK_NAME>>
when: "{{tasks.<<TASK.RUN_TASK_NAME>>.status}} == Failed || {{tasks.<<TASK.RUN_TASK_NAME>>.status}} == Succeeded"
arguments:
  <% if not TASK.USE_PVC.enabled %>
  artifacts:
  - name: output-files
    from: '{{tasks.<<TASK.RUN_TASK_NAME>>.outputs.artifacts.output-files}}'
  <% endif %>
  parameters:
  - name: pod-name
    value: '{{tasks.<<TASK.RUN_TASK_NAME>>.outputs.parameters.pod-name}}'
  - name: task-name
    value: <<TASK.RUN_TASK_NAME>>
  - name: upload-base-path
    value: <<TASK.UPLOAD_BASE_PATH>>
  - name: upload-copy-paths
    value: <<TASK.UPLOAD_COPY_PATHS>>
  - name: upload-custom-path
    value: "<<TASK.UPLOAD_CUSTOM_PATH | default('', true)>>"
  - name: selected-upload-objects
    value: <<TASK.SELECTED_UPLOAD_OBJECTS>>
  - name: zip-outputs
    value: <<TASK.ZIP_OUTPUTS>>
