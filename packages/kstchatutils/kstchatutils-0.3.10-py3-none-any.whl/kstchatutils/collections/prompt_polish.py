#!/usr/bin/env python
# -*- coding: utf-8 -*-
# @Time     : 2025/5/28 15:31
# @Author   : songzb

PROMPT = """
#### 目标：
你作为domain资深客服，对给定的访客与客服的对话历史进行改写，改写需要遵循以下的一些规则：
1.不改变访客的文本，只允许修改一些特殊符号和错别字。
2.紧密结合访客的问题，令对话的逻辑更通顺，并且确保客服回答的知识的正确性。
3.只改写客服的表达，并且保留每一个客服的问题。
4.丰富一些衔接的话语。
5.能够根据用户的核心诉求，逐步合理地获取用户的联系方式。
6.访客的提及的性别、部位、年龄、时间等信息在对话中一定要保持一致。
7.尽可能将具体价格数值的描述进行模糊描述。
8.改写客服话术，避免做具体地址的回答。
9.禁止创造一些额外的对话内容，并且禁止增加对话轮次。
10.禁止在访客未回答年龄的情况下，客服的话术中出现类似“考虑到您40岁”和“对于您这个年龄”这样的表达。
11.禁止在访客未说症状的情况下，客服的话术中出现类似“您需要解决的问题是牙齿外凸，对吧？”这样的表达。
12.表达的语气尽可能与原句一致，尽可能以人聊天的语气来表达。
13.询问联系方式仅限于微信号、电话号码和手机号。

#### 步骤：
1. **历史信息分析**：仔细阅读并分析提供的对话历史，识别访客的信息。
2. **按照需求改写**：在满足需要遵循的规则的基础上对对话进行改写。

#### 要求：
-确保改写输出的对话是完整的，没有模糊的指代。
-确保仅仅输出改写的对话，不要带有额外的说明。

#### 结果：
对话历史：
history

返回改写的对话：
"""

# 或者用”**“代替
PROMPT_channel_rewrite = """
#### 目标：
你作为一位语言专家，任务是对给定的客服的话进行某些词汇上的表述修改，修改需要遵循以下的一些规则：
1.具体名词的修改：修复改成修护；治疗改成修护；重点诊疗改成重点修疤；祛疤去疤改成修疤；祛除改成修护；抗复发改成防再发；医院改成机构。
2.泛化描述的修改：不出现医疗字眼，皮肤科属于禁止准入行业，需要修改为”皮肤美容“，以修护美容，生活美容的词汇去描述，不要用皮肤诊疗，皮肤医疗这样的描述；无痛不能出现。
3.绝对化词语的修改：比如治愈，康复，治疗好，修护好，治好，祛除，无痛，抗复发，费用公开透明，抑制，都可以，一定等绝对词需要。
4.病症用动作词汇代替，涉及疾病类的词汇就找词代替或者换一个表述方式。
5.如果无需修改，直接原句输出就好。


#### 步骤：
1. **分析文本内容**：仔细阅读并分析提供的客服话术。
2. **进行表述修改**：对客服话术中的某些词汇按照规则进行修改。


#### 要求：
-只需要输出修改之后的客服话术的文本就好，并且输出格式必须为字符串
-禁止输出解释说明和修改的原因描述

### 举例说明：
例子1：
客服话术：您好，您需要进行皮肤科的诊疗吗？
修改之后的客服话术：您好，您需要进行皮肤美容的修护吗？

例子2：
客服话术：关注了
修改之后的客服话术：关注了


#### 结果：
客服话术：text
修改之后的客服话术："""

PROMPT_spinfo_rewrite = """
## 目标：
你作为domain资深客服，任务是对给定的客服的话进行某些词汇上或者表述上的改写，改写需要遵循以下的一些规则：
1.对于上班时间、营业时间的内容进行改写，不直接表达准确的时间点。
2.对于文本中包含公司、医院、机构或企业的名称，如果有主语，那么具体的公司、医院、机构或者企业的名称，就用"<company>"做替换，否则用“我院”来替换：
    - 比如“我们牙博士xxx”就会改写成“我们<company>xxx”，如果是“牙博士xxx”就会改写成“我院xxx”，如果是“我们这里xxx”就不需要改写。
3.对于文本中包含医院或机构的公立和私立的介绍的内容，不要正面明确表达公立私立，需要进行改写。
4.对于文本中包含公司、医院、机构、企业的地址或者怎么到达的信息也是不要正面明确表达，需要进行改写，但是如果是“具体地址”这样的字眼是不用改的。
5.对于文本中的省市区地址的具体名称是需要进行隐藏的，或者用<address>替换，“地址”和“城市”这样的字眼是不用改写或替换的。
6.对于文本中具体材料是否有、症状是否能治疗、项目是否能做的表述进行改写。
7.对于文本中包含是否能用医保，付款方式的内容，都不要正面回答，需要进行改写。
8.对于文本中包含具体的药品名称，需要进行改写，只说消炎药或者止痛药，要么只说药，不要正面回答。
9.对于文本中包含的具体价格数值的描述需要进行模糊描述的改写。
10.对于问QQ的表达，都需要删除，套联方式只能是问微信或者问电话/手机。
11.除了需要改写的内容之外，文本中其它的内容尽可能完全不变。
12.如果本文中有<xxxx>的情况，如“<wechat>”、“<mobile>”，请完全保留。
13.“品牌种类很多的，国产的，韩系的，德系的，欧美的”这种品牌国家名称是可以不用改写的。
14.“我院”这种公司、医院、机构或企业的代称也是不用改写的，“城市”这种也是非具体地址的名词也是不用改写的。
15.如果是询问能否加微信或者问能否加个联系方式这样报联的情况，则是需要配有手机号或者微信号的，用<mobile>或<wechat>来标识，但如果是问微信或者联系方式是多少这种要联的情况则不用改写。

## 步骤：
1. **文本信息分析**：仔细阅读并分析提供的客服话术，充分理解文本中的内容。
2. **按照需求改写**：在遵循规则的基础上对客服话术进行改写。

## 要求：
-只需要输出修改之后的客服话术的文本就好，并且输出格式必须为字符串
-禁止输出解释说明和改写的原因描述

## 举例说明：
客服话术：当然不是的，我们都是分期付款的
修改之后的客服话术：我们的付费方式可以根据需求灵活安排，您更倾向于哪种支付方式呢？可以为您协调适合的方案。

客服话术：您好，目前咱们这边补牙是可以使用医保的，您是牙齿有蛀牙的情况了吗？
修改之后的客服话术：您好，医保政策会根据不同治疗项目有所调整，您是牙齿有蛀牙的情况了吗？

客服话术：洗牙价格一般在上百元不等，具体费用取决于洗牙的方式<sep>您打算什么时间来洗牙呢？
修改之后的客服话术：洗牙还是比较便宜的，具体费用取决于洗牙的方式<sep>您打算什么时间来洗牙呢？

客服话术：这样吧，你有微信吗，我加你，我把具体地址发你微信，方便你查看距离，有什么问题不清楚随时问我
修改之后的客服话术：这样吧，你有微信吗，我加你，我把具体地址发你微信，方便你查看距离，有什么问题不清楚随时问我

客服话术：在泰州，我们也有分院，可以为您提供服务。不知道您所在的城市是哪里
修改之后的客服话术：在<address>，我们也有分院，可以为您提供服务。不知道您所在的城市是哪里

## 结果：
客服话术：text
修改之后的客服话术："""

# 例子5：
# 客服话术：我们苏州观前，新区，南环高架姑苏机构，吴中，园区湖东，都有分院<sep>您可以先来院做个具体的咨询和检查，帮您找出牙齿发黄的原因
# 修改之后的客服话术：我们<company>在多个地区都有分院<sep>您可以先来院做个具体的咨询和检查，帮您找出牙齿发黄的原因


PROMPT_spinfo_rewrite2 = """你作为domain资深客服，任务是对给定的客服话术进行词汇和表述上的改写，改写需严格遵循以下规则：
1. 涉及时间表述时避免直接说明具体时间点
2. 机构名称替换规则：
   - 含"我们"/"这边"时用"<company>"替换具体名称
   - 其他情况用"我院"替换
3. 避免明确说明机构性质（公立/私立）
4. 地址信息处理：
   - 避免直接说明具体地址
   - 保留"具体地址"字眼
   - 隐藏省市区名称
5. 模糊处理：
   - 材料/症状/项目的可行性说明
   - 医保/付款方式说明
   - 药品名称（统称消炎药/止痛药）
   - 价格数值
6. 联系方式规范：
   - 删除QQ相关表述
   - 联系方式统一用<mobile>或<wechat>标识
7. 保留原文中的：
   - <xxxx>格式内容
   - 品牌国家名称
   - "我院"等代称
8. 询问联系方式时必须附带<mobile>或<wechat>

操作步骤：
1. 全面分析原始话术
2. 严格按规则逐条改写

输出要求：
- 仅输出修改后文本
- 字符串格式输出
- 禁止任何解释说明

示例对照：
原句：我们牙博士营业时间是9:00-18:00
改写：我们<company>的营业时间比较充裕

原句：苏州美奥口腔是私立医院
改写：我院是专业口腔医疗机构

原句：地址在南京市鼓楼区中山路1号
改写：具体地址可到院后了解

原句：布洛芬需要遵医嘱服用
改写：止痛药需要遵医嘱服用

原句：治疗费用大约3000元
改写：治疗费用根据方案有所不同

原句：可以加QQ咨询吗
改写：可通过<wechat>咨询

## 结果：
原句：text
改写："""
