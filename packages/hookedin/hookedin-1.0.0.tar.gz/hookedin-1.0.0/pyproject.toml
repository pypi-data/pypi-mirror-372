[build-system]
requires = ["hatchling>=1.25"]
build-backend = "hatchling.build"

[project]
name = "hookedin"
dynamic = ["version"]
description = "Lightweight async-friendly hook/plug-in manager with tags, priorities, and reducers."
readme = "README.md"
requires-python = ">=3.9"
license = { file = "LICENSE" }
authors = [
  { name = "Kevin d'Anunciacao", email = "kmdjr.dev@gmail.com" }
]
keywords = ["hooks", "plugins", "events", "asyncio", "middleware"]
classifiers = [
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3 :: Only",
  "Programming Language :: Python :: 3.9",
  "Programming Language :: Python :: 3.10",
  "Programming Language :: Python :: 3.11",
  "Programming Language :: Python :: 3.12",
  "License :: OSI Approved :: MIT License",
  "Operating System :: OS Independent",
  "Topic :: Software Development :: Libraries",
  "Typing :: Typed"
]

# runtime deps
dependencies = []

[project.optional-dependencies]
dev = [
  "pytest>=8.0",
  "pytest-asyncio>=0.23,<0.24",
]

[project.urls]
Homepage = "https://github.com/Kmdjr/hookedin"
Issues = "https://github.com/Kmdjr/hookedin/issues"

# Pull version from src/hookedin/__init__.py -> __version__
[tool.hatch.version]
path = "src/hookedin/__init__.py"

# Wheel settings
[tool.hatch.build.targets.wheel]
packages = ["src/hookedin"]

# Include typing marker and keep junk out
[tool.hatch.build]
include = [
  "src/hookedin/py.typed",
]
exclude = [
  "venv",
  "venv/**",
  ".git",
  ".git/**",
  ".DS_Store",
  ".pytest_cache",
  "__pycache__",
  "dist",
  "build",
  "*.egg-info",
  "tests/**"
]

# sdist settings
[tool.hatch.build.targets.sdist]
include = [
  "src/hookedin/**",
  "README.md",
  "LICENSE",
  "pyproject.toml",
  "tests/**"
]
exclude = [
  ".git",
  ".git/**",
  ".DS_Store",
  ".pytest_cache",
  "__pycache__",
  "dist",
  "build",
  "*.egg-info",
  "venv",
  "venv/**"
]

# Pytest config
[tool.pytest.ini_options]
asyncio_mode = "auto"
markers = [
  "asyncio: mark test as asyncio-based",
]

# Dev env
[tool.hatch.envs.dev]
dependencies = [
  "pytest>=8.0",
  "pytest-asyncio>=0.23,<0.24",
]
[tool.hatch.envs.dev.scripts]
test = "pytest -v"
