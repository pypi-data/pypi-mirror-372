Metadata-Version: 2.4
Name: jj-multi-db-mcp
Version: 1.0.1
Summary: Multi-database MCP server supporting SQL Server, MySQL, Oracle, Redis and filesystem operations
Project-URL: Homepage, https://github.com/ppengit/jj-multi-db-mcp
Project-URL: Repository, https://github.com/ppengit/jj-multi-db-mcp
Author-email: PJ <peng.it@qq.com>
License: MIT
License-File: LICENSE
Requires-Python: >=3.8
Requires-Dist: mcp>=1.0.0
Provides-Extra: all
Requires-Dist: oracledb>=1.4.0; extra == 'all'
Requires-Dist: pymysql>=1.0.0; extra == 'all'
Requires-Dist: pyodbc>=4.0.0; extra == 'all'
Requires-Dist: redis>=5.0.0; extra == 'all'
Requires-Dist: sqlalchemy>=2.0.0; extra == 'all'
Provides-Extra: mysql
Requires-Dist: pymysql>=1.0.0; extra == 'mysql'
Requires-Dist: sqlalchemy>=2.0.0; extra == 'mysql'
Provides-Extra: oracle
Requires-Dist: oracledb>=1.4.0; extra == 'oracle'
Requires-Dist: sqlalchemy>=2.0.0; extra == 'oracle'
Provides-Extra: redis
Requires-Dist: redis>=5.0.0; extra == 'redis'
Provides-Extra: sqlserver
Requires-Dist: pyodbc>=4.0.0; extra == 'sqlserver'
Requires-Dist: sqlalchemy>=2.0.0; extra == 'sqlserver'
Description-Content-Type: text/markdown

# JJ Multi-Database MCP Server

[English](#english) | [ä¸­æ–‡](#ä¸­æ–‡)

---

## English

A comprehensive MCP (Model Context Protocol) server supporting multiple databases and filesystem operations. Perfect for AI assistants like Claude to interact with your databases and files safely and efficiently.

### ğŸš€ Features

- **ğŸ—„ï¸ SQL Server Support**: Complete SQL Server database operations with connection pooling
- **ğŸ¬ MySQL Support**: Full MySQL database functionality with optimized queries
- **ğŸ”¶ Oracle Support**: Comprehensive Oracle database operations (optional dependency)
- **ğŸ”´ Redis Support**: Key-value operations with Redis including TTL management
- **ğŸ“ Filesystem Operations**: Safe file and directory operations with configurable restrictions
- **âš™ï¸ Environment-based Configuration**: Simple configuration via environment variables
- **ğŸ“¦ uvx Compatible**: Designed for use with uvx package runner
- **ğŸ”’ Security First**: Configurable access controls and safe defaults
- **ğŸ”Œ Optional Dependencies**: Install only what you need

### ğŸš€ Quick Start

#### Using uvx (Recommended)

```bash
# Install and run with specific database support
uvx --from jj-multi-db-mcp[sqlserver,mysql,redis] jj-multi-db-mcp

# Install with all database support
uvx --from jj-multi-db-mcp[all] jj-multi-db-mcp

# Basic installation (filesystem only)
uvx jj-multi-db-mcp
```

#### Using pip

```bash
# Basic installation (filesystem operations only)
pip install jj-multi-db-mcp

# With specific database support
pip install jj-multi-db-mcp[sqlserver,mysql,redis]

# With all database support
pip install jj-multi-db-mcp[all]

# Run the server
jj-multi-db-mcp
```

#### Available Optional Dependencies

- `[sqlserver]` - SQL Server support (requires pyodbc, sqlalchemy)
- `[mysql]` - MySQL support (requires pymysql, sqlalchemy)
- `[oracle]` - Oracle support (requires oracledb, sqlalchemy)
- `[redis]` - Redis support (requires redis)
- `[all]` - All database support

### âš™ï¸ Configuration

Configure the server using environment variables:

#### SQL Server Configuration
```bash
export SQLSERVER_ENABLED=true
export SQLSERVER_HOST=localhost
export SQLSERVER_PORT=1433
export SQLSERVER_DATABASE=your_database
export SQLSERVER_USERNAME=sa
export SQLSERVER_PASSWORD=your_password
export SQLSERVER_DRIVER="ODBC Driver 17 for SQL Server"  # optional
```

#### MySQL Configuration
```bash
export MYSQL_ENABLED=true
export MYSQL_HOST=localhost
export MYSQL_PORT=3306
export MYSQL_DATABASE=your_database
export MYSQL_USERNAME=root
export MYSQL_PASSWORD=your_password
export MYSQL_CHARSET=utf8mb4  # optional
```

#### Oracle Configuration
```bash
export ORACLE_ENABLED=true
export ORACLE_HOST=localhost
export ORACLE_PORT=1521
export ORACLE_SERVICE_NAME=XE
export ORACLE_USERNAME=system
export ORACLE_PASSWORD=your_password
```

#### Redis Configuration
```bash
export REDIS_ENABLED=true
export REDIS_HOST=localhost
export REDIS_PORT=6379
export REDIS_DB=0
export REDIS_PASSWORD=your_password  # optional
export REDIS_DECODE_RESPONSES=true   # optional
```

#### Filesystem Configuration
```bash
# Path restrictions (comma-separated or "*" for full access)
export FS_ALLOWED_PATHS="/home/user/documents,/tmp"

# Extension restrictions (comma-separated or "*" for all)
export FS_ALLOWED_EXTENSIONS=".txt,.py,.json,.csv,.md"

# Operation permissions
export FS_ENABLE_WRITE=true
export FS_ENABLE_DELETE=false

# Size limit (in bytes)
export FS_MAX_FILE_SIZE=104857600  # 100MB
```

### ğŸ¤– Claude Desktop Configuration

Add to your `claude_desktop_config.json`:

#### Basic Configuration (Filesystem Only)
```json
{
  "mcpServers": {
    "jj-multi-db-mcp": {
      "command": "uvx",
      "args": ["jj-multi-db-mcp"],
      "env": {
        "FS_ALLOWED_PATHS": "/home/user/documents",
        "FS_ALLOWED_EXTENSIONS": ".txt,.py,.json,.csv,.md"
      }
    }
  }
}
```

#### Full Configuration (All Databases)
```json
{
  "mcpServers": {
    "jj-multi-db-mcp": {
      "command": "uvx",
      "args": ["--from", "jj-multi-db-mcp[all]", "jj-multi-db-mcp"],
      "env": {
        "SQLSERVER_ENABLED": "true",
        "SQLSERVER_HOST": "localhost",
        "SQLSERVER_USERNAME": "sa",
        "SQLSERVER_PASSWORD": "your_password",
        "SQLSERVER_DATABASE": "your_database",
        "MYSQL_ENABLED": "true",
        "MYSQL_HOST": "localhost",
        "MYSQL_USERNAME": "root",
        "MYSQL_PASSWORD": "your_password",
        "MYSQL_DATABASE": "your_database",
        "REDIS_ENABLED": "true",
        "REDIS_HOST": "localhost",
        "FS_ALLOWED_PATHS": "/home/user/documents",
        "FS_ALLOWED_EXTENSIONS": ".txt,.py,.json,.csv,.md"
      }
    }
  }
}
```

### ğŸ› ï¸ Available Tools

#### SQL Server Tools
- `sqlserver_query` - Execute SELECT queries with parameters
- `sqlserver_execute` - Execute INSERT/UPDATE/DELETE queries
- `sqlserver_list_tables` - List all tables in database
- `sqlserver_table_schema` - Get detailed table schema information

#### MySQL Tools
- `mysql_query` - Execute SELECT queries with parameters
- `mysql_execute` - Execute INSERT/UPDATE/DELETE queries
- `mysql_list_tables` - List all tables in database
- `mysql_table_schema` - Get detailed table schema information

#### Oracle Tools
- `oracle_query` - Execute SELECT queries with parameters
- `oracle_execute` - Execute INSERT/UPDATE/DELETE queries
- `oracle_list_tables` - List all tables in user schema
- `oracle_table_schema` - Get detailed table schema information

#### Redis Tools
- `redis_get` - Get value by key
- `redis_set` - Set key-value pair with optional TTL
- `redis_delete` - Delete key from Redis
- `redis_keys` - List keys matching pattern (supports wildcards)

#### Filesystem Tools
- `read_file` - Read file contents (respects extension restrictions)
- `write_file` - Write content to file (creates directories if needed)
- `list_directory` - List directory contents with metadata

### ğŸ“Š Resources

- `status://databases` - Get current database connection status and health

### ğŸ”’ Security Features

- **Path Restrictions**: Limit filesystem access to specific directories
- **Extension Filtering**: Control which file types can be accessed
- **Size Limits**: Prevent large file operations (default: 100MB)
- **Connection Validation**: Secure database connections with pooling
- **Environment Isolation**: Separate configuration per environment
- **Write Protection**: Configurable write and delete permissions
- **Connection Pooling**: Automatic connection management and cleanup

### ğŸš¨ Troubleshooting

#### Common Issues

**1. "Dependencies not installed" error**
```bash
# Install specific database support
pip install jj-multi-db-mcp[sqlserver]  # for SQL Server
pip install jj-multi-db-mcp[mysql]     # for MySQL
pip install jj-multi-db-mcp[oracle]    # for Oracle
pip install jj-multi-db-mcp[redis]     # for Redis
pip install jj-multi-db-mcp[all]       # for all databases
```

**2. SQL Server connection issues**
- Ensure SQL Server is running and accessible
- Check firewall settings (port 1433)
- Verify ODBC driver is installed: `ODBC Driver 17 for SQL Server`
- Test connection string format

**3. MySQL connection issues**
- Verify MySQL server is running (port 3306)
- Check user permissions: `GRANT ALL PRIVILEGES ON database.* TO 'user'@'%';`
- Ensure charset is compatible (utf8mb4 recommended)

**4. Filesystem permission errors**
- Check `FS_ALLOWED_PATHS` includes the target directory
- Verify `FS_ALLOWED_EXTENSIONS` includes the file type
- Ensure `FS_ENABLE_WRITE=true` for write operations

**5. "Full access mode" warning**
- Set `FS_ALLOWED_PATHS` to restrict filesystem access
- This warning appears when `FS_ALLOWED_PATHS` is not set or is "*"

#### Debug Mode
Enable detailed logging by setting environment variable:
```bash
export PYTHONPATH=DEBUG
```

### ğŸ”§ Development

```bash
# Clone the repository
git clone https://github.com/ppengit/jj-multi-db-mcp.git
cd jj-multi-db-mcp

# Install in development mode with all dependencies
pip install -e .[all]

# Run the server for testing
python -m jj_multi_db_mcp

# Build package
python -m build
```

### ğŸ“„ License

MIT License - see LICENSE file for details.

### ğŸ¤ Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

### ğŸ“ Support

- GitHub Issues: [Report bugs or request features](https://github.com/ppengit/jj-multi-db-mcp/issues)
- Documentation: [Full documentation](https://github.com/ppengit/jj-multi-db-mcp)

### ğŸ™ Acknowledgments

- Built with [MCP (Model Context Protocol)](https://github.com/modelcontextprotocol)
- Inspired by [mcp-sqlserver-filesystem](https://github.com/ppengit/mcp-sqlserver-filesystem)

---

## ä¸­æ–‡

ä¸€ä¸ªå…¨é¢çš„MCPï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰æœåŠ¡å™¨ï¼Œæ”¯æŒå¤šç§æ•°æ®åº“å’Œæ–‡ä»¶ç³»ç»Ÿæ“ä½œã€‚éå¸¸é€‚åˆAIåŠ©æ‰‹å¦‚Claudeå®‰å…¨é«˜æ•ˆåœ°ä¸æ‚¨çš„æ•°æ®åº“å’Œæ–‡ä»¶è¿›è¡Œäº¤äº’ã€‚

### ğŸš€ ç‰¹æ€§

- **ğŸ—„ï¸ SQL Serveræ”¯æŒ**ï¼šå®Œæ•´çš„SQL Serveræ•°æ®åº“æ“ä½œï¼Œæ”¯æŒè¿æ¥æ± 
- **ğŸ¬ MySQLæ”¯æŒ**ï¼šå®Œæ•´çš„MySQLæ•°æ®åº“åŠŸèƒ½ï¼Œä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
- **ğŸ”¶ Oracleæ”¯æŒ**ï¼šå…¨é¢çš„Oracleæ•°æ®åº“æ“ä½œï¼ˆå¯é€‰ä¾èµ–ï¼‰
- **ğŸ”´ Redisæ”¯æŒ**ï¼šé”®å€¼å¯¹æ“ä½œï¼Œæ”¯æŒTTLç®¡ç†
- **ğŸ“ æ–‡ä»¶ç³»ç»Ÿæ“ä½œ**ï¼šå®‰å…¨çš„æ–‡ä»¶å’Œç›®å½•æ“ä½œï¼Œå¯é…ç½®è®¿é—®é™åˆ¶
- **âš™ï¸ ç¯å¢ƒå˜é‡é…ç½®**ï¼šé€šè¿‡ç¯å¢ƒå˜é‡è¿›è¡Œç®€å•é…ç½®
- **ğŸ“¦ uvxå…¼å®¹**ï¼šä¸“ä¸ºuvxåŒ…è¿è¡Œå™¨è®¾è®¡
- **ğŸ”’ å®‰å…¨ä¼˜å…ˆ**ï¼šå¯é…ç½®çš„è®¿é—®æ§åˆ¶å’Œå®‰å…¨é»˜è®¤è®¾ç½®
- **ğŸ”Œ å¯é€‰ä¾èµ–**ï¼šåªå®‰è£…æ‚¨éœ€è¦çš„ç»„ä»¶

### ğŸš€ å¿«é€Ÿå¼€å§‹

#### ä½¿ç”¨uvxï¼ˆæ¨èï¼‰

```bash
# å®‰è£…å¹¶è¿è¡Œç‰¹å®šæ•°æ®åº“æ”¯æŒ
uvx --from jj-multi-db-mcp[sqlserver,mysql,redis] jj-multi-db-mcp

# å®‰è£…æ‰€æœ‰æ•°æ®åº“æ”¯æŒ
uvx --from jj-multi-db-mcp[all] jj-multi-db-mcp

# åŸºç¡€å®‰è£…ï¼ˆä»…æ–‡ä»¶ç³»ç»Ÿï¼‰
uvx jj-multi-db-mcp
```

#### ä½¿ç”¨pip

```bash
# åŸºç¡€å®‰è£…ï¼ˆä»…æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼‰
pip install jj-multi-db-mcp

# å®‰è£…ç‰¹å®šæ•°æ®åº“æ”¯æŒ
pip install jj-multi-db-mcp[sqlserver,mysql,redis]

# å®‰è£…æ‰€æœ‰æ•°æ®åº“æ”¯æŒ
pip install jj-multi-db-mcp[all]

# è¿è¡ŒæœåŠ¡å™¨
jj-multi-db-mcp
```

### âš™ï¸ é…ç½®

ä½¿ç”¨ç¯å¢ƒå˜é‡é…ç½®æœåŠ¡å™¨ï¼š

#### SQL Serveré…ç½®
```bash
export SQLSERVER_ENABLED=true
export SQLSERVER_HOST=localhost
export SQLSERVER_PORT=1433
export SQLSERVER_DATABASE=your_database
export SQLSERVER_USERNAME=sa
export SQLSERVER_PASSWORD=your_password
```

#### MySQLé…ç½®
```bash
export MYSQL_ENABLED=true
export MYSQL_HOST=localhost
export MYSQL_PORT=3306
export MYSQL_DATABASE=your_database
export MYSQL_USERNAME=root
export MYSQL_PASSWORD=your_password
```

#### æ–‡ä»¶ç³»ç»Ÿé…ç½®
```bash
# è·¯å¾„é™åˆ¶ï¼ˆé€—å·åˆ†éš”æˆ–"*"è¡¨ç¤ºå®Œå…¨è®¿é—®ï¼‰
export FS_ALLOWED_PATHS="/home/user/documents,/tmp"

# æ‰©å±•åé™åˆ¶ï¼ˆé€—å·åˆ†éš”æˆ–"*"è¡¨ç¤ºæ‰€æœ‰ï¼‰
export FS_ALLOWED_EXTENSIONS=".txt,.py,.json,.csv,.md"

# æ“ä½œæƒé™
export FS_ENABLE_WRITE=true
export FS_ENABLE_DELETE=false
```

### ğŸš¨ æ•…éšœæ’é™¤

#### å¸¸è§é—®é¢˜

**1. "ä¾èµ–æœªå®‰è£…"é”™è¯¯**
```bash
# å®‰è£…ç‰¹å®šæ•°æ®åº“æ”¯æŒ
pip install jj-multi-db-mcp[sqlserver]  # SQL Server
pip install jj-multi-db-mcp[mysql]     # MySQL
pip install jj-multi-db-mcp[all]       # æ‰€æœ‰æ•°æ®åº“
```

**2. SQL Serverè¿æ¥é—®é¢˜**
- ç¡®ä¿SQL Serveræ­£åœ¨è¿è¡Œä¸”å¯è®¿é—®
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®ï¼ˆç«¯å£1433ï¼‰
- éªŒè¯ODBCé©±åŠ¨å·²å®‰è£…

**3. æ–‡ä»¶ç³»ç»Ÿæƒé™é”™è¯¯**
- æ£€æŸ¥`FS_ALLOWED_PATHS`åŒ…å«ç›®æ ‡ç›®å½•
- éªŒè¯`FS_ALLOWED_EXTENSIONS`åŒ…å«æ–‡ä»¶ç±»å‹
- ç¡®ä¿å†™æ“ä½œæ—¶`FS_ENABLE_WRITE=true`

### ğŸ“„ è®¸å¯è¯

MITè®¸å¯è¯ - è¯¦è§LICENSEæ–‡ä»¶ã€‚

### ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·éšæ—¶æäº¤Pull Requestã€‚
