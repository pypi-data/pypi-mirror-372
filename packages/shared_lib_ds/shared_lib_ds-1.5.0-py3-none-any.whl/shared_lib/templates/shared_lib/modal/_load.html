<!--modal/_load.html-->
<!-- 부트스트랩 모달창 열어주는 코드, 타이틀과 푸터를 변경한다. -->
{% load static %}

{% if popup %}
<style>
.modal-title {
  text-decoration: none;
  color: #777777;
  transition: 0.3s;
  line-height: 1;
}

.modal .modal-dialog .modal-footer .popup-check {
  text-decoration: none;
  color: #777777;
  transition: 0.3s;
  line-height: 1;
}

.modal-body {
  padding: 0;
}
</style>


<!-- Modal -->
<div class="modal fade" id="popupModal" tabindex="-1" aria-labelledby="popupModal" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="popupModalLabel">{{ popup.modal_title }}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        {% if type == 'ModalRotateBG' %}
          {% include 'shared_lib/modal/rotate_bg.html' %}
        {% elif type == 'ModalLinkVideo' %}
          {% include 'shared_lib/modal/link_video.html' %}
        {% elif type == 'ModalSingleBG' %}
          {% include 'shared_lib/modal/single_bg.html' %}
        {% elif type == 'ModalImageOnly' %}
          {% include 'shared_lib/modal/image_only.html' %}
        {% endif %}
      </div>
      <div class="modal-footer justify-content-start">
        <div class="popup-check">
          <input type="checkbox" id="epopup_suppress" />
          <label for="epopup_suppress" data-id="checkbox_text">
            {{ dont_show_again }}
          </label>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- 창이 열리자마자 모달을 뜨게하고 쿠키를 통해 다시 열기 방지 체크 및 창 오픈시 모달창 실행 스크립트 -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
  jQuery(document).ready(function($) {
    if ($.cookie("ecacher-modal_popupModal")) {
      $("#popupModal").remove();
    } else {
      $("#popupModal").modal("show");
    }

    $("#epopup_suppress").click(function() {
      if ($(this).is(":checked")) {
          $("#popupModal").modal("hide");
          $.cookie("ecacher-modal_popupModal", true);
      } else {
        $.cookie("ecacher-modal_popupModal", false);
      }
    })
  });
</script>
{% endif %}
