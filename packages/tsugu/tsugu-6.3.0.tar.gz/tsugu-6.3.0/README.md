


<div align="center">


<h1 align="center"> Tsugu Beta3 </h1>


<div align="center">

</div>

âœ¨<img src="./logo.jpg" width="100" width="30" height="30" alt="tsugu"/>âœ¨




_âš¡ï¸ Python ç¼–å†™çš„ [Tsugu](https://github.com/Yamamoto-2/tsugu-bangdream-bot?tab=readme-ov-file) å‰ç«¯ ----- ç¬¬ä¸‰æ¬¡è¿­ä»£çš„è®¾è®¡äº§ç‰©ã€‚âš¡ï¸_



</div>

<p align="center">
<a href="https://github.com/Yamamoto-2/tsugu-bangdream-bot">
    <img src="https://img.shields.io/badge/tsugubangdream bot - api-yellow" alt="license">
  </a>

<a href="https://github.com/kumoSleeping/tsugu-python-frontend?tab=MIT-1-ov-file">
    <img src="https://img.shields.io/github/license/kumoSleeping/tsugu-python-frontend" alt="license">
  </a>
<a href="https://pypi.org/project/tsugu/">
    <img src="https://img.shields.io/pypi/v/tsugu.svg" alt="license">
  </a>
</p>

---

## ğŸ“¦ Install & Cli-Example

```shell
pip install tsugu
tsugu -h
tsugu æŸ¥å¡ 686
```

API powered by  <a href="https://github.com/WindowsSov8forUs/tsugu-api-python?tab=readme-ov-file">tsugu-api-python</a>    
Command matching provided by <a href="https://github.com/ArcletProject/Alconna">Alconna</a>    

***

## ğŸš— App
| é¡¹ç›® | è¯´æ˜ |
| --- | --- |
| [Tsugu QQ å®˜æ–¹æœºå™¨äºº](https://github.com/kumoSleeping/tsugu-qq-open-platform-bot) | ä¸»åŠ›é¡¹ç›® |
| [TBBP](https://github.com/zhaomaoniu/tsugu-bangdream-bot-py) | å·²æ— äººç»´æŠ¤ NoneBot ç”¨æˆ·è¯·ä½¿ç”¨ [NPTBB](https://github.com/WindowsSov8forUs/nonebot-plugin-tsugu-bangdream-bot) |
|[lgr-tsugu-py](https://github.com/kumoSleeping/lgr-tsugu-py) | å·²æ— äººç»´æŠ¤ æ— æ³•ä½¿ç”¨ |


## ğŸ“œ Feat

- ä¸ºæ”¹å–„ç”¨æˆ·ä½“éªŒï¼Œæœ¬åŒ…ä¸ `koishi æ’ä»¶` åœ¨éƒ¨åˆ†è¡Œä¸ºä¸Šç•¥æœ‰ä¸åŒã€‚
  - æ›´åŠ è¯¦ç»†çš„å¸®åŠ©ä¿¡æ¯ã€‚
  - é»˜è®¤ä¸éœ€è¦å‘½ä»¤å¤´åè·Ÿä¸Šå®Œæ•´çš„ç©ºæ ¼ï¼ˆå¯å…³é—­ï¼‰ã€‚
  - `ç»‘å®šç©å®¶` `è§£é™¤ç»‘å®š` `åˆ·æ–°éªŒè¯å—` ç­‰è‡ªéªŒè¯ç­–ç•¥ã€‚
  - åŸºäº `Alconna` çš„çœŸ â€œå¯é€‰å‚æ•°â€ ã€‚
  - è½¦ç«™ç›¸å…³åŠŸèƒ½ä¸ä¸»åŠ¨æ”¯æŒç»‘å®šè´¦å·çš„é…é˜Ÿä¿¡æ¯ï¼Œä½†è¢«åŠ¨æ¸²æŸ“è½¦ç«™ç»™å‡ºçš„é…é˜Ÿä¿¡æ¯ã€‚
  - å‚æ•°é”™è¯¯æ—¶è¾“å‡ºå®Œæ•´çš„å‘½ä»¤å¸®åŠ©ä¿¡æ¯ã€‚
  - ç•¥æœ‰ä¸åŒçš„è½¦ç«™å±è”½è¯ç­–ç•¥ã€‚
  - å¢åŠ  `ä¸Šä¼ è½¦ç‰Œ` å‘½ä»¤ï¼Œä½†ä»ç„¶æ”¯æŒè‡ªåŠ¨ä»æ–‡æœ¬å¼€å¤´æå–è½¦ç‰Œã€‚
  - `ä¸»è´¦å·` å’Œ `è§£é™¤ç»‘å®š` çš„ä¸åŒè¡Œä¸ºã€‚
- äº‰è®®åŠŸèƒ½
  - æš‚æ—¶æ”¯æŒ ç©å®¶çŠ¶æ€ \<serverName\> ç­–ç•¥
  - æš‚ä¸æ”¯æŒ shortcutç±»æŒ‡ä»¤
    - æš‚ä¸æ”¯æŒ `å›½æœæ¨¡å¼` `å›½æœç©å®¶çŠ¶æ€` ç­‰æŒ‡ä»¤
    - è€Œåº”è¯¥ä½¿ç”¨ `ä¸»æœåŠ¡å™¨ å›½æœ` `ç©å®¶çŠ¶æ€ å›½æœ` ç­‰æŒ‡ä»¤å¼å“åº”ã€‚
  - æš‚ä¸æ”¯æŒ Tsugu å†…éƒ¨è½¦ç«™äº’é€šï¼Œåªé€š `bangdori station` ã€‚
- ä¸ºäº†é€‚åº”å®˜æ–¹ BOT çš„ç‰¹æ€§ï¼Œæœ¬åŒ…æä¾›äº†éšå¼ä¸€äº›éé€šç”¨æ–¹æ³•ã€‚
  - å½“è§£é™¤ç»‘å®šç”¨æˆ·æ•°æ®åº“è¿”å›ç‰¹å®šå€¼æ—¶ä¼šè¢«è®¤å®šä¸ºå®‰å…¨æ¨¡å¼ï¼Œè§¦å‘ç›´æ¥è§£é™¤ç»‘å®šæ“ä½œã€‚

## ğŸ”§ Development

```shell
pip install -r req
pip install PIL
```

---

## ğŸ“š Async & Higher-Order Function
`cmd_generator` æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œç”¨äºç›´æ¥å¤„ç†ç”¨æˆ·è¾“å…¥çš„è‡ªç„¶è¯­è¨€å¹¶å¤„ç†ï¼Œè°ƒç”¨ä¼ å…¥çš„ `send_func` å‘é€ç»“æœ
- `message` (str)ï¼šç”¨æˆ·è¾“å…¥çš„è‡ªç„¶è¯­è¨€
- `user_id` (str)ï¼šç”¨æˆ·çš„ `channel_id` æˆ– `user_id`ï¼Œå½“ `platform` ä¸º `red` ã€ `chronocat` ã€ `onebot` æ—¶ï¼Œè¯¥å€¼ä¸€èˆ¬ä¸ºç”¨æˆ· QQ å·
- `platform` (str)ï¼šç”¨æˆ·çš„å¹³å°ï¼ˆé»˜è®¤å€¼ï¼š`red`ï¼‰
- `send_func`ï¼ˆAwaitableï¼‰ï¼šæœŸæœ›ä¸€ä¸ªæ¥å— `result` å‚æ•°çš„å¼‚æ­¥æ–¹æ³•ï¼Œç”¨äºå‘é€ç»“æœï¼Œå…·ä½“éœ€è¦å®ç°çš„æ–¹æ³•è¯·å‚è€ƒä¸‹æ–¹ç¤ºä¾‹


```python
import asyncio
from tsugu import cmd_generator
from loguru import logger

async def _test_send_eg(result):
    if isinstance(result, list): [logger.success(item['string']) for item in result if item["type"] == "string"]
    if isinstance(result, str): logger.success("\n" + result)

asyncio.run(cmd_generator(message='æŸ¥å¡ -h', user_id='114514', platform='satori',send_func=_test_send_eg))


```

## âœï¸ Config

é€šè¿‡ **ç¯å¢ƒå˜é‡** æˆ–é€šè¿‡é¡¹ç›®ä¸‹ **`.env`** æ–‡ä»¶é…ç½®ã€‚

```zsh
# å‘½ä»¤å¤´åæ˜¯å¦å¿…é¡»è·Ÿä¸Šå®Œæ•´çš„ç©ºæ ¼æ‰èƒ½åŒ¹é…ï¼Œä¾‹å¦‚ `æŸ¥å¡947` ä¸ `æŸ¥å¡ 947` ã€‚ï¼ˆé»˜è®¤å€¼ï¼šfalseï¼‰
TSUGU_COMPACT=false 

# è®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤å€¼ï¼š120ç§’ï¼‰
TSUGU_TIMEOUT=120

# è®¾ç½®ä»£ç†åœ°å€ï¼ˆé»˜è®¤å€¼ï¼šç©ºå­—ç¬¦ä¸²ï¼‰
TSUGU_PROXY=''

# è®¾ç½®åç«¯åœ°å€ï¼ˆé»˜è®¤å€¼ï¼šhttp://tsugubot.com:8080ï¼‰
TSUGU_BACKEND_URL=http://tsugubot.com:8080

# è®¾ç½®æ˜¯å¦ä½¿ç”¨åç«¯ä»£ç†ï¼ˆé»˜è®¤å€¼ï¼štrueï¼‰
TSUGU_BACKEND_PROXY=true

# è®¾ç½®ç”¨æˆ·æ•°æ®åç«¯åœ°å€ï¼ˆé»˜è®¤å€¼ï¼šhttp://tsugubot.com:8080ï¼‰
TSUGU_USERDATA_BACKEND_URL=http://tsugubot.com:8080

# è®¾ç½®æ˜¯å¦ä½¿ç”¨ç”¨æˆ·æ•°æ®åç«¯ä»£ç†ï¼ˆé»˜è®¤å€¼ï¼štrueï¼‰
TSUGU_USERDATA_BACKEND_PROXY=true

# è®¾ç½®æ˜¯å¦ä½¿ç”¨ç®€æ˜“èƒŒæ™¯ï¼ˆé»˜è®¤å€¼ï¼štrueï¼‰
TSUGU_USE_EASY_BG=true

# è®¾ç½®æ˜¯å¦å‹ç¼©è¿”å›æ•°æ®ï¼ˆé»˜è®¤å€¼ï¼štrueï¼‰
TSUGU_COMPRESS=true
```


