# Global Knowledge Configuration
# Automagik Hive Multi-Agent Framework Knowledge Base
# Co-located with knowledge components for better modularity

knowledge:
  # CSV file path (relative to this config file)
  csv_file_path: "knowledge_rag.csv"
  
  # Column mappings for simplified 4-column schema
  content_column: "answer"  # The main content to embed
  metadata_columns:
    - "question"
    - "category"
    - "tags"
  
  # Domain mappings for Automagik Hive development
  domains:
    development:
      name: "Development"
      description: "Multi-agent development patterns and best practices"
      expertise:
        - "Agent creation and configuration"
        - "Team coordination patterns"
        - "Workflow orchestration"
        - "YAML configuration management"
        - "Factory pattern implementations"
        - "Testing and quality assurance"
        - "MCP tool integration"
      common_issues:
        - "Agent factory function errors"
        - "YAML configuration validation"
        - "Database connection issues"
        - "Tool integration problems"
        - "Memory and session management"
      keywords:
        - "agent"
        - "team"
        - "workflow"
        - "factory"
        - "config"
        - "yaml"
        - "mcp"
        - "tools"
        - "memory"
        - "session"
        - "orchestration"
        - "coordination"
        - "genie"
        - "claude"
        - "anthropic"
    
    architecture:
      name: "Architecture"
      description: "System architecture and framework patterns"
      expertise:
        - "Multi-agent architecture design"
        - "Service integration patterns"
        - "Database design and management"
        - "API endpoint architecture"
        - "Docker containerization"
        - "Environment configuration"
      common_issues:
        - "Service connection failures"
        - "Container orchestration problems"
        - "Database schema issues"
        - "API authentication errors"
      keywords:
        - "architecture"
        - "service"
        - "database"
        - "api"
        - "docker"
        - "container"
        - "postgres"
        - "fastapi"
        - "agno"
        - "framework"
    
    operations:
      name: "Operations"
      description: "DevOps, deployment, and operational procedures"
      expertise:
        - "Docker container management"
        - "Environment setup and configuration"
        - "Logging and monitoring"
        - "Performance optimization"
        - "Security best practices"
      keywords:
        - "docker"
        - "deploy"
        - "logging"
        - "monitoring"
        - "performance"
        - "security"
        - "environment"
        - "devops"
  
  # Generic filter configuration
  filters:
    # Valid metadata fields for filtering
    valid_metadata_fields:
      - "category"
      - "tags"
    
    # Manual filtering settings
    manual_filtering:
      enabled: true
      default_field: "category"
      inheritance: "override"
    
    # Agentic filtering settings
    agentic_filtering:
      enabled: true
      extraction_fields:
        - "category"
        - "tags"
      confidence_threshold: 0.5
      keyword_matching: true
  
  # Search configuration
  search_config:
    max_results: 5
    relevance_threshold: 0.7
    enable_hybrid_search: true
    use_semantic_search: true
    include_metadata: true
    search_knowledge: true
    enable_agentic_knowledge_filters: true
  
  # Hot reload manager configuration
  hot_reload:
    enabled: true
    watch_interval: 1
    
  # Vector database configuration
  vector_db:
    table_name: "knowledge_base"
    search_type: "hybrid"
    distance: "cosine"
    embedder: "text-embedding-3-small"
    vector_index:
      type: "HNSW"
    reranker:
      enabled: true
      model: "cohere-rerank-v3"
      top_k: 20
      api_key_env: "COHERE_API_KEY"
    
  # CSV reader configuration
  csv_reader:
    content_column: "answer"
    metadata_columns:
      - "question"
      - "category"
      - "tags"
    encoding: "utf-8"
    
  # Performance settings
  performance:
    cache_ttl: 300
    enable_caching: true
    cache_max_size: 1000