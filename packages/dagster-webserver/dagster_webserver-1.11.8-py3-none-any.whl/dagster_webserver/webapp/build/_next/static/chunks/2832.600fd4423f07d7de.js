"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2832],{21047:(e,n,t)=>{t.d(n,{A1:()=>b,Z1:()=>_});var o=t(99649),r=t(93096),s=t(9329),i=t(6029),a=t(55729),l=t(3102),p=t(99121),d=t(39678),h=t(86400),c=t(77439),u=t(85347),x=t(25217),m=t(32857),j=t(24371),g=t(10740),v=t(15250),f=t(56808),S=t(78351),I=t(72104),y=t(87104),N=t(21870);function P(){let e=(0,s._)(["\n  query PipelineExplorerRootQuery(\n    $snapshotPipelineSelector: PipelineSelector\n    $snapshotId: String\n    $rootHandleID: String!\n    $requestScopeHandleID: String\n  ) {\n    pipelineSnapshotOrError(\n      snapshotId: $snapshotId\n      activePipelineSelector: $snapshotPipelineSelector\n    ) {\n      ... on PipelineSnapshot {\n        id\n        name\n        metadataEntries {\n          ...MetadataEntryFragment\n        }\n        solidHandle(handleID: $rootHandleID) {\n          ...GraphExplorerSolidHandleFragment\n        }\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n            definition {\n              assetNodes {\n                id\n                ...GraphExplorerAssetNodeFragment\n              }\n            }\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n        ...GraphExplorerFragment\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineSnapshotNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return P=function(){return e},e}let b=()=>{(0,m.b7)();let e=(0,l.g)(),n=(0,c.iI)(e["0"]),{pipelineName:t,snapshotId:o}=n,r=(0,l.W6)(),s=(0,S.e)();return(0,f.r)("Snapshot: ".concat(t).concat(o?"@".concat(o.slice(0,8)):"")),(0,i.jsx)(_,{explorerPath:n,onChangeExplorerPath:(e,n)=>{r[n]("/snapshots/".concat((0,c.ZG)(e)))},onNavigateToSourceAssetNode:(e,n)=>{let{assetKey:t}=n,o=(0,v.Q)(t);e.metaKey?s(o):r.push((0,v.Q)(t))}})},_=e=>{var n;let{explorerPath:t,repoAddress:s}=e,l=(0,N.JJ)(s,t.pipelineName),[p,d]=(0,a.useState)({explodeComposites:null!=(n=t.explodeComposites)&&n,preferAssetRendering:!0}),h=!!l&&null!==l.externalJobSource;if((0,a.useEffect)(()=>(h!==p.isExternal&&d((0,r._)((0,o._)({},p),{isExternal:h})),()=>{}),[h,p]),l&&l.isAssetJob&&p.preferAssetRendering){let n=(0,N.ee)(s||null,t.pipelineName);return(0,i.jsx)(j.uj,{options:p,setOptions:d,fetchOptions:{pipelineSelector:n},explorerPath:t,onChangeExplorerPath:e.onChangeExplorerPath,onNavigateToSourceAssetNode:e.onNavigateToSourceAssetNode,viewType:g.kh.JOB},t.pipelineName)}return(0,i.jsx)(E,(0,r._)((0,o._)({},e),{options:p,setOptions:d}))},E=e=>{let{explorerPath:n,repoAddress:t,onChangeExplorerPath:o,onNavigateToSourceAssetNode:r,isGraph:s=!1,options:a,setOptions:l}=e,c=n.opNames.slice(0,n.opNames.length-1),x=(0,N.ee)(t||null,n.pipelineName),m=(0,u.IT)(A,{variables:{snapshotPipelineSelector:n.snapshotId?void 0:x,snapshotId:n.snapshotId?n.snapshotId:void 0,rootHandleID:c.join("."),requestScopeHandleID:a.explodeComposites?void 0:c.join(".")}});return(0,i.jsx)(y.R,{queryResult:m,children:e=>{let{pipelineSnapshotOrError:c}=e;if("PipelineSnapshot"!==c.__typename)return(0,i.jsx)(h.s,{isGraph:s,result:c,repoAddress:t});let u=c.solidHandle,m=a.explodeComposites?(0,p.$)(c.solidHandles):c.solidHandles,v=c.solidHandles.some(e=>e.solid.definition.assetNodes.length>0);return a.preferAssetRendering&&v?(0,i.jsx)(j.uj,{options:a,setOptions:l,fetchOptions:{pipelineSelector:x},explorerPath:n,onChangeExplorerPath:o,onNavigateToSourceAssetNode:r,viewType:g.kh.JOB}):(0,i.jsx)(d.Uh,{options:a,setOptions:l,explorerPath:n,onChangeExplorerPath:o,container:c,repoAddress:t,handles:m,parentHandle:u||void 0,isGraph:s,getInvocations:e=>m.filter(n=>n.solid.definition.name===e).map(e=>({handleID:e.handleID}))})}})},A=(0,u.J1)(P(),I.U,d.G4,d.zO,d.wo,x.z)},32832:(e,n,t)=>{t.r(n),t.d(n,{SnapshotRoot:()=>b,default:()=>_});var o=t(6029),r=t(3102),s=t(21047),i=t(99649),a=t(93096),l=t(9329),p=t(26277),d=t(43697),h=t(3066),c=t(41241),u=t(44263),x=t(38584),m=t(85347),j=t(77439),g=t(85725),v=t(21870),f=t(25909);function S(){let e=(0,l._)(["\n  query SnapshotQuery($snapshotId: String!) {\n    pipelineSnapshotOrError(snapshotId: $snapshotId) {\n      ... on PipelineSnapshot {\n        id\n        parentSnapshotId\n      }\n    }\n  }\n"]);return S=function(){return e},e}let I=(0,m.J1)(S()),y=e=>{var n;let{activeTab:t="",explorerPath:r}=e,{pipelineName:s,snapshotId:l=""}=r,S=(0,j.ZG)((0,a._)((0,i._)({},r),{opNames:[]})),y=(0,v.sZ)(s),N=null==y?void 0:y.pipelineSnapshotId,{data:P,loading:b}=(0,m.IT)(I,{variables:{snapshotId:l}});return(0,o.jsx)(d.z,{title:(0,o.jsx)(h.M7,{style:{fontFamily:c.a.monospace,fontSize:"16px"},children:null==(n=r.snapshotId)?void 0:n.slice(0,8)}),tags:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(p.v,{icon:"schema",children:["Snapshot of"," ",(0,o.jsx)(x.N_,{to:(0,f.KU)(r.pipelineName),children:r.pipelineName})]}),(()=>{var e;return b?(0,o.jsx)(p.v,{intent:"none",minimal:!0,children:"..."}):N&&(N===l||(null==P?void 0:P.pipelineSnapshotOrError.__typename)!=="PipelineSnapshot"||(null==P||null==(e=P.pipelineSnapshotOrError)?void 0:e.parentSnapshotId)===N)?(0,o.jsx)(p.v,{intent:"success",minimal:!0,children:"Current"}):(0,o.jsx)(p.v,{intent:"warning",minimal:!0,children:"Snapshot"})})()]}),tabs:(0,o.jsx)(u.tU,{selectedTabId:t,children:[{text:"Definition",pathComponent:"",href:"/snapshots/".concat(S)},{text:"Runs",pathComponent:"runs",href:"/snapshots/".concat(S,"runs")}].map(e=>{let{href:n,text:t,pathComponent:r}=e;return(0,o.jsx)(g.s,{id:r,title:t,to:n},t)})})})};var N=t(11810),P=t(76659);let b=()=>{let{pipelinePath:e,tab:n}=(0,r.g)(),t=(0,j.iI)(e);return(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%"},children:[(0,o.jsx)(y,{activeTab:n,explorerPath:t}),(0,o.jsxs)(r.dO,{children:[(0,o.jsx)(N.q,{path:"/snapshots/:pipelinePath/runs",children:(0,o.jsx)(P.n,{})}),(0,o.jsx)(N.q,{path:"/snapshots/(/?.*)",children:(0,o.jsx)(s.A1,{})})]})]})},_=b},76659:(e,n,t)=>{t.d(n,{n:()=>O});var o=t(99649),r=t(93096),s=t(6029),i=t(58323),a=t(83150),l=t(26277),p=t(96331),d=t(55729),h=t(3102),c=t(77439),u=t(33762),x=t(33658),m=t(35171),j=t(21870),g=t(25909);let v=e=>{let{repoAddress:n,anyFilter:t,jobName:o,jobPath:r}=e,i=(0,j.GK)(n),l=(0,j.PO)(i,o),p=(0,j._z)(i,o);return(0,s.jsx)(a.a,{padding:{vertical:64},children:(0,s.jsx)(x.I,{icon:"run",title:"No runs found",description:n?p?(0,s.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not launched any runs for this external job."}):l?(0,s.jsxs)(a.a,{flex:{direction:"column",gap:12},children:[(0,s.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not materialized any assets with this job yet."}),(0,s.jsx)("div",{children:(0,s.jsx)(m.A,{icon:(0,s.jsx)(u.In,{name:"materialization"}),to:(0,g.HG)(n,"/jobs/".concat(r)),children:"Materialize an asset"})})]}):(0,s.jsxs)(a.a,{flex:{direction:"column",gap:12},children:[(0,s.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not launched any runs for this job yet."}),(0,s.jsx)("div",{children:(0,s.jsx)(m.A,{icon:(0,s.jsx)(u.In,{name:"add_circle"}),to:(0,g.HG)(n,"/jobs/".concat(r,"/playground")),children:"Launch a run"})})]}):(0,s.jsx)("div",{children:"You have not launched any runs for this job."})})})};var f=t(76309),S=t(98394),I=t(32857),y=t(66822),N=t(61365),P=t(89250),b=t(27680),_=t(63510),E=t(36152),A=t(89010),C=t(67402);let H=["status","tag","id","created_date_before","created_date_after"],O=e=>{(0,I.b7)();let{pipelinePath:n}=(0,h.g)(),{repoAddress:t=null}=e,u=(0,c.iI)(n),{pipelineName:x,snapshotId:m}=u,g=(0,j.GK)(t),O=(0,j.Ji)(g,x);(0,f.J)(u,O);let[D,T]=(0,E.HB)(H),k=(0,d.useMemo)(()=>[O?{token:"job",value:x}:{token:"pipeline",value:x},m?{token:"snapshotId",value:m}:null].filter(Boolean),[O,x,m]),w=(0,d.useMemo)(()=>{let e=[...D,...k];if(t){let n={token:"tag",value:"".concat(N.d.RepositoryLabelTag,"=").concat((0,C.DV)(t))};e.push(n)}return(0,r._)((0,o._)({},(0,E.Us)(e)),{pipelineName:x,snapshotId:m})},[D,k,x,t,m]),G=(0,d.useCallback)(e=>{let n=(0,i.AY)(e);D.some(e=>(0,i.AY)(e)===n)||T([...D,e])},[D,T]),{entries:F,paginationProps:R,queryResult:$}=(0,A.A)({filter:w,skip:!1,view:y.ivR.RUNS}),J=(0,S.Bj)($,S.eO),{button:q,activeFiltersJsx:z}=(0,E.QR)({enabledFilters:H,tokens:D,onChange:T,loading:$.loading}),B=(0,s.jsxs)(a.a,{flex:{direction:"row",gap:8,alignItems:"center"},style:{width:"100%"},padding:{right:16},children:[q,(0,s.jsx)("div",{style:{flex:1}}),(0,s.jsx)(S.D7,{refreshState:J})]}),U=(0,s.jsxs)(a.a,{flex:{direction:"row",gap:4,alignItems:"center"},children:[k.map(e=>{let{token:n,value:t}=e;return(0,s.jsx)(l.v,{children:"".concat(n,":").concat(t)},n)}),z,z.length>0&&(0,s.jsx)(p.v,{onClick:()=>T([]),children:"Clear all"})]});return(0,s.jsx)(P.rw.Provider,{value:{refetch:J.refetch},children:$.error?(0,s.jsx)(b.h,{error:$.error}):(0,s.jsx)("div",{style:{minHeight:0},children:(0,s.jsx)(_.V,{entries:F,loading:$.loading,onAddTag:G,refetch:J.refetch,actionBarComponents:B,belowActionBarComponents:U,paginationProps:R,filter:w,emptyState:()=>(0,s.jsx)(v,{repoAddress:t,anyFilter:D.length>0,jobName:x,jobPath:n})})})})}}}]);
//# sourceMappingURL=2832.600fd4423f07d7de.js.map