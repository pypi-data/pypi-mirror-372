Metadata-Version: 2.4
Name: mcp-db-filesystem
Version: 1.1.0
Summary: Simple and efficient MCP server for multi-database (SQL Server, MySQL) and Redis access with filesystem operations
Project-URL: Homepage, https://github.com/ppengit/mcp-db-filesystem
Project-URL: Repository, https://github.com/ppengit/mcp-db-filesystem
Project-URL: Issues, https://github.com/ppengit/mcp-db-filesystem/issues
Author-email: PJ <peng.it@qq.com>
License: MIT
License-File: LICENSE
Keywords: cross-platform,database,filesystem,mcp,mysql,redis,server,sqlserver
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Database
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: System :: Filesystems
Requires-Python: >=3.11
Requires-Dist: aiofiles>=23.0.0
Requires-Dist: mcp>=1.9.3
Requires-Dist: pydantic>=2.0.0
Requires-Dist: pymysql>=1.1.0
Requires-Dist: pyodbc>=5.0.0
Requires-Dist: python-dotenv>=1.0.0
Requires-Dist: redis>=5.0.0
Requires-Dist: sqlalchemy>=2.0.0
Provides-Extra: dev
Requires-Dist: black>=23.0.0; extra == 'dev'
Requires-Dist: flake8>=6.0.0; extra == 'dev'
Requires-Dist: isort>=5.12.0; extra == 'dev'
Requires-Dist: mypy>=1.0.0; extra == 'dev'
Requires-Dist: pytest-asyncio>=0.21.0; extra == 'dev'
Requires-Dist: pytest-cov>=4.0.0; extra == 'dev'
Requires-Dist: pytest>=7.0.0; extra == 'dev'
Requires-Dist: twine>=6.1.0; extra == 'dev'
Description-Content-Type: text/markdown

# MCP Database Filesystem

[English](README_EN.md) | ä¸­æ–‡

ä¸€ä¸ªç®€æ´é«˜æ•ˆçš„ MCP (Model Context Protocol) æœåŠ¡å™¨ï¼Œæä¾›å¤šæ•°æ®åº“è®¿é—®å’Œæ–‡ä»¶ç³»ç»Ÿæ“ä½œåŠŸèƒ½ã€‚

## âœ¨ ä¸»è¦ç‰¹æ€§

### ğŸ—„ï¸ å¤šæ•°æ®åº“æ”¯æŒ

#### SQL Server
- **SQL æŸ¥è¯¢æ‰§è¡Œ** - æ”¯æŒ SELECT æŸ¥è¯¢
- **SQL å‘½ä»¤æ‰§è¡Œ** - æ”¯æŒ INSERT/UPDATE/DELETE æ“ä½œ
- **è¡¨ç»“æ„æŸ¥è¯¢** - è·å–è¡¨çš„è¯¦ç»†ç»“æ„ä¿¡æ¯å’Œå­—æ®µæè¿°
- **è¡¨åˆ—è¡¨** - åˆ—å‡ºæ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨

#### MySQL
- **MySQL æŸ¥è¯¢æ‰§è¡Œ** - æ”¯æŒ MySQL SELECT æŸ¥è¯¢
- **MySQL å‘½ä»¤æ‰§è¡Œ** - æ”¯æŒ INSERT/UPDATE/DELETE æ“ä½œ
- **MySQL è¡¨ç»“æ„æŸ¥è¯¢** - è·å– MySQL è¡¨çš„è¯¦ç»†ç»“æ„ä¿¡æ¯
- **MySQL è¡¨åˆ—è¡¨** - åˆ—å‡º MySQL æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨

#### Redis
- **é”®å€¼æ“ä½œ** - GET/SET/DELETE é”®å€¼å¯¹
- **é”®ç®¡ç†** - åˆ—å‡ºåŒ¹é…æ¨¡å¼çš„é”®
- **æœåŠ¡å™¨ä¿¡æ¯** - è·å– Redis æœåŠ¡å™¨çŠ¶æ€ä¿¡æ¯
- **è¿‡æœŸè®¾ç½®** - æ”¯æŒé”®çš„è¿‡æœŸæ—¶é—´è®¾ç½®

### ğŸ“ æ–‡ä»¶ç³»ç»ŸåŠŸèƒ½
- **æ–‡ä»¶è¯»å–** - è¯»å–æ–‡ä»¶å†…å®¹
- **æ–‡ä»¶å†™å…¥** - å†™å…¥å†…å®¹åˆ°æ–‡ä»¶
- **ç›®å½•åˆ—è¡¨** - åˆ—å‡ºç›®å½•å†…å®¹

### ğŸ”’ å®‰å…¨ç‰¹æ€§
- SQL æ³¨å…¥é˜²æŠ¤
- æ–‡ä»¶ç³»ç»Ÿè®¿é—®æ§åˆ¶
- ç¯å¢ƒå˜é‡é…ç½®
- æƒé™éªŒè¯

### ğŸ”„ å®¹é”™æœºåˆ¶
- **ä¼˜é›…é™çº§** - ä»»ä½•æ•°æ®åº“è¿æ¥å¤±è´¥æ—¶ä¸å½±å“å…¶ä»–æœåŠ¡
- **åŠ¨æ€é‡è¿** - æ”¯æŒè¿è¡Œæ—¶é‡æ–°è¿æ¥å„ç§æ•°æ®åº“
- **çŠ¶æ€ç›‘æ§** - å®æ—¶ç›‘æ§æ‰€æœ‰æ•°æ®åº“è¿æ¥çŠ¶æ€

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ å‰ç½®è¦æ±‚

æ ¹æ®æ‚¨è¦ä½¿ç”¨çš„æ•°æ®åº“æœåŠ¡ï¼Œå®‰è£…ç›¸åº”çš„é©±åŠ¨ç¨‹åºï¼š

#### 1. SQL Server (å¯é€‰)
å®‰è£… ODBC Driver for SQL Server

**Windows:**
```bash
# ä¸‹è½½å¹¶å®‰è£… Microsoft ODBC Driver 17 for SQL Server
# è®¿é—®: https://docs.microsoft.com/en-us/sql/connect/odbc/download-odbc-driver-for-sql-server
# æˆ–ä½¿ç”¨ winget å®‰è£…
winget install Microsoft.ODBCDriverforSQLServer
```

**macOS:**
```bash
# ä½¿ç”¨ Homebrew å®‰è£…
brew tap microsoft/mssql-release https://github.com/Microsoft/homebrew-mssql-release
brew update
brew install msodbcsql17 mssql-tools
```

**Linux (Ubuntu/Debian):**
```bash
# æ·»åŠ  Microsoft ä»“åº“
curl https://packages.microsoft.com/keys/microsoft.asc | sudo apt-key add -
curl https://packages.microsoft.com/config/ubuntu/20.04/prod.list | sudo tee /etc/apt/sources.list.d/msprod.list

# å®‰è£…é©±åŠ¨
sudo apt-get update
sudo apt-get install msodbcsql17
```

#### 2. éªŒè¯ ODBC å®‰è£…

```bash
# Windows
odbcad32.exe

# macOS/Linux
odbcinst -j
```

#### 2. MySQL (å¯é€‰)
å¦‚æœè¦ä½¿ç”¨ MySQL åŠŸèƒ½ï¼Œç¡®ä¿ MySQL æœåŠ¡å™¨å¯è®¿é—®ã€‚ä¸éœ€è¦é¢å¤–çš„å®¢æˆ·ç«¯é©±åŠ¨ï¼ŒPyMySQL å·²åŒ…å«åœ¨ä¾èµ–ä¸­ã€‚

#### 3. Redis (å¯é€‰)
å¦‚æœè¦ä½¿ç”¨ Redis åŠŸèƒ½ï¼Œç¡®ä¿ Redis æœåŠ¡å™¨å¯è®¿é—®ã€‚ä¸éœ€è¦é¢å¤–çš„å®¢æˆ·ç«¯é©±åŠ¨ï¼Œredis-py å·²åŒ…å«åœ¨ä¾èµ–ä¸­ã€‚

### ğŸ“¦ é›¶å®‰è£…ä½¿ç”¨ï¼ˆæ¨èï¼‰

```bash
# å®‰è£… uvï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰
pip install uv

# ç›´æ¥è¿è¡Œ - æ— éœ€å…‹éš†ä»“åº“ï¼
uvx mcp-db-filesystem@latest
```

### ğŸ”§ é…ç½®

åœ¨ä½ çš„ MCP å®¢æˆ·ç«¯ï¼ˆå¦‚ Claude Desktopã€AugmentCodeï¼‰ä¸­æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```json
{
  "mcpServers": {
    "mcp-db-filesystem": {
      "command": "uvx",
      "args": ["mcp-db-filesystem@latest"],
      "env": {
        "DB_SERVER": "localhost",
        "DB_DATABASE": "your_database",
        "DB_USERNAME": "your_username",
        "DB_PASSWORD": "your_password",
        "DB_USE_WINDOWS_AUTH": "false",
        "DB_TRUST_SERVER_CERTIFICATE": "true",
        "DB_ENCRYPT": "false",
        "FS_ALLOWED_PATHS": "*",
        "FS_ALLOWED_EXTENSIONS": "*.*",
        "FS_IGNORE_FILE_LOCKS": "true"
      }
    }
  }
}
```

## ğŸ› ï¸ å¯ç”¨å·¥å…·

### SQL Server å·¥å…·
- `sql_query` - æ‰§è¡Œ SQL Server SELECT æŸ¥è¯¢
- `sql_execute` - æ‰§è¡Œ SQL Server INSERT/UPDATE/DELETE å‘½ä»¤
- `list_tables` - åˆ—å‡º SQL Server æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨
- `get_table_schema` - è·å– SQL Server è¡¨çš„ç»“æ„ä¿¡æ¯
- `database_reconnect` - é‡æ–°è¿æ¥ SQL Server

### MySQL å·¥å…·
- `mysql_query` - æ‰§è¡Œ MySQL SELECT æŸ¥è¯¢
- `mysql_execute` - æ‰§è¡Œ MySQL INSERT/UPDATE/DELETE å‘½ä»¤
- `mysql_list_tables` - åˆ—å‡º MySQL æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨
- `mysql_get_table_schema` - è·å– MySQL è¡¨çš„ç»“æ„ä¿¡æ¯
- `mysql_reconnect` - é‡æ–°è¿æ¥ MySQL

### Redis å·¥å…·
- `redis_get` - è·å– Redis é”®å€¼
- `redis_set` - è®¾ç½® Redis é”®å€¼ï¼ˆæ”¯æŒè¿‡æœŸæ—¶é—´ï¼‰
- `redis_delete` - åˆ é™¤ Redis é”®
- `redis_keys` - åˆ—å‡ºåŒ¹é…æ¨¡å¼çš„ Redis é”®
- `redis_info` - è·å– Redis æœåŠ¡å™¨ä¿¡æ¯
- `redis_reconnect` - é‡æ–°è¿æ¥ Redis

### æ•°æ®åº“ç®¡ç†å·¥å…·
- `database_status` - æ£€æŸ¥æ‰€æœ‰æ•°æ®åº“è¿æ¥çŠ¶æ€

### æ–‡ä»¶ç³»ç»Ÿå·¥å…·
- `read_file` - è¯»å–æ–‡ä»¶å†…å®¹
- `write_file` - å†™å…¥æ–‡ä»¶å†…å®¹
- `list_directory` - åˆ—å‡ºç›®å½•å†…å®¹

## ğŸ“‹ ç¯å¢ƒå˜é‡

### SQL Server é…ç½®
- `DB_SERVER` - SQL Server æœåŠ¡å™¨åœ°å€
- `DB_DATABASE` - æ•°æ®åº“åç§°
- `DB_USERNAME` - ç”¨æˆ·å
- `DB_PASSWORD` - å¯†ç 
- `DB_USE_WINDOWS_AUTH` - æ˜¯å¦ä½¿ç”¨ Windows èº«ä»½éªŒè¯
- `DB_TRUST_SERVER_CERTIFICATE` - æ˜¯å¦ä¿¡ä»»æœåŠ¡å™¨è¯ä¹¦
- `DB_ENCRYPT` - æ˜¯å¦åŠ å¯†è¿æ¥

### MySQL é…ç½®
- `MYSQL_HOST` - MySQL æœåŠ¡å™¨åœ°å€
- `MYSQL_PORT` - MySQL ç«¯å£ï¼ˆé»˜è®¤ 3306ï¼‰
- `MYSQL_DATABASE` - MySQL æ•°æ®åº“åç§°
- `MYSQL_USERNAME` - MySQL ç”¨æˆ·å
- `MYSQL_PASSWORD` - MySQL å¯†ç 
- `MYSQL_CHARSET` - å­—ç¬¦é›†ï¼ˆé»˜è®¤ utf8mb4ï¼‰
- `MYSQL_CONNECTION_TIMEOUT` - è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
- `MYSQL_POOL_SIZE` - è¿æ¥æ± å¤§å°
- `MYSQL_MAX_OVERFLOW` - æœ€å¤§æº¢å‡ºè¿æ¥æ•°

### Redis é…ç½®
- `REDIS_HOST` - Redis æœåŠ¡å™¨åœ°å€
- `REDIS_PORT` - Redis ç«¯å£ï¼ˆé»˜è®¤ 6379ï¼‰
- `REDIS_DB` - Redis æ•°æ®åº“ç¼–å·ï¼ˆé»˜è®¤ 0ï¼‰
- `REDIS_PASSWORD` - Redis å¯†ç ï¼ˆå¯é€‰ï¼‰
- `REDIS_SOCKET_TIMEOUT` - Socket è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
- `REDIS_CONNECTION_TIMEOUT` - è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
- `REDIS_MAX_CONNECTIONS` - æœ€å¤§è¿æ¥æ•°

### æ–‡ä»¶ç³»ç»Ÿé…ç½®
- `FS_ALLOWED_PATHS` - å…è®¸è®¿é—®çš„è·¯å¾„ï¼ˆ`*` è¡¨ç¤ºæ‰€æœ‰è·¯å¾„ï¼‰
- `FS_ALLOWED_EXTENSIONS` - å…è®¸çš„æ–‡ä»¶æ‰©å±•åï¼ˆ`*.*` è¡¨ç¤ºæ‰€æœ‰æ–‡ä»¶ï¼‰
- `FS_IGNORE_FILE_LOCKS` - æ˜¯å¦å¿½ç•¥æ–‡ä»¶é”

## ğŸ”§ å¼€å‘

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/ppengit/mcp-db-filesystem.git
cd mcp-db-filesystem

# å®‰è£…ä¾èµ–
uv sync

# è¿è¡ŒæœåŠ¡å™¨
uv run python -m mcp_db_filesystem server
```

### æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•
uv run pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•
uv run pytest tests/test_database.py
```

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·æäº¤ Issue æˆ– Pull Requestã€‚

## â“ å¸¸è§é—®é¢˜

### Q: å‡ºç° "No module named 'pyodbc'" é”™è¯¯
A: è¯·ç¡®ä¿å·²å®‰è£… ODBC Driver for SQL Serverï¼Œå‚è§ä¸Šé¢çš„å‰ç½®è¦æ±‚éƒ¨åˆ†ã€‚

### Q: å‡ºç° "Data source name not found" é”™è¯¯
A: æ£€æŸ¥ `DB_SERVER` é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿ SQL Server æœåŠ¡æ­£åœ¨è¿è¡Œã€‚

### Q: è¿æ¥è¶…æ—¶æˆ–æ‹’ç»è¿æ¥
A:
1. æ£€æŸ¥ SQL Server æ˜¯å¦å¯ç”¨äº† TCP/IP åè®®
2. ç¡®è®¤é˜²ç«å¢™è®¾ç½®å…è®¸è¿æ¥åˆ° SQL Server ç«¯å£ï¼ˆé»˜è®¤1433ï¼‰
3. éªŒè¯ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®

### Q: æ–‡ä»¶ç³»ç»Ÿæ“ä½œè¢«æ‹’ç»
A: æ£€æŸ¥ `FS_ALLOWED_PATHS` å’Œ `FS_ALLOWED_EXTENSIONS` é…ç½®ï¼Œç¡®ä¿è·¯å¾„å’Œæ–‡ä»¶ç±»å‹è¢«å…è®¸è®¿é—®ã€‚

## ğŸ“ æ”¯æŒ

- GitHub Issues: [https://github.com/ppengit/mcp-db-filesystem/issues](https://github.com/ppengit/mcp-db-filesystem/issues)

## ğŸ”„ æ›´æ–°æ—¥å¿—

### v1.0.1
- ğŸ‰ é¦–ä¸ªç¨³å®šç‰ˆæœ¬å‘å¸ƒ
- âœ¨ å®Œæ•´çš„ SQL Server æ•°æ®åº“æ”¯æŒ
- ğŸ“ å…¨é¢çš„æ–‡ä»¶ç³»ç»Ÿæ“ä½œ
- ğŸ”’ å¢å¼ºçš„å®‰å…¨ç‰¹æ€§
- ğŸ“ æ”¹è¿›çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- ğŸš€ ç®€åŒ–çš„æ¶æ„ï¼Œä¸“æ³¨äºæ ¸å¿ƒåŠŸèƒ½

---

**æ³¨æ„**: æ­¤ç‰ˆæœ¬ä¸“æ³¨äºæ ¸å¿ƒåŠŸèƒ½çš„ç¨³å®šæ€§å’Œå¯é æ€§ï¼Œæä¾›ç®€æ´é«˜æ•ˆçš„MCPæœåŠ¡å™¨ä½“éªŒã€‚
