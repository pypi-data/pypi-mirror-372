[project]
authors = [{name = "Carl Andersson", email = "carl.andersson@ivl.se"}]
dependencies = [
    "numpy",
    "scipy",
    "whenever>=0.6.5,<0.7",
    "xarray",
    "soundfile",
    "sounddevice",
    "pandas",
    "gpxpy",
    "plotly",
    "python-dotenv>=1",
    "numba>=0.60",
    "zarr>=2.18,<3",
]
description = "Underwater Acoustic Analysis tools"
readme = "README.md"
name = "uwacan"
requires-python = ">= 3.11"
dynamic = ["version"]

[project.urls]
Repository = "https://github.com/CarlAndersson/underwater-acoustics-analysis"

[build-system]
build-backend = "hatchling.build"
requires = ["hatchling", "versioningit"]

[tool.hatch.version]
source = "versioningit"

[tool.versioningit.format]
distance = "{base_version}.post{distance}+{vcs}{rev}"
dirty = "{base_version}+dirty"
distance-dirty = "{base_version}.post{distance}+{vcs}{rev}-dirty"

[tool.hatch.build.hooks.versioningit-onbuild]
source-file = "uwacan/_version.py"
build-file = "uwacan/_version.py"
regex = '^\s*version\s*=\s*(?P<version>.*)'

[tool.pixi.project]
channels = ["conda-forge"]
platforms = ["win-64"]

[tool.pixi.pypi-dependencies]
uwacan = { path = ".", editable = true }

[tool.pixi.tasks]
lint = "ruff check uwacan"
format = "ruff format uwacan"

[tool.pixi.dependencies]
# Package dependencies
numpy = "*"
scipy = "*"
whenever = "*"
xarray = "*"
pandas = "*"
gpxpy = "*"
plotly = "*"
zarr = "*"
numba = "*"
# Development tools
jupyter = "*"
ruff = "*"

[tool.pixi.feature.docs]
dependencies = { sphinx = "*" }
pypi-dependencies = { pydata-sphinx-theme = "*",  numpydoc = "*", sphinx-design = "*", sphinx-copybutton = "*"}

[tool.pixi.feature.docs.tasks.docs]
cmd = "make html"
cwd = "docs"

[tool.pixi.environments]
docs = {features=["docs"]}

[tool.ruff]
line-length = 120

[tool.ruff.format]
quote-style = "double"

[tool.ruff.lint]
select = [
    "D",
    "D415",  # Docstring summary should be punctuated.
    "D417",  # Docstrings should document all parameters
]

ignore = [
    "D105",
]

pydocstyle = { convention = "numpy"}
